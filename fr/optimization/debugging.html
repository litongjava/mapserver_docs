<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Debugger Mapserver &mdash; MapServer 7.0.0 documentation</title>
    
    <link rel="stylesheet" href="../_static/sphinx.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '7.0.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/translations.js"></script>
    <link rel="shortcut icon" href="../_static/mapserver.ico"/>
    <link rel="author" title="À propos de ces documents" href="../about.html" />
    <link rel="copyright" title="Copyright" href="../copyright.html" />
    <link rel="top" title="MapServer 7.0.0 documentation" href="../index.html" />
    <link rel="up" title="Optimisation" href="index.html" />
    <link rel="next" title="FastCGI" href="fastcgi.html" />
    <link rel="prev" title="Optimisation" href="index.html" />
   
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9">

  </head>
  <body role="document">

<table width="100%" style="width: 100%; background-color: white;">
  <tr>
    <td rowspan="2" style="padding: 10px 0px 10px 10px;">
      <a href="../index.html" title="Home"><img src="../_static/banner.png" alt="MapServer banner" border="0" /></a>
    </td>
    <td style="padding: 10px 10px 0px 0px; text-align: right; vertical-align: top;">
      <a href="../index.html" title="Home">Home</a> |
      <a href="../products.html" title="Products (MapServer core, MapCache, TinyOWS">Products</a> |
      <a href="https://github.com/mapserver/mapserver/issues/" title="Issue Tracker (MapServer core)">Issue Tracker</a> |
      <a href="../faq.html" title="FAQ">FAQ</a> |
      <a href="../download.html" title="Download">Download </a>
    </td>
  </tr>
  <tr>
    <td style="padding: 0px 10px 0px 0px; text-align: right; vertical-align: bottom;">
        
          
            <a href="../../optimization/debugging.html"><img src="../_static/flagicons/en.png" alt="en" title="en" border="0" /></a>
          
        
        
          
            <a href="../../ar/optimization/debugging.html"><img src="../_static/flagicons/ar.png" alt="ar" title="ar" border="0" /></a>
          
        
        
          
            <a href="../../de/optimization/debugging.html"><img src="../_static/flagicons/de.png" alt="de" title="de" border="0" /></a>
          
        
        
          
            <a href="../../el/optimization/debugging.html"><img src="../_static/flagicons/el.png" alt="el" title="el" border="0" /></a>
          
        
        
          
            <a href="../../es/optimization/debugging.html"><img src="../_static/flagicons/es.png" alt="es" title="es" border="0" /></a>
          
        
        <img src="../_static/flagicons/fr.png" alt="fr" title="fr" border="0" width="18px" height="13px"/>
        
          
            <a href="../../id/optimization/debugging.html"><img src="../_static/flagicons/id.png" alt="id" title="id" border="0" /></a>
          
        
        
          
            <a href="../../it/optimization/debugging.html"><img src="../_static/flagicons/it.png" alt="it" title="it" border="0" /></a>
          
        
        
          
            <a href="../../ja/optimization/debugging.html"><img src="../_static/flagicons/ja.png" alt="ja" title="ja" border="0" /></a>
          
        
        
          
            <a href="../../nl_NL/optimization/debugging.html"><img src="../_static/flagicons/nl_NL.png" alt="nl_NL" title="nl_NL" border="0" /></a>
          
        
        
          
            <a href="../../pl/optimization/debugging.html"><img src="../_static/flagicons/pl.png" alt="pl" title="pl" border="0" /></a>
          
        
        
          
            <a href="../../ru/optimization/debugging.html"><img src="../_static/flagicons/ru.png" alt="ru" title="ru" border="0" /></a>
          
        
        
          
            <a href="../../sq/optimization/debugging.html"><img src="../_static/flagicons/sq.png" alt="sq" title="sq" border="0" /></a>
          
        
        
          
            <a href="../../tr/optimization/debugging.html"><img src="../_static/flagicons/tr.png" alt="tr" title="tr" border="0" /></a>
          
        
        
          
            <a href="../../uk/optimization/debugging.html"><img src="../_static/flagicons/uk.png" alt="uk" title="uk" border="0" /></a>
          
        

    </td>
  </tr>
</table>


  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="debugging-mapserver">
<span id="debugging"></span><span id="index-0"></span><h1><a class="toc-backref" href="#table-of-contents">Debugger Mapserver</a><a class="headerlink" href="#debugging-mapserver" title="Lien permanent vers ce titre">¶</a></h1>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Author:</th><td class="field-body">Jeff McKenna</td>
</tr>
<tr class="field-even field"><th class="field-name">Contact:</th><td class="field-body">jmckenna at gatewaygeomatics.com</td>
</tr>
<tr class="field-odd field"><th class="field-name">Last Updated:</th><td class="field-body"><p class="first last">02-07-2013</p>
</td>
</tr>
</tbody>
</table>
<div class="contents topic" id="table-of-contents">
<p class="topic-title first">Table des matières</p>
<ul class="simple">
<li><a class="reference internal" href="#debugging-mapserver" id="id1">Debugger Mapserver</a><ul>
<li><a class="reference internal" href="#introduction" id="id2">Introduction</a><ul>
<li><a class="reference internal" href="#links-to-related-information" id="id3">Liens vers les informations associées</a></li>
</ul>
</li>
<li><a class="reference internal" href="#steps-to-enable-mapserver-debugging" id="id4">Etapes pour activer le debug Mapserver</a><ul>
<li><a class="reference internal" href="#step-1-set-the-ms-errorfile-variable" id="id5">Etape 1: définir la variable MS_ERRORFILE</a></li>
<li><a class="reference internal" href="#step-2-set-the-debug-level" id="id6">Etape 2: définir le niveau de DEBUG</a></li>
<li><a class="reference internal" href="#step-3-turn-on-cpl-debug-optional" id="id7">Etape 3: activer CPL_DEBUG (optionnel)</a></li>
<li><a class="reference internal" href="#step-4-turn-on-proj-debug-optional" id="id8">Etape 4: activer PROJ_DEBUG (optionnel)</a></li>
<li><a class="reference internal" href="#step-5-test-your-mapfile" id="id9">Etape 5: tester votre Mapfile</a></li>
<li><a class="reference internal" href="#step-6-check-your-web-server-logs" id="id10">Etape 6: vérifier vos logs de serveur web</a></li>
<li><a class="reference internal" href="#step-7-verify-your-application-settings" id="id11">Etape 7: vérifier les paramétrages de votre application</a></li>
</ul>
</li>
<li><a class="reference internal" href="#debugging-mapserver-using-compiler-debugging-tools" id="id12">Debugger MapServer en utilisant les outils de débuggage du compilateur</a><ul>
<li><a class="reference internal" href="#running-mapserver-in-gdb-linux-unix" id="id13">Lancer Mapserver dans GDB (Linux/Unix)</a></li>
</ul>
</li>
<li><a class="reference internal" href="#debugging-older-versions-of-mapserver-before-5-0" id="id14">Debugger des anciennes versions de MapServer (avant la 5.0)</a></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="introduction">
<h2><a class="toc-backref" href="#table-of-contents">Introduction</a><a class="headerlink" href="#introduction" title="Lien permanent vers ce titre">¶</a></h2>
<p>Quand vous développez une application pour Internet, vous rencontrerez inévitablement parmi les problèmes cerains liés à votre environnement. Le but de ce guide est de vous assister dans la localisation du problème avec votre application MapServer.</p>
<div class="section" id="links-to-related-information">
<h3><a class="toc-backref" href="#table-of-contents">Liens vers les informations associées</a><a class="headerlink" href="#links-to-related-information" title="Lien permanent vers ce titre">¶</a></h3>
<ul class="simple">
<li><p class="first"><a class="reference internal" href="../development/rfc/ms-rfc-28.html#rfc28"><span>RFC 28: Redesign des mechanismes de sortie des LOG/DEBUG</span></a></p>
</li>
<li><p class="first"><a class="reference internal" href="../errors.html#errors"><span>Erreurs MapServer</span></a></p>
</li>
</ul>
</div>
</div>
<div class="section" id="steps-to-enable-mapserver-debugging">
<h2><a class="toc-backref" href="#table-of-contents">Etapes pour activer le debug Mapserver</a><a class="headerlink" href="#steps-to-enable-mapserver-debugging" title="Lien permanent vers ce titre">¶</a></h2>
<p>A partir de la version de MapServer 5.0, vous êtes capables de contrôler les niveaux d&#8217;information de debug/log retournés par MapServer, et aussi contrôler l&#8217;emplacement du fichier de log en sortie.</p>
<p>En termes techniques, il y a plusieurs appels à msDebug() à différents endroits dans le code de MapServer qui génère une information qui peut s&#8217;avérer utile pour optimiser et débugger des applications.</p>
<div class="section" id="step-1-set-the-ms-errorfile-variable">
<span id="index-1"></span><h3><a class="toc-backref" href="#table-of-contents">Etape 1: définir la variable MS_ERRORFILE</a><a class="headerlink" href="#step-1-set-the-ms-errorfile-variable" title="Lien permanent vers ce titre">¶</a></h3>
<p>La variable <strong>MS_ERRORFILE</strong> est utilisée pour spécifier la sortie des messages de debug de MapServer. Vous pouvez passer les valeurs suivantes à <strong>MS_ERRORFILE</strong> :</p>
<dl class="docutils">
<dt><strong>[nom_de_fichier]</strong></dt>
<dd><p class="first">Chemin complet et nom d&#8217;un fichier de log pour récupérer les messages de debug de Mapserver. N&#8217;importe quelle extension de fichier peut-être utilisée mais <em>.log</em> ou <em>.txt</em> sont recommandés.  Le fichier sera créé si il n&#8217;existe pas déjà.</p>
<p class="last">A partir de MapServer 6.0, un nom de fichier avec un chemin relatif peut être passé par la directive CONFIG MS_ERRORFILE, et dans ce cas, le nom du fichier est relatif à l&#8217;emplacement du mapfile. Notez que définir MS_ERRORFILE via une variable d&#8217;environnement nécessite toujours un chemin absolu étant donné qu&#8217;il n&#8217;y a pas de mapfile pour définir un chemin relatif.</p>
</dd>
<dt><strong>stderr</strong></dt>
<dd><p class="first last">Utiliser ceci pour envoyer des messages de debug MapServer au fichier de log du serveur web (c&#8217;est à dire &#8220;standard error&#8221;).  Si vous utilisez Apache, vos messages de debug seront placés dans le fichier <em>error_log</em> de Apache.  Si vous utilisez Microsoft IIS,  vos messages de debug seront envoyées à <em>stdout</em> (c&#8217;est à dire le navigateur), ainsi son utilisation est déconseillée. Avec IIS, il est recommandé de renvoyer la sortie directe vers un fichier à la place.</p>
</dd>
<dt><strong>stdout</strong></dt>
<dd><p class="first last">Utiliser ceci pour envoyer les messages de debug Mapserver vers la sortie standard (c&#8217;est à dire le navigateur) combiné avec le reste de la sortie de Mapserver.</p>
</dd>
<dt><strong>windowsdebug</strong></dt>
<dd><p class="first last">Utilisez ceci pour envoyer des messages de debug MapServer à l&#8217;API OutputDebugString de Windows, permettant l&#8217;utilisation de programmes externes comme debugview de SysInternals pour afficher la sortie de debug.</p>
</dd>
</dl>
<div class="section" id="through-the-mapfile">
<h4>Via le Mapfile<a class="headerlink" href="#through-the-mapfile" title="Lien permanent vers ce titre">¶</a></h4>
<p>La manière recommandée de définir la variable <strong>MS_ERRORFILE</strong> est dans votre mapfile, à l&#8217;intérieur de l&#8217;objet <a class="reference internal" href="../mapfile/map.html#map"><span>MAP</span></a>, comme:</p>
<div class="highlight-mapfile"><div class="highlight"><pre><span class="k">MAP</span>
  <span class="p">...</span>
  <span class="k">CONFIG</span> <span class="s">&quot;MS_ERRORFILE&quot;</span> <span class="s">&quot;/ms4w/tmp/ms_error.txt&quot;</span>
  <span class="p">...</span>
  <span class="k">LAYER</span>
    <span class="p">...</span>
  <span class="k">END</span>
<span class="k">END</span>
</pre></div>
</div>
</div>
<div class="section" id="through-an-environment-variable">
<h4>Via une variable d&#8217;environnement<a class="headerlink" href="#through-an-environment-variable" title="Lien permanent vers ce titre">¶</a></h4>
<p>Vous pouvez aussi définir la variable <strong>MS_ERRORFILE</strong> comme variable d&#8217;environnement sur votre système.  Les utilisateurs Apache peuvent définir la variable d&#8217;environnement dans le fichier <em>httpd.conf</em> de Apache, comme ceci :</p>
<div class="highlight-python"><div class="highlight"><pre>SetEnv MS_ERRORFILE &quot;/ms4w/tmp/ms_error.txt&quot;
</pre></div>
</div>
<p>Les utilisateurs Windows peuvent de manière alternative définir la variable d&#8217;environnement via les Propriétés du système; mais assurez vous de définir la variable d&#8217;environnement dans SYSTEM.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Si les deux variables d&#8217;environnement <em>MS_ERRORFILE</em> et <em>CONFIG MS_ERRORFILE</em> sont définies,alors la directive CONFIG à la précédence.</p>
</div>
</div>
</div>
<div class="section" id="step-2-set-the-debug-level">
<span id="index-2"></span><h3><a class="toc-backref" href="#table-of-contents">Etape 2: définir le niveau de DEBUG</a><a class="headerlink" href="#step-2-set-the-debug-level" title="Lien permanent vers ce titre">¶</a></h3>
<p>Vous pouvez récupérer divers types de de messages de debug en configurant le paramètre <em>DEBUG</em> dans le <a class="reference internal" href="../mapfile/index.html#mapfile"><span>Mapfile</span></a>.  Vous pouvez placer le paramètre <em>DEBUG</em> dans n&#8217;importe quel bloc LAYER dans le mapfile pour les informations de debug spécifiques aux couches, ou à la place, définissez le une seule fois dans l&#8217;objet MAP pour obtenir les informations  de debug générales. Utilisez la valeur du paramètre <em>DEBUG</em> pour définir le type d&#8217;information retournée, comme cela suit:</p>
<div class="section" id="debug-levels">
<h4>Niveaux de DEBUG<a class="headerlink" href="#debug-levels" title="Lien permanent vers ce titre">¶</a></h4>
<dl class="docutils">
<dt><strong>Niveau 0</strong></dt>
<dd><p class="first">Erreurs seulement (DEBUG OFF, ou DEBUG 0)</p>
<p class="last">Au niveau 0, seulement les appels msSetError() sont loggués au MS_ERRORFILE. Pas de sortie msDebug() du tout.  C&#8217;est le comportement par défaut et correspond au comportement original de MS_ERRORFILE dans MapServer 4.x</p>
</dd>
<dt><strong>Niveau 1</strong></dt>
<dd><p class="first">Erreurs et notifications (DEBUG ON, ou DEBUG 1)</p>
<p class="last">Le niveau 1 inclut toutes les sorties du niveau Level 0 avec les avertissements msDebug() à propos de des erreurs communes, des assertions échouées ou des situations d&#8217;erreur non-fatales (c&#8217;est à dire les valeurs manquantes ou invalides pour certains paramètres, les shapefiles manquants dans l&#8217;index de tuiles, les erreurs de délai depuis les serveurs distants WMS/WFS servers, etc.)</p>
</dd>
<dt><strong>Niveau 2</strong></dt>
<dd><p class="first">Optimisation de la carte (DEBUG 2)</p>
<p class="last">Le niveau 2 inclut toutes les sorties du niveau 1 avec les notifications et les informations de timing, utiles pour optimiser les mapfiles et les applications.  <em>C&#8217;est le niveau de debug minimal recommandé</em></p>
</dd>
<dt><strong>Niveau 3</strong></dt>
<dd><p class="first">Debug verbeux (DEBUG 3)</p>
<p class="last">Tout le niveau 2 avec quelques sorties de debug utiles pour diagnostiquer des problèmes comme les URLs de connexion WMS qui sont appelées, les appels de connexion aux bases de données, etc.</p>
</dd>
<dt><strong>Niveau 4</strong></dt>
<dd><p class="first">Debug très verbeux (DEBUG 4)</p>
<p class="last">Level 3 avec encore plus de détails...</p>
</dd>
<dt><strong>Niveau 5</strong></dt>
<dd><p class="first">Debug très très verbeux (DEBUG 5)</p>
<p class="last">Le niveau 4 plus toutes les sorties msDebug() qui pourraient être utiles plus aux développeurs qu&#8217;aux utilisateurs.</p>
</dd>
</dl>
</div>
<div class="section" id="mapfile-example-map-level-debug">
<h4>Exemple de Mapfile: Debug au niveau du bloc MAP<a class="headerlink" href="#mapfile-example-map-level-debug" title="Lien permanent vers ce titre">¶</a></h4>
<p>L&#8217;exemple suivant est la méthode recommandée pour définir le paramètre <em>DEBUG</em>  au niveau du bloc MAP:</p>
<div class="highlight-mapfile"><div class="highlight"><pre><span class="k">MAP</span>
  <span class="p">...</span>
  <span class="k">CONFIG</span> <span class="s">&quot;MS_ERRORFILE&quot;</span> <span class="s">&quot;/ms4w/tmp/ms_error.txt&quot;</span>
  <span class="k">DEBUG</span> <span class="mi">5</span>
  <span class="p">...</span>
  <span class="k">LAYER</span>
    <span class="p">...</span>
  <span class="k">END</span>
<span class="k">END</span>
</pre></div>
</div>
</div>
<div class="section" id="mapfile-example-layer-level-debug">
<span id="index-3"></span><h4>Exemple de Mapfile: Debug au niveau du bloc LAYER<a class="headerlink" href="#mapfile-example-layer-level-debug" title="Lien permanent vers ce titre">¶</a></h4>
<p>L&#8217;exemple suivant est la méthode recommandée pour définir le paramètre <em>DEBUG</em> pour une couche:</p>
<div class="highlight-mapfile"><div class="highlight"><pre><span class="k">MAP</span>
  <span class="p">...</span>
  <span class="k">CONFIG</span> <span class="s">&quot;MS_ERRORFILE&quot;</span> <span class="s">&quot;/ms4w/tmp/ms_error.txt&quot;</span>
  <span class="p">...</span>
  <span class="k">LAYER</span>
    <span class="k">DEBUG</span> <span class="mi">5</span>
    <span class="p">...</span>
  <span class="k">END</span>
<span class="k">END</span>
</pre></div>
</div>
</div>
<div class="section" id="the-ms-debuglevel-environment-variable">
<span id="index-4"></span><h4>La variable d&#8217;environnement MS_DEBUGLEVEL<a class="headerlink" href="#the-ms-debuglevel-environment-variable" title="Lien permanent vers ce titre">¶</a></h4>
<p>Au lieu de définir le niveau de <em>DEBUG</em> dans chacun de vos mapfiles, vous pouvez aussi définir le niveau de manière globale en utilisant la variable d&#8217;environnement <em>MS_DEBUGLEVEL</em>.</p>
<p>Quand elle est définie, cette valeur est utilisée comme la valeur de debug par défaut pour tous les objets MAP et LAYER quand ils sont chargés par le parseur de mapfile. Cette option définit aussi le niveau de debug pour n&#8217;importe quel appel msDebug() effectué en dehors du contexte d&#8217;un objet MAP ou LAYER, par exemple, pour des instructions de debug relative à l&#8217;initialisation avant qu&#8217;un mapfile soit chargé. Si une valeur <cite>DEBUG</cite> est spécifiée aussi dans le mapfile au niveau d&#8217;un objet MAP ou LAYER alors la valeur locale (dans le mapfile) a la précédence sur la valeur provenant de la variable d&#8217;environnement.</p>
<p>Les utilisateurs Apache peuvent définir la variable d&#8217;environnement dans le fichier <em>httpd.conf</em> Apache, comme ceci :</p>
<div class="highlight-python"><div class="highlight"><pre>SetEnv MS_DEBUGLEVEL 5
</pre></div>
</div>
<p>Les utilisateurs Windows peuvent de manière alternative définir la variable d&#8217;environnement via les Propriétés du système; mais assurez vous de définir la variable d&#8217;environnement dans SYSTEM.</p>
</div>
</div>
<div class="section" id="step-3-turn-on-cpl-debug-optional">
<span id="index-5"></span><h3><a class="toc-backref" href="#table-of-contents">Etape 3: activer CPL_DEBUG (optionnel)</a><a class="headerlink" href="#step-3-turn-on-cpl-debug-optional" title="Lien permanent vers ce titre">¶</a></h3>
<p>MapServer repose sur la bibliothèque <a class="reference external" href="http://www.gdal.org/">GDAL</a> pour accéder à la plupart des types de données, alors vous pouvez avoir l&#8217;idée d&#8217;activer le debugging GDAL, pour éventuellement récupérer plus d&#8217;information sur comment GDAL accède à vos fichiers. Cela peut être très utile lors de problèmes d&#8217;accès à des fichiers raster ou des tables PostGIS. Vous pouvez activer cette option GDAL en réglant la variable <strong>CPL_DEBUG</strong> dans votre mapfile, dans l&#8217;objet <a class="reference internal" href="../mapfile/map.html#map"><span>MAP</span></a> de cette manière:</p>
<div class="highlight-mapfile"><div class="highlight"><pre><span class="k">MAP</span>
  <span class="p">...</span>
  <span class="k">CONFIG</span> <span class="s">&quot;CPL_DEBUG&quot;</span> <span class="s">&quot;ON&quot;</span>
  <span class="p">...</span>
  <span class="k">LAYER</span>
    <span class="p">...</span>
  <span class="k">END</span>
<span class="k">END</span>
</pre></div>
</div>
</div>
<div class="section" id="step-4-turn-on-proj-debug-optional">
<span id="index-6"></span><h3><a class="toc-backref" href="#table-of-contents">Etape 4: activer PROJ_DEBUG (optionnel)</a><a class="headerlink" href="#step-4-turn-on-proj-debug-optional" title="Lien permanent vers ce titre">¶</a></h3>
<p>MapServer repose sur la bibliothèque <a class="reference external" href="http://trac.osgeo.org/proj/">PROJ.4</a> pour la gestion des projections, vous pouvez donc avoir envie d&#8217;activer le debugging de PROJ pour récupérer plus d&#8217;information directement de la bibliothèque PROJ. Vous pouvez activer cette option en réglant la variable <strong>PROJ_DEBUG</strong> dans votre fichier .map, au sein de l&#8217;objet <a class="reference internal" href="../mapfile/map.html#map"><span>MAP</span></a>, ainsi :</p>
<div class="highlight-mapfile"><div class="highlight"><pre><span class="k">MAP</span>
  <span class="p">...</span>
  <span class="k">CONFIG</span> <span class="s">&quot;PROJ_DEBUG&quot;</span> <span class="s">&quot;ON&quot;</span>
  <span class="p">...</span>
  <span class="k">LAYER</span>
    <span class="p">...</span>
  <span class="k">END</span>
<span class="k">END</span>
</pre></div>
</div>
</div>
<div class="section" id="step-5-test-your-mapfile">
<h3><a class="toc-backref" href="#table-of-contents">Etape 5: tester votre Mapfile</a><a class="headerlink" href="#step-5-test-your-mapfile" title="Lien permanent vers ce titre">¶</a></h3>
<p>Une fois défini <em>MS_ERRORFILE</em> et le niveau de <em>DEBUG</em> dans votre mapfile, vous devriez maintenant tester votre mapfile et lire le fichier de log généré.</p>
<div class="section" id="using-shp2img">
<span id="index-7"></span><h4>Utiliser shp2img<a class="headerlink" href="#using-shp2img" title="Lien permanent vers ce titre">¶</a></h4>
<p>The recommended way to test your mapfile is to use the MapServer
commandline utility <a class="reference internal" href="../utilities/shp2img.html#shp2img"><span>shp2img</span></a>, to verify that your mapfile
creates a valid map image. <a class="reference internal" href="../utilities/shp2img.html#shp2img"><span>shp2img</span></a> should be included in your
MapServer installation (<a class="reference external" href="http://www.ms4w.com">MS4W</a> users
need to execute <em>setenv.bat</em> before using the utility).</p>
<p>Vous pouvez configurer le niveau de <em>DEBUG</em> en passant les paramètres suivant à la ligne de commande <a class="reference internal" href="../utilities/shp2img.html#shp2img"><span>shp2img</span></a> :</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Si vous avez déjà défini <em>MS_ERRORFILE</em> dans votre mapfile, vous devez commenter ceci dans le but d&#8217;utiliser ces options de <a class="reference internal" href="../utilities/shp2img.html#shp2img"><span>shp2img</span></a></p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Lorsque vous utilisez <a class="reference internal" href="../utilities/shp2img.html#shp2img"><span>shp2img</span></a> pour débuguer, le paramètre STATUS de votre couche doit être à ON ou à DEFAULT. Si ce paramètre est définie à OFF, vous devez passer le nom de la couche dans la commande <a class="reference internal" href="../utilities/shp2img.html#shp2img"><span>shp2img</span></a> en utilisant la syntaxe &#8220;<code class="docutils literal"><span class="pre">-l</span> <span class="pre">layername</span></code>&#8221;.</p>
</div>
<div class="section" id="all-debug">
<h5>-all_debug<a class="headerlink" href="#all-debug" title="Lien permanent vers ce titre">¶</a></h5>
<p>Utiliser cette configuration pour définir le niveau de debug pour l&#8217;objet MAP et toutes les couches. <em>C&#8217;est la manière recommandée de procéder</em>.</p>
<div class="highlight-python"><div class="highlight"><pre>shp2img -m spain.map -o test.png -all_debug 5

  msLoadMap(): 0.002s
  msDrawMap(): Layer 0 (spain provinces), 0.012s
  msDrawRasterLayerLow(orthophoto): entering.
  msDrawGDAL(): src=0,0,3540,2430, dst=188,48,1,1
  source raster PL (-793.394,-1712.627) for dst PL (188,48).
  msDrawGDAL(): red,green,blue,alpha bands = 1,2,3,0
  msDrawMap(): Layer 1 (orthophoto), 0.150s
  msDrawMap(): Layer 2 (urban areas), 0.004s
  msDrawMap(): Layer 3 (species at risk), 0.008s
  msDrawMap(): Layer 4 (populated places), 1.319s
  msDrawMap(): Drawing Label Cache, 0.014s
  msDrawMap() total time: 1.513s
  msSaveImage() total time: 0.039s
  msFreeMap(): freeing map at 0218C1A8.
  freeLayer(): freeing layer at 0218F5E0.
  freeLayer(): freeing layer at 030C33A0.
  freeLayer(): freeing layer at 030C3BC8.
  freeLayer(): freeing layer at 030C4948.
  freeLayer(): freeing layer at 030C7678.
  shp2img total time: 1.567s
</pre></div>
</div>
</div>
<div class="section" id="map-debug">
<h5>-map_debug<a class="headerlink" href="#map-debug" title="Lien permanent vers ce titre">¶</a></h5>
<p>Utiliser cette configuration pour définir le niveau de debug pour l&#8217;objet MAP uniquement.</p>
<div class="highlight-python"><div class="highlight"><pre>shp2img -m spain.map -o test.png -map_debug 5

  msDrawMap(): Layer 0 (spain provinces), 0.012s
  msDrawRasterLayerLow(orthophoto): entering.
  msDrawMap(): Layer 1 (orthophoto), 0.144s
  msDrawMap(): Layer 2 (urban areas), 0.004s
  msDrawMap(): Layer 3 (species at risk), 0.008s
  msDrawMap(): Layer 4 (populated places), 1.323s
  msDrawMap(): Drawing Label Cache, 0.013s
  msDrawMap() total time: 1.511s
  msSaveImage() total time: 0.039s
  msFreeMap(): freeing map at 0205C1A8.
</pre></div>
</div>
</div>
<div class="section" id="layer-debug">
<h5>-layer_debug<a class="headerlink" href="#layer-debug" title="Lien permanent vers ce titre">¶</a></h5>
<p>Utiliser cette configuration pour définir le niveau de debug pour un seul objet LAYER.</p>
<div class="highlight-python"><div class="highlight"><pre>shp2img -m spain.map -o test.png -layer_debug orthophoto 5

  msDrawRasterLayerLow(orthophoto): entering.
  msDrawGDAL(): src=0,0,3540,2430, dst=188,48,1,1
  source raster PL (-793.394,-1712.627) for dst PL (188,48).
  msDrawGDAL(): red,green,blue,alpha bands = 1,2,3,0
  msDrawMap(): Layer 1 (orthophoto), 0.151s
  freeLayer(): freeing layer at 02F23390.
</pre></div>
</div>
</div>
<div class="section" id="set-cpl-debug">
<h5>Définir CPL_DEBUG<a class="headerlink" href="#set-cpl-debug" title="Lien permanent vers ce titre">¶</a></h5>
<p>Dans la ligne de commande, exécuter ce qui suit</p>
<div class="highlight-python"><div class="highlight"><pre>set CPL_DEBUG=ON

shp2img -m spain.map -o test.png -layer_debug orthophoto 5

  msDrawRasterLayerLow(orthophoto): entering.
  GDAL: GDALOpen(D:\ms4w\apps\spain\map/.\../data/ov172068_200904_c100u50x75c24n.jpg, this=0
  4059840) succeeds as JPEG.
  msDrawGDAL(): src=0,0,3540,2430, dst=188,48,1,1
  source raster PL (-793.394,-1712.627) for dst PL (188,48).
  msDrawGDAL(): red,green,blue,alpha bands = 1,2,3,0
  GDAL: GDALDefaultOverviews::OverviewScan()
  msDrawMap(): Layer 1 (orthophoto), 0.155s
  freeLayer(): freeing layer at 03113390.
  GDAL: GDALDeregister_GTiff() called.
</pre></div>
</div>
</div>
<div class="section" id="reading-errors-returned-by-shp2img">
<h5>Lire les erreurs retournées par shp2img<a class="headerlink" href="#reading-errors-returned-by-shp2img" title="Lien permanent vers ce titre">¶</a></h5>
<p>S&#8217;il y a un problème avec votre mapfile, <a class="reference internal" href="../utilities/shp2img.html#shp2img"><span>shp2img</span></a> devrait retourner le  numéro de ligne dans votre mapfile qui cause le problème. Ce qui suit indique qu&#8217;il y a un soucis à la ligne 85 de mon mapfile :</p>
<div class="highlight-python"><div class="highlight"><pre>getSymbol(): Symbol definition error. Parsing error near (truetype2):(line 85)
</pre></div>
</div>
<p>Si vous utilisez des <a class="reference internal" href="../mapfile/include.html#include"><span>INCLUDE</span></a> dans vos mapfiles, il sera parfois plus difficile d&#8217;identifier le numéro de ligne, mais la plupart du temps, le numéro de ligne est utile.</p>
</div>
</div>
<div class="section" id="using-mapserv-cgi">
<h4>Utiliser le programme CGI mapserv<a class="headerlink" href="#using-mapserv-cgi" title="Lien permanent vers ce titre">¶</a></h4>
<p>Une autre manière pratique pour tester votre mapfile est d&#8217;appeler l&#8217;exécutable CGI mapserv par <a class="reference internal" href="../cgi/mapserv.html#mapserv"><span>la ligne de commande</span></a>, comme ce qui suit :</p>
<div class="highlight-python"><div class="highlight"><pre>mapserv -nh &quot;QUERY_STRING=map=/ms4w/apps/spain/map/spain.map&amp;mode=map&quot;
</pre></div>
</div>
</div>
<div class="section" id="on-missing-data">
<span id="index-8"></span><h4>ON_MISSING_DATA<a class="headerlink" href="#on-missing-data" title="Lien permanent vers ce titre">¶</a></h4>
<p>Si vous utilisez des tuiles indexées pour accéder à vos données, vous devez aussi considérer les paramètres de configuration ajoutés dans MapServer 5.4 qui vous permettent d&#8217;indiquer à MapServer comment traiter les données manquantes dans les tuiles indexées. Regardez le réglage <em>ON_MISSING_DATA</em> du paramètre <em>CONFIG</em> dans l&#8217;objet <a class="reference internal" href="../mapfile/map.html#map"><span>MAP</span></a> pour plus d&#8217;info.</p>
<div class="admonition hint">
<p class="first admonition-title">Indice</p>
<p class="last">Vous pouvez vérifier les attributs dans un index de tuiles (tileindex) en exécutant la commande &#8220;<em>ogrinfo -al</em>&#8221; sur votre fichier de données</p>
</div>
</div>
</div>
<div class="section" id="step-6-check-your-web-server-logs">
<h3><a class="toc-backref" href="#table-of-contents">Etape 6: vérifier vos logs de serveur web</a><a class="headerlink" href="#step-6-check-your-web-server-logs" title="Lien permanent vers ce titre">¶</a></h3>
<p>Une fois que vous avez vérifié qu&#8217;il n&#8217;y a pas de problèmes avec votre mapfile, vous devez ensuite vérifier les fichiers de log du serveur Web qui apporteront des informations vous permettant de vous rapprocher du problème.</p>
<div class="section" id="apache">
<h4>Apache<a class="headerlink" href="#apache" title="Lien permanent vers ce titre">¶</a></h4>
<p>Les utilisateurs Unix trouveront les fichiers <em>error_log</em> de Apache dans un chemin similaire à :</p>
<div class="highlight-python"><div class="highlight"><pre>/var/log/apache2/
</pre></div>
</div>
<p>Les utilisateurs Windows trouveront habituellement les fichiers de log Apache dans un chemin similaire à :</p>
<div class="highlight-python"><div class="highlight"><pre>C:\Program Files\Apache Group\Apache2\logs
</pre></div>
</div>
<p>MapServer for Windows (<a class="reference external" href="http://www.ms4w.com">MS4W</a>) users
will find Apache&#8217;s log files at:</p>
<div class="highlight-python"><div class="highlight"><pre>\ms4w\Apache\logs
</pre></div>
</div>
</div>
<div class="section" id="microsoft-iis">
<h4>Microsoft IIS<a class="headerlink" href="#microsoft-iis" title="Lien permanent vers ce titre">¶</a></h4>
<p>Les fichiers de log IIS log peuvent retrouvés par:</p>
<ol class="arabic">
<li><p class="first">Allez à Démarrer -&gt; Panneau de configuration -&gt; Outils d&#8217;administration</p>
</li>
<li><p class="first">Ouvrir le gestionnaire de &#8220;Internet Information Services (IIS)&#8221;</p>
</li>
<li><p class="first">Trouver votre site web dans l&#8217;arborescence sur la gauche.</p>
</li>
<li><p class="first">Faire un clic-droit dessus et choisir Propriétés.</p>
</li>
<li><p class="first">Sous l&#8217;onglet &#8220;Site web&#8221; vous verrez une option vers le bas précisant &#8220;Active Log Format&#8221;. Cliquez sur le bouton Propriétés.</p>
<blockquote>
<div><img alt="../_images/iis-debug.png" src="../_images/iis-debug.png" />
</div></blockquote>
</li>
<li><p class="first">En bas de l&#8217;onglet Propriétés Générales, vous verrez une boîte qui contient le répertoire du fichier de log et le nom du fichier de log. Le chemin complet du log comprend le répertoire du fichier de log plus la première partie du nom du fichier de log, par exemple</p>
<div class="highlight-python"><div class="highlight"><pre>C:\WINDOWS\system32\LogFiles\W3SVC1\ex100507.log
</pre></div>
</div>
</li>
</ol>
<p>Vous pouvez aussi cocher le paramètre logs de visualisation des événements Windows, qui est localisé ici :</p>
<ol class="arabic simple">
<li><p class="first">Allez à Démarrer -&gt; Panneau de configuration -&gt; Outils d&#8217;administration</p>
</li>
<li><p class="first">Gestion de l&#8217;ordinateur</p>
</li>
<li><p class="first">Visualiseur d&#8217;événement</p>
</li>
</ol>
<div class="admonition warning">
<p class="first admonition-title">Avertissement</p>
<p>Comme dit précédemment, dans IIS la sortie de débug <em>stderr</em> de MapServer est renvoyé vers le client au lieu d&#8217;être dirigé vers les logs du serveur Web, assurez vous donc de loguer la sortie vers un fichier, en utilisant :</p>
<div class="last highlight-python"><div class="highlight"><pre>CONFIG &quot;MS_ERRORFILE&quot; &quot;/ms4w/tmp/ms_error.txt&quot;
</pre></div>
</div>
</div>
</div>
<div class="section" id="cgi-error-the-specified-cgi-application-misbehaved-by-not-returning-a-complete-set-of-http-headers">
<h4>Erreur CGI - L&#8217;application CGI définie ne fonctionne pas correctement et ne retourne pas les en-têtes HTTP complètes.<a class="headerlink" href="#cgi-error-the-specified-cgi-application-misbehaved-by-not-returning-a-complete-set-of-http-headers" title="Lien permanent vers ce titre">¶</a></h4>
<p>Cette erreur est souvent causée par l&#8217;absence de fichiers DLL. Vous devriez essayer d&#8217;exécuter la ligne de commande &#8220;<em>mapserv -v</em>, afin de s&#8217;assurer que MapServer charge correctement.</p>
</div>
</div>
<div class="section" id="step-7-verify-your-application-settings">
<h3><a class="toc-backref" href="#table-of-contents">Etape 7: vérifier les paramétrages de votre application</a><a class="headerlink" href="#step-7-verify-your-application-settings" title="Lien permanent vers ce titre">¶</a></h3>
<p>Si vous avez vérifié que MapServer crée une image valide de la carte via <a class="reference internal" href="../utilities/shp2img.html#shp2img"><span>shp2img</span></a>, vous avez vérifié vos logs du serveur Web, alors vous devez porter votre attention sur des problèmes potentiels de mauvaises configurations de votre application.  &#8220;Application&#8221; signifie ici comment vous affichez vos images de cartes sur la page Web, tel que <a class="reference external" href="http://www.openlayers.org">OpenLayers</a>.</p>
<div class="section" id="php-mapscript">
<span id="index-9"></span><h4>PHP MapScript<a class="headerlink" href="#php-mapscript" title="Lien permanent vers ce titre">¶</a></h4>
<p>Si vous utilisez PHP MapScript dans votre application, voici plusieurs notes pour le débogage :</p>
<p>1. Make sure your <em>php.ini</em> file is configured to show all errors, by
setting:</p>
<blockquote>
<div><div class="highlight-python"><div class="highlight"><pre><span class="n">display_errors</span> <span class="o">=</span> <span class="n">On</span>
</pre></div>
</div>
</div></blockquote>
<ol class="arabic" start="2">
<li><p class="first">Pour activer le débogage en PHP MapScript, si vous utilisez MapServer 5.6.0 ou plus récent, assurez-vous de définir <em>ZEND_DEBUG</em> dans les sources de PHP.</p>
<p>Si vous utilisez MapServer &lt; 5.6.0, alors:</p>
<ul>
<li><p class="first">ouvrir le fichier <em>/mapscript/php3/php_mapscript.c</em></p>
</li>
<li><p class="first">changer ce qui suit:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="c">#define ZEND_DEBUG 0</span>

<span class="n">to</span>

<span class="c">#define ZEND_DEBUG 1</span>
</pre></div>
</div>
</li>
</ul>
</li>
</ol>
</div>
</div>
</div>
<div class="section" id="debugging-mapserver-using-compiler-debugging-tools">
<h2><a class="toc-backref" href="#table-of-contents">Debugger MapServer en utilisant les outils de débuggage du compilateur</a><a class="headerlink" href="#debugging-mapserver-using-compiler-debugging-tools" title="Lien permanent vers ce titre">¶</a></h2>
<div class="section" id="running-mapserver-in-gdb-linux-unix">
<span id="index-10"></span><h3><a class="toc-backref" href="#table-of-contents">Lancer Mapserver dans GDB (Linux/Unix)</a><a class="headerlink" href="#running-mapserver-in-gdb-linux-unix" title="Lien permanent vers ce titre">¶</a></h3>
<p><em>Auteur de la section : Frank Warmerdam</em></p>
<div class="section" id="building-with-symbolic-debug-info">
<h4>Compiler avec les informations de debug symboliques<a class="headerlink" href="#building-with-symbolic-debug-info" title="Lien permanent vers ce titre">¶</a></h4>
<p>Il n&#8217;est pas strictement nécessaire de compiler MapServer avec le debuggage activé afin d&#8217;utiliser <a class="reference external" href="http://www.gnu.org/software/gdb/">GDB</a> sous Linux, mais cela s&#8217;assure que des informations plus compréhensibles sont reportées au sein de GDB.  Pour activer les informations symboliques complètes, utilisez l&#8217;option de configure <em>&#8211;enable-debug</em>.  Notez que l&#8217;utilisation de cette option désactive l&#8217;optimisation et qu&#8217;elle ne doit pas être activée normalement utilisée pour les compilations de production où la performance est importante.</p>
<div class="highlight-python"><div class="highlight"><pre>./configure --enable-debug &lt;other switches&gt;
make clean
make
</pre></div>
</div>
</div>
<div class="section" id="running-in-the-debugger">
<h4>Lancer dans le debugger<a class="headerlink" href="#running-in-the-debugger" title="Lien permanent vers ce titre">¶</a></h4>
<p>Pour exécuter mapserv ou bien shp2img, passez le nom de l&#8217;exécutable en tant qu&#8217;argument à la commande &#8220;gdb&#8221;. Si il n&#8217;est pas dans le chemin, vous devrez fournir le chemin complet vers l&#8217;exécutable.</p>
<div class="highlight-python"><div class="highlight"><pre>gdb shp2img
GNU gdb (GDB) 7.0-ubuntu
Copyright (C) 2009 Free Software Foundation, Inc.
License GPLv3+: GNU GPL version 3 or later &lt;http://gnu.org/licenses/gpl.html&gt;
This is free software: you are free to change and redistribute it.
There is NO WARRANTY, to the extent permitted by law.  Type &quot;show copying&quot;
and &quot;show warranty&quot; for details.
This GDB was configured as &quot;x86_64-linux-gnu&quot;.
For bug reporting instructions, please see:
&lt;http://www.gnu.org/software/gdb/bugs/&gt;...
Reading symbols from /wrk/home/warmerda/mapserver/shp2img...done.
(gdb)
</pre></div>
</div>
<p>Une fois que vous être dans l&#8217;invite  &#8220;(gdb)&#8221;, vous pouvez lancer la commande avec les arguments que vous auriez normalement passés à l&#8217;exécutable mapserv ou shp2img.</p>
<div class="highlight-python"><div class="highlight"><pre>(gdb) run -m test.map -o out.png
Starting program: /wrk/home/warmerda/mapserver/shp2img -m test.map -o out.png
[Thread debugging using libthread_db enabled]

Program received signal SIGSEGV, Segmentation fault.
0x00007ffff67594a2 in JP2KAKDataset::Identify (poOpenInfo=0x0)
  at jp2kakdataset.cpp:962
962         if( poOpenInfo-&gt;nHeaderBytes &lt; (int) sizeof(jp2_header) )
Current language:  auto
The current source language is &quot;auto; currently c++&quot;.
(gdb)
</pre></div>
</div>
<p>Si le programme plante, vous obtiendrez généralement un rapport comme celui ci-dessus indiquant la fonction qui occasionne le crash et des informations minimalistes sur la cause. Il est souvent utile de demander une traceback pour voir quels fonctions amènent à la fonction qui a plantée. Pour cela, utilisez la commande &#8220;where&#8221;.</p>
<div class="highlight-python"><div class="highlight"><pre>(gdb) where
#0  0x00007ffff67594a2 in JP2KAKDataset::Identify (poOpenInfo=0x0)
    at jp2kakdataset.cpp:962
#1  0x00007ffff67596d2 in JP2KAKDataset::Open (poOpenInfo=0x7fffffffb6f0)
    at jp2kakdataset.cpp:1025
#2  0x00007ffff6913339 in GDALOpen (
    pszFilename=0x83aa60 &quot;/home/warmerda/data/jpeg2000/spaceimaging_16bit_rgb.jp
2&quot;, eAccess=GA_ReadOnly) at gdaldataset.cpp:2170
#3  0x00007ffff69136bf in GDALOpenShared (
    pszFilename=0x83aa60 &quot;/home/warmerda/data/jpeg2000/spaceimaging_16bit_rgb.jp
2&quot;, eAccess=GA_ReadOnly) at gdaldataset.cpp:2282
#4  0x0000000000563c2d in msDrawRasterLayerLow (map=0x81e450, layer=0x839140,
    image=0x83af90, rb=0x0) at mapraster.c:566
#5  0x000000000048928f in msDrawRasterLayer (map=0x81e450, layer=0x839140,
    image=0x83af90) at mapdraw.c:1390
#6  0x0000000000486a48 in msDrawLayer (map=0x81e450, layer=0x839140,
    image=0x83af90) at mapdraw.c:806
#7  0x00000000004858fd in msDrawMap (map=0x81e450, querymap=0) at mapdraw.c:459
#8  0x0000000000446410 in main (argc=5, argv=0x7fffffffd918) at shp2img.c:300
(gdb)
</pre></div>
</div>
<p>It may also be helpful to examine variables used in the line where the
crash occurred.  Use the print command for this.</p>
<div class="highlight-python"><div class="highlight"><pre>(gdb) print poOpenInfo
$1 = (GDALOpenInfo *) 0x0
</pre></div>
</div>
<p>Dans ce cas nous voyons que le programme a planté parce que poOpenInfo est NULL (zéro). Inclure une traceback comme ci-dessus dans un rapport de bug peut aider les développeurs à s&#8217;approcher du problème plus rapidement, spécialement si c&#8217;est un problème difficile à reproduire pour les développeurs.</p>
</div>
</div>
</div>
<div class="section" id="debugging-older-versions-of-mapserver-before-5-0">
<h2><a class="toc-backref" href="#table-of-contents">Debugger des anciennes versions de MapServer (avant la 5.0)</a><a class="headerlink" href="#debugging-older-versions-of-mapserver-before-5-0" title="Lien permanent vers ce titre">¶</a></h2>
<ol class="arabic">
<li><p class="first">Assurez-vous que Mapserver est compilé en mode debug (sous unix, c&#8217;est activé par <em>./configure &#8211;enable-debug</em>).</p>
<p>Vous pouvez vérifier que votre compilation a été faite en mode debug, en exécutant ce qui suit dans la ligne de commande (regardez si vous avez &#8220;DEBUG=MSDEBUG&#8221;):</p>
<div class="highlight-python"><div class="highlight"><pre>./mapserv -v

  MapServer version 4.10.2 OUTPUT=GIF OUTPUT=PNG OUTPUT=WBMP
  OUTPUT=SVG SUPPORTS=PROJ SUPPORTS=FREETYPE SUPPORTS=WMS_SERVER
  SUPPORTS=WMS_CLIENT SUPPORTS=WCS_SERVER SUPPORTS=THREADS SUPPORTS=GEOS
  INPUT=EPPL7 INPUT=POSTGIS INPUT=OGR INPUT=GDAL INPUT=SHAPEFILE
  DEBUG=MSDEBUG
</pre></div>
</div>
</li>
<li><p class="first">Définir la variable <em>MS_ERRORFILE</em> dans votre mapfile, à l&#8217;intérieur de l&#8217;objet <a class="reference internal" href="../mapfile/map.html#map"><span>MAP</span></a>, comme ceci :</p>
<div class="highlight-mapfile"><div class="highlight"><pre><span class="k">MAP</span>
  <span class="p">...</span>
  <span class="k">CONFIG</span> <span class="s">&quot;MS_ERRORFILE&quot;</span> <span class="s">&quot;/ms4w/tmp/ms_error.txt&quot;</span>
  <span class="p">...</span>
  <span class="k">LAYER</span>
    <span class="p">...</span>
  <span class="k">END</span>
<span class="k">END</span>
</pre></div>
</div>
</li>
<li><p class="first">Si vous n&#8217;utilisez pas la variable <em>MS_ERRORFILE</em>,vous pouvez utiliser le paramètre LOG dans l&#8217;objet <a class="reference internal" href="../mapfile/web.html#web"><span>WEB</span></a> de votre mapfile, comme ceci :</p>
<div class="highlight-mapfile"><div class="highlight"><pre> <span class="k">MAP</span>
  <span class="p">...</span>
  <span class="k">WEB</span>
    <span class="k">LOG</span> <span class="s">&quot;mapserver.log&quot;</span>
  <span class="k">END</span>
  <span class="p">...</span>
  <span class="k">LAYER</span>
    <span class="p">...</span>
  <span class="k">END</span>
<span class="k">END</span>
</pre></div>
</div>
</li>
<li><p class="first">Spécifier <em>DEBUG ON</em> dans votre objet MAP object, ou dans vos objets LAYER, comme ceci :</p>
<div class="highlight-mapfile"><div class="highlight"><pre> <span class="k">MAP</span>
  <span class="p">...</span>
  <span class="k">WEB</span>
    <span class="k">LOG</span> <span class="s">&quot;mapserver.log&quot;</span>
  <span class="k">END</span>
  <span class="k">DEBUG</span> <span class="nb">ON</span>
  <span class="p">...</span>
  <span class="k">LAYER</span>
    <span class="p">...</span>
  <span class="k">END</span>
<span class="k">END</span>
</pre></div>
</div>
</li>
<li><p class="first">Notez que seules les erreurs seront écrites dans les fichiers de log ; toutes les sorties DEBUG iront vers la sortie standard, dans le cas d&#8217;Apache c&#8217;est le fichier d&#8217;<em>error_log</em> d&#8217;Apache. Si vous utilisez Microsoft IIS, la sortie debug est envoyé vers <em>stdout</em> (i.e. le navigateur), assurez vous de supprimer le paramètre <em>DEBUG ON</em> si vous utilisez IIS sur un serveur de production.</p>
</li>
</ol>
<p>.</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper"><h3>Navigation</h3>
<p>
<a href="../about.html" title="About">About</a><br>
<a href="../products.html" title="Products">Products</a><br>
<a href="../community/index.html" title="Community">Community</a><br>
<a href="../development/index.html" title="Development">Development</a><br>
<a href="../download.html" title="Downloads">Downloads</a><br>
<a href="../documentation.html" title="Documentation">Documentation</a><br>
<a href="../faq.html" title="FAQ">FAQ</a>
</p>
  <h3>Current Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Debugger Mapserver</a><ul>
<li><a class="reference internal" href="#introduction">Introduction</a><ul>
<li><a class="reference internal" href="#links-to-related-information">Liens vers les informations associées</a></li>
</ul>
</li>
<li><a class="reference internal" href="#steps-to-enable-mapserver-debugging">Etapes pour activer le debug Mapserver</a><ul>
<li><a class="reference internal" href="#step-1-set-the-ms-errorfile-variable">Etape 1: définir la variable MS_ERRORFILE</a><ul>
<li><a class="reference internal" href="#through-the-mapfile">Via le Mapfile</a></li>
<li><a class="reference internal" href="#through-an-environment-variable">Via une variable d&#8217;environnement</a></li>
</ul>
</li>
<li><a class="reference internal" href="#step-2-set-the-debug-level">Etape 2: définir le niveau de DEBUG</a><ul>
<li><a class="reference internal" href="#debug-levels">Niveaux de DEBUG</a></li>
<li><a class="reference internal" href="#mapfile-example-map-level-debug">Exemple de Mapfile: Debug au niveau du bloc MAP</a></li>
<li><a class="reference internal" href="#mapfile-example-layer-level-debug">Exemple de Mapfile: Debug au niveau du bloc LAYER</a></li>
<li><a class="reference internal" href="#the-ms-debuglevel-environment-variable">La variable d&#8217;environnement MS_DEBUGLEVEL</a></li>
</ul>
</li>
<li><a class="reference internal" href="#step-3-turn-on-cpl-debug-optional">Etape 3: activer CPL_DEBUG (optionnel)</a></li>
<li><a class="reference internal" href="#step-4-turn-on-proj-debug-optional">Etape 4: activer PROJ_DEBUG (optionnel)</a></li>
<li><a class="reference internal" href="#step-5-test-your-mapfile">Etape 5: tester votre Mapfile</a><ul>
<li><a class="reference internal" href="#using-shp2img">Utiliser shp2img</a><ul>
<li><a class="reference internal" href="#all-debug">-all_debug</a></li>
<li><a class="reference internal" href="#map-debug">-map_debug</a></li>
<li><a class="reference internal" href="#layer-debug">-layer_debug</a></li>
<li><a class="reference internal" href="#set-cpl-debug">Définir CPL_DEBUG</a></li>
<li><a class="reference internal" href="#reading-errors-returned-by-shp2img">Lire les erreurs retournées par shp2img</a></li>
</ul>
</li>
<li><a class="reference internal" href="#using-mapserv-cgi">Utiliser le programme CGI mapserv</a></li>
<li><a class="reference internal" href="#on-missing-data">ON_MISSING_DATA</a></li>
</ul>
</li>
<li><a class="reference internal" href="#step-6-check-your-web-server-logs">Etape 6: vérifier vos logs de serveur web</a><ul>
<li><a class="reference internal" href="#apache">Apache</a></li>
<li><a class="reference internal" href="#microsoft-iis">Microsoft IIS</a></li>
<li><a class="reference internal" href="#cgi-error-the-specified-cgi-application-misbehaved-by-not-returning-a-complete-set-of-http-headers">Erreur CGI - L&#8217;application CGI définie ne fonctionne pas correctement et ne retourne pas les en-têtes HTTP complètes.</a></li>
</ul>
</li>
<li><a class="reference internal" href="#step-7-verify-your-application-settings">Etape 7: vérifier les paramétrages de votre application</a><ul>
<li><a class="reference internal" href="#php-mapscript">PHP MapScript</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#debugging-mapserver-using-compiler-debugging-tools">Debugger MapServer en utilisant les outils de débuggage du compilateur</a><ul>
<li><a class="reference internal" href="#running-mapserver-in-gdb-linux-unix">Lancer Mapserver dans GDB (Linux/Unix)</a><ul>
<li><a class="reference internal" href="#building-with-symbolic-debug-info">Compiler avec les informations de debug symboliques</a></li>
<li><a class="reference internal" href="#running-in-the-debugger">Lancer dans le debugger</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#debugging-older-versions-of-mapserver-before-5-0">Debugger des anciennes versions de MapServer (avant la 5.0)</a></li>
</ul>
</li>
</ul>

<div id="searchbox" style="display: none" role="search">
  <h3>Recherche rapide</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Saisissez un mot clef ou un nom de module, classe ou fonction.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2016, Open Source Geospatial Foundation.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.3.1</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.6</a>
      
    </div>

    

    
  </body>
</html>