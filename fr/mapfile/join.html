<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>JOIN &mdash; MapServer 7.0.0 documentation</title>
    
    <link rel="stylesheet" href="../_static/sphinx.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '7.0.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/translations.js"></script>
    <link rel="shortcut icon" href="../_static/mapserver.ico"/>
    <link rel="author" title="À propos de ces documents" href="../about.html" />
    <link rel="copyright" title="Copyright" href="../copyright.html" />
    <link rel="top" title="MapServer 7.0.0 documentation" href="../index.html" />
    <link rel="up" title="Mapfile" href="index.html" />
    <link rel="next" title="LABEL" href="label.html" />
    <link rel="prev" title="INCLUDE" href="include.html" />
   
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9">

  </head>
  <body role="document">

<table width="100%" style="width: 100%; background-color: white;">
  <tr>
    <td rowspan="2" style="padding: 10px 0px 10px 10px;">
      <a href="../index.html" title="Home"><img src="../_static/banner.png" alt="MapServer banner" border="0" /></a>
    </td>
    <td style="padding: 10px 10px 0px 0px; text-align: right; vertical-align: top;">
      <a href="../index.html" title="Home">Home</a> |
      <a href="../products.html" title="Products (MapServer core, MapCache, TinyOWS">Products</a> |
      <a href="https://github.com/mapserver/mapserver/issues/" title="Issue Tracker (MapServer core)">Issue Tracker</a> |
      <a href="../faq.html" title="FAQ">FAQ</a> |
      <a href="../download.html" title="Download">Download </a>
    </td>
  </tr>
  <tr>
    <td style="padding: 0px 10px 0px 0px; text-align: right; vertical-align: bottom;">
        
          
            <a href="../../mapfile/join.html"><img src="../_static/flagicons/en.png" alt="en" title="en" border="0" /></a>
          
        
        
          
            <a href="../../ar/mapfile/join.html"><img src="../_static/flagicons/ar.png" alt="ar" title="ar" border="0" /></a>
          
        
        
          
            <a href="../../de/mapfile/join.html"><img src="../_static/flagicons/de.png" alt="de" title="de" border="0" /></a>
          
        
        
          
            <a href="../../el/mapfile/join.html"><img src="../_static/flagicons/el.png" alt="el" title="el" border="0" /></a>
          
        
        
          
            <a href="../../es/mapfile/join.html"><img src="../_static/flagicons/es.png" alt="es" title="es" border="0" /></a>
          
        
        <img src="../_static/flagicons/fr.png" alt="fr" title="fr" border="0" width="18px" height="13px"/>
        
          
            <a href="../../id/mapfile/join.html"><img src="../_static/flagicons/id.png" alt="id" title="id" border="0" /></a>
          
        
        
          
            <a href="../../it/mapfile/join.html"><img src="../_static/flagicons/it.png" alt="it" title="it" border="0" /></a>
          
        
        
          
            <a href="../../ja/mapfile/join.html"><img src="../_static/flagicons/ja.png" alt="ja" title="ja" border="0" /></a>
          
        
        
          
            <a href="../../nl_NL/mapfile/join.html"><img src="../_static/flagicons/nl_NL.png" alt="nl_NL" title="nl_NL" border="0" /></a>
          
        
        
          
            <a href="../../pl/mapfile/join.html"><img src="../_static/flagicons/pl.png" alt="pl" title="pl" border="0" /></a>
          
        
        
          
            <a href="../../ru/mapfile/join.html"><img src="../_static/flagicons/ru.png" alt="ru" title="ru" border="0" /></a>
          
        
        
          
            <a href="../../sq/mapfile/join.html"><img src="../_static/flagicons/sq.png" alt="sq" title="sq" border="0" /></a>
          
        
        
          
            <a href="../../tr/mapfile/join.html"><img src="../_static/flagicons/tr.png" alt="tr" title="tr" border="0" /></a>
          
        
        
          
            <a href="../../uk/mapfile/join.html"><img src="../_static/flagicons/uk.png" alt="uk" title="uk" border="0" /></a>
          
        

    </td>
  </tr>
</table>


  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="join">
<span id="index-0"></span><span id="id1"></span><h1>JOIN<a class="headerlink" href="#join" title="Lien permanent vers ce titre">¶</a></h1>
<div class="section" id="description">
<span id="index-1"></span><h2>Description<a class="headerlink" href="#description" title="Lien permanent vers ce titre">¶</a></h2>
<p>Les jointures sont définies au sein d&#8217;un objet LAYER. Il est important de comprendre que les jointures sont <em>UNIQUEMENT</em> disponibles une fois qu&#8217;une requête a été exécutée. Vous ne pouvez pas utiliser les jointures pour modifier l&#8217;apparence d&#8217;une carte. L&#8217;objectif principal est de permettre de lier une table à des données codées (par exemple 1 =&gt; Forêt) mais d&#8217;autres utilisations sont possibles.</p>
</div>
<div class="section" id="supported-formats">
<span id="index-2"></span><h2>Formats gérés<a class="headerlink" href="#supported-formats" title="Lien permanent vers ce titre">¶</a></h2>
<ul class="simple">
<li><p class="first">fichiers DBF/XBase</p>
</li>
<li><p class="first">CSV (Fichier texte délimité par des virgules)</p>
</li>
<li><p class="first">tables PostgreSQL et PostGIS</p>
</li>
<li><p class="first">tables MySQL</p>
</li>
</ul>
</div>
<div class="section" id="mapfile-parameters">
<h2>Paramètres du Mapfile<a class="headerlink" href="#mapfile-parameters" title="Lien permanent vers ce titre">¶</a></h2>
<dl class="docutils" id="index-3">
<dt>CONNECTION [string]</dt>
<dd><p class="first">Paramètres nécessaires pour effectuer la jointure sur une base de données (non nécessaires pour des jointures vers DBF ou CSV). L&#8217;exemple suivant est pour <a class="reference internal" href="../input/vector/postgis.html#input-postgis"><span>PostgreSQL</span></a> :</p>
<div class="last highlight-mapfile"><div class="highlight"><pre><span class="k">CONNECTION</span> <span class="s">&quot;host=127.0.0.1 port=5432 user=pg password=pg dbname=somename&quot;</span>
<span class="k">CONNECTIONTYPE</span> <span class="nb">POSTGRESQL</span>
</pre></div>
</div>
</dd>
</dl>
<span class="target" id="index-4"></span><span class="target" id="index-5"></span><span class="target" id="index-6"></span><dl class="docutils" id="index-7">
<dt>CONNECTIONTYPE [csv|mysql|postgresql]</dt>
<dd><p class="first last">Type de connexion (non nécessaire pour des jointures vers DBF). Pour PostgreSQL, utiliser <cite>postgresql</cite>, pour CSV, <cite>csv</cite>, pour MySQL, <cite>mysql</cite>.:</p>
</dd>
</dl>
<dl class="docutils" id="index-8">
<dt>FOOTER [filename]</dt>
<dd><p class="first last">Modèle (&#8220;template&#8221;) à utiliser <em>après</em> qu&#8217;un jeu de résultats de couche ait été envoyé. En d&#8217;autres termes, l&#8217;en-tête HTML sera affiché après le contenu du modèle <cite>TEMPLATE</cite> HTML.</p>
</dd>
</dl>
<dl class="docutils" id="index-9">
<dt>FROM [column]</dt>
<dd>Join column in the dataset.  This is case sensitive.</dd>
</dl>
<dl class="docutils" id="index-10">
<dt>HEADER [filename]</dt>
<dd><p class="first last">Modèle (&#8220;template&#8221;) à utiliser <em>avant</em> qu&#8217;un jeu de résultats de couche ait été envoyé. En d&#8217;autres termes, l&#8217;en-tête HTML sera affiché après le contenu du modèle <cite>TEMPLATE</cite> HTML.</p>
</dd>
</dl>
<dl class="docutils" id="index-11">
<dt>NAME [string]</dt>
<dd><p class="first last">Nom unique de cette jointure. Obligatoire.</p>
</dd>
</dl>
<dl class="docutils" id="index-12">
<dt>TABLE [filename|tablename]</dt>
<dd><p class="first last">Pour les jointures basées sur des fichiers, c&#8217;est le nom du XBase ou du fichier délimité (relatif à l&#8217;emplacement du mapfile) à joindre avec (TO). Pour le support de PostgreSQL, c&#8217;est le nom de la table PostgreSQL à joindre avec (TO)</p>
</dd>
</dl>
<dl class="docutils" id="index-13">
<dt>TEMPLATE [filename]</dt>
<dd>Template to use with one-to-many joins. The template is processed
once for each record and can only contain substitutions for
columns in the joined table.  Refer to the column in the joined
table in your template like [joinname_columnname], where joinname
is the NAME specified for the JOIN object.</dd>
</dl>
<dl class="docutils" id="index-14">
<dt>TO [column]</dt>
<dd>Join column in the table to be joined. This is case sensitive.</dd>
</dl>
<dl class="docutils" id="index-15">
<dt>TYPE [ONE-TO-ONE|ONE-TO-MANY]</dt>
<dd><p class="first last">Le type de jointure. Par défaut 1-1.</p>
</dd>
</dl>
</div>
<div class="section" id="example-1-join-from-shape-dataset-to-dbf-file">
<h2>Exemple 1 : jointure d&#8217;un fichier SHP et d&#8217;un fichier DBF<a class="headerlink" href="#example-1-join-from-shape-dataset-to-dbf-file" title="Lien permanent vers ce titre">¶</a></h2>
<div class="section" id="mapfile-layer">
<h3>Couche de Mapfile<a class="headerlink" href="#mapfile-layer" title="Lien permanent vers ce titre">¶</a></h3>
<div class="highlight-mapfile"><div class="highlight"><pre><span class="k">LAYER</span>
  <span class="k">NAME</span> <span class="s">&quot;prov_bound&quot;</span>
  <span class="k">TYPE</span> <span class="nb">POLYGON</span>
  <span class="k">STATUS</span> <span class="nb">DEFAULT</span>
  <span class="k">DATA</span> <span class="s">&quot;prov.shp&quot;</span>
  <span class="k">CLASS</span>
    <span class="k">NAME</span> <span class="s">&quot;Province&quot;</span>
    <span class="k">STYLE</span>
      <span class="k">OUTLINECOLOR</span> <span class="mi">120</span> <span class="mi">120</span> <span class="mi">120</span>
      <span class="k">COLOR</span> <span class="mi">255</span> <span class="mi">255</span> <span class="mi">0</span>
    <span class="k">END</span>
  <span class="k">END</span>
  <span class="k">TEMPLATE</span> <span class="s">&quot;../htdocs/cgi-query-templates/prov.html&quot;</span>
  <span class="k">HEADER</span> <span class="s">&quot;../htdocs/cgi-query-templates/prov-header.html&quot;</span>
  <span class="k">FOOTER</span> <span class="s">&quot;../htdocs/cgi-query-templates/footer.html&quot;</span>
  <span class="k">JOIN</span>
    <span class="k">NAME</span> <span class="s">&quot;test&quot;</span>
    <span class="k">TABLE</span> <span class="s">&quot;../data/lookup.dbf&quot;</span>
    <span class="k">FROM</span> <span class="s">&quot;ID&quot;</span>
    <span class="k">TO</span> <span class="s">&quot;IDENT&quot;</span>
    <span class="k">TYPE</span> <span class="nb">ONE-TO-ONE</span>
  <span class="k">END</span>
<span class="k">END</span> <span class="c"># layer</span>
</pre></div>
</div>
</div>
<div class="section" id="ogrinfo">
<h3>Ogrinfo<a class="headerlink" href="#ogrinfo" title="Lien permanent vers ce titre">¶</a></h3>
<div class="highlight-python"><div class="highlight"><pre>&gt;ogrinfo lookup.dbf lookup -summary
INFO: Open of `lookup.dbf&#39;
using driver `ESRI Shapefile&#39; successful.

Layer name: lookup
Geometry: None
Feature Count: 12
Layer SRS WKT:
(unknown)
IDENT: Integer (2.0)
VAL: Integer (2.0)
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre>&gt;ogrinfo prov.shp prov -summary
INFO: Open of `prov.shp&#39;
using driver `ESRI Shapefile&#39; successful.

Layer name: prov
Geometry: Polygon
Feature Count: 12
Extent: (-2340603.750000, -719746.062500) - (3009430.500000, 3836605.250000)
Layer SRS WKT:
(unknown)
NAME: String (30.0)
ID: Integer (2.0)
</pre></div>
</div>
</div>
<div class="section" id="template">
<h3>Modèle<a class="headerlink" href="#template" title="Lien permanent vers ce titre">¶</a></h3>
<div class="highlight-python"><div class="highlight"><pre>&lt;tr bgcolor=&quot;#EFEFEF&quot;&gt;
  &lt;td align=&quot;left&quot;&gt;[NAME]&lt;/td&gt;
  &lt;td align=&quot;left&quot;&gt;[test_VAL]&lt;/td&gt;
&lt;/tr&gt;
</pre></div>
</div>
</div>
</div>
<div class="section" id="example-2-join-from-shape-dataset-to-postgresql-table">
<h2>Exemple 2 : jointure d&#8217;un fichier SHP et d&#8217;une table PostgreSQL<a class="headerlink" href="#example-2-join-from-shape-dataset-to-postgresql-table" title="Lien permanent vers ce titre">¶</a></h2>
<div class="section" id="id2">
<h3>Couche de Mapfile<a class="headerlink" href="#id2" title="Lien permanent vers ce titre">¶</a></h3>
<div class="highlight-mapfile"><div class="highlight"><pre><span class="k">LAYER</span>
  <span class="k">NAME</span> <span class="s">&quot;prov_bound&quot;</span>
  <span class="k">TYPE</span> <span class="nb">POLYGON</span>
  <span class="k">STATUS</span> <span class="nb">DEFAULT</span>
  <span class="k">DATA</span> <span class="s">&quot;prov.shp&quot;</span>
  <span class="k">CLASS</span>
    <span class="k">NAME</span> <span class="s">&quot;Province&quot;</span>
    <span class="k">STYLE</span>
      <span class="k">OUTLINECOLOR</span> <span class="mi">120</span> <span class="mi">120</span> <span class="mi">120</span>
      <span class="k">COLOR</span> <span class="mi">255</span> <span class="mi">255</span> <span class="mi">0</span>
    <span class="k">END</span>
  <span class="k">END</span>
  <span class="k">TOLERANCE</span> <span class="mi">20</span>
  <span class="k">TEMPLATE</span> <span class="s">&quot;../htdocs/cgi-query-templates/prov.html&quot;</span>
  <span class="k">HEADER</span> <span class="s">&quot;../htdocs/cgi-query-templates/prov-header.html&quot;</span>
  <span class="k">FOOTER</span> <span class="s">&quot;../htdocs/cgi-query-templates/footer.html&quot;</span>
  <span class="k">JOIN</span>
    <span class="k">NAME</span> <span class="s">&quot;test&quot;</span>
    <span class="k">CONNECTION</span> <span class="s">&quot;host=127.0.0.1 port=5432 user=pg password=pg dbname=join&quot;</span>
    <span class="k">CONNECTIONTYPE</span> <span class="nb">postgresql</span>
    <span class="k">TABLE</span> <span class="s">&quot;lookup&quot;</span>
    <span class="k">FROM</span> <span class="s">&quot;ID&quot;</span>
    <span class="k">TO</span> <span class="s">&quot;ident&quot;</span>
    <span class="k">TYPE</span> <span class="nb">ONE-TO-ONE</span>
  <span class="k">END</span>
<span class="k">END</span> <span class="c"># layer</span>
</pre></div>
</div>
</div>
<div class="section" id="id3">
<h3>Ogrinfo<a class="headerlink" href="#id3" title="Lien permanent vers ce titre">¶</a></h3>
<div class="highlight-python"><div class="highlight"><pre>&gt;ogrinfo -ro PG:&quot;host=127.0.0.1 port=5432 user=pg password=pg dbname=join&quot;
             lookup -summary
INFO: Open of `PG:host=127.0.0.1 port=5432 user=pg password=pg dbname=join&#39;
using driver `PostgreSQL&#39; successful.

Layer name: lookup
Geometry: Unknown (any)
Feature Count: 12
Layer SRS WKT:
(unknown)
ident: Integer (0.0)
val: Integer (0.0)
</pre></div>
</div>
</div>
<div class="section" id="id4">
<h3>Modèle<a class="headerlink" href="#id4" title="Lien permanent vers ce titre">¶</a></h3>
<div class="highlight-python"><div class="highlight"><pre>&lt;tr bgcolor=&quot;#EFEFEF&quot;&gt;
  &lt;td align=&quot;left&quot;&gt;[NAME]&lt;/td&gt;
  &lt;td align=&quot;left&quot;&gt;[test_val]&lt;/td&gt;
&lt;/tr&gt;
</pre></div>
</div>
</div>
</div>
<div class="section" id="example-3-join-from-shape-dataset-to-csv-file">
<h2>Exemple 3 : jointure d&#8217;un fichier SHP et d&#8217;un fichier CSV<a class="headerlink" href="#example-3-join-from-shape-dataset-to-csv-file" title="Lien permanent vers ce titre">¶</a></h2>
<div class="section" id="id5">
<h3>Couche de Mapfile<a class="headerlink" href="#id5" title="Lien permanent vers ce titre">¶</a></h3>
<div class="highlight-mapfile"><div class="highlight"><pre><span class="k">LAYER</span>
  <span class="k">NAME</span> <span class="s">&quot;prov_bound&quot;</span>
  <span class="k">TYPE</span> <span class="nb">POLYGON</span>
  <span class="k">STATUS</span> <span class="nb">DEFAULT</span>
  <span class="k">DATA</span> <span class="s">&quot;prov.shp&quot;</span>
  <span class="k">CLASS</span>
    <span class="k">NAME</span> <span class="s">&quot;Province&quot;</span>
    <span class="k">STYLE</span>
      <span class="k">OUTLINECOLOR</span> <span class="mi">120</span> <span class="mi">120</span> <span class="mi">120</span>
      <span class="k">COLOR</span> <span class="mi">255</span> <span class="mi">255</span> <span class="mi">0</span>
    <span class="k">END</span>
  <span class="k">END</span>
  <span class="k">TOLERANCE</span> <span class="mi">20</span>
  <span class="k">TEMPLATE</span> <span class="s">&quot;../htdocs/cgi-query-templates/prov.html&quot;</span>
  <span class="k">HEADER</span> <span class="s">&quot;../htdocs/cgi-query-templates/prov-header.html&quot;</span>
  <span class="k">FOOTER</span> <span class="s">&quot;../htdocs/cgi-query-templates/footer.html&quot;</span>
  <span class="k">JOIN</span>
    <span class="k">NAME</span> <span class="s">&quot;test&quot;</span>
    <span class="k">CONNECTIONTYPE</span> <span class="nb">CSV</span>
    <span class="k">TABLE</span> <span class="s">&quot;../data/lookup.csv&quot;</span>
    <span class="k">FROM</span> <span class="s">&quot;ID&quot;</span>
    <span class="c">#TO &quot;IDENT&quot;  # see note below</span>
    <span class="k">TO</span> <span class="s">&quot;1&quot;</span>       <span class="c"># see note below</span>
    <span class="k">TYPE</span> <span class="nb">ONE-TO-ONE</span>
  <span class="k">END</span>
<span class="k">END</span> <span class="c"># layer</span>
</pre></div>
</div>
</div>
<div class="section" id="csv-file-structure">
<h3>Structure du fichier CSV<a class="headerlink" href="#csv-file-structure" title="Lien permanent vers ce titre">¶</a></h3>
<div class="highlight-python"><div class="highlight"><pre><span class="s">&quot;IDENT&quot;</span><span class="p">,</span><span class="s">&quot;VAL&quot;</span>
<span class="mi">1</span><span class="p">,</span><span class="mi">12</span>
<span class="mi">2</span><span class="p">,</span><span class="mi">11</span>
<span class="mi">3</span><span class="p">,</span><span class="mi">10</span>
<span class="mi">4</span><span class="p">,</span><span class="mi">9</span>
<span class="mi">5</span><span class="p">,</span><span class="mi">8</span>
<span class="mi">6</span><span class="p">,</span><span class="mi">7</span>
<span class="mi">7</span><span class="p">,</span><span class="mi">6</span>
<span class="mi">8</span><span class="p">,</span><span class="mi">5</span>
<span class="mi">9</span><span class="p">,</span><span class="mi">4</span>
<span class="mi">10</span><span class="p">,</span><span class="mi">3</span>
<span class="mi">11</span><span class="p">,</span><span class="mi">2</span>
<span class="mi">12</span><span class="p">,</span><span class="mi">1</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Le pilote CSV ne supporte pas pour le moment la lecture des noms de colonnes de la première ligne. Il utilise juste les index (1, 2, ... n) pour référencer les colonnes. C&#8217;est tout à fait possible de laisser les noms de colonnes dans la première ligne comme il y a peu de chances qu&#8217;elles correspondent à quoi que ce soit. Typiquement, vous verrez quelque chose du genre TO &#8220;1&#8221; dans le bloc JOIN. Alors dans le template, vous utiliserez [name_1], [name_2], etc...</p>
</div>
</div>
<div class="section" id="id6">
<h3>Ogrinfo<a class="headerlink" href="#id6" title="Lien permanent vers ce titre">¶</a></h3>
<div class="highlight-python"><div class="highlight"><pre>&gt;ogrinfo lookup.csv lookup -summary
INFO: Open of `lookup.csv&#39;
using driver `CSV&#39; successful.

Layer name: lookup
Geometry: None
Feature Count: 12
Layer SRS WKT:
(unknown)
IDENT: String (0.0)
VAL: String (0.0)
</pre></div>
</div>
</div>
<div class="section" id="template-prov-html">
<h3>Modèle (prov.html)<a class="headerlink" href="#template-prov-html" title="Lien permanent vers ce titre">¶</a></h3>
<p>Idéalement c&#8217;est ce à quoi le modèle devrait ressembler:</p>
<div class="highlight-python"><div class="highlight"><pre>&lt;!-- MapServer Template --&gt;
&lt;tr bgcolor=&quot;#EFEFEF&quot;&gt;
  &lt;td align=&quot;left&quot;&gt;[NAME]&lt;/td&gt;
  &lt;td align=&quot;left&quot;&gt;[test_VAL]&lt;/td&gt;
&lt;/tr&gt;
</pre></div>
</div>
<p>Mais comme les noms d&#8217;attributs ne sont pas supportés par les fichiers CSV (voir note ci-dessus), il faudra utiliser ce qui suit:</p>
<div class="highlight-python"><div class="highlight"><pre>&lt;!-- MapServer Template --&gt;
&lt;tr bgcolor=&quot;#EFEFEF&quot;&gt;
  &lt;td align=&quot;left&quot;&gt;[NAME]&lt;/td&gt;
  &lt;td align=&quot;left&quot;&gt;[test_2]&lt;/td&gt;
&lt;/tr&gt;
</pre></div>
</div>
</div>
</div>
<div class="section" id="example-4-join-from-shape-dataset-to-mysql">
<h2>Exemple 4 : jointure d&#8217;un fichier SHP avec une table MySQL<a class="headerlink" href="#example-4-join-from-shape-dataset-to-mysql" title="Lien permanent vers ce titre">¶</a></h2>
<div class="section" id="id7">
<h3>Couche de Mapfile<a class="headerlink" href="#id7" title="Lien permanent vers ce titre">¶</a></h3>
<div class="highlight-mapfile"><div class="highlight"><pre><span class="k">LAYER</span>
  <span class="k">NAME</span> <span class="s">&quot;prov_bound&quot;</span>
  <span class="k">TYPE</span> <span class="nb">POLYGON</span>
  <span class="k">STATUS</span> <span class="nb">DEFAULT</span>
  <span class="k">DATA</span> <span class="s">&quot;prov.shp&quot;</span>
  <span class="k">CLASS</span>
    <span class="k">NAME</span> <span class="s">&quot;Province&quot;</span>
    <span class="k">STYLE</span>
      <span class="k">OUTLINECOLOR</span> <span class="mi">120</span> <span class="mi">120</span> <span class="mi">120</span>
      <span class="k">COLOR</span> <span class="mi">255</span> <span class="mi">255</span> <span class="mi">0</span>
    <span class="k">END</span> <span class="c"># style</span>
  <span class="k">END</span> <span class="c"># class</span>
  <span class="k">TOLERANCE</span> <span class="mi">20</span>
  <span class="k">TEMPLATE</span> <span class="s">&quot;../htdocs/cgi-query-templates/prov.html&quot;</span>
  <span class="k">HEADER</span> <span class="s">&quot;../htdocs/cgi-query-templates/prov-header.html&quot;</span>
  <span class="k">FOOTER</span> <span class="s">&quot;../htdocs/cgi-query-templates/footer.html&quot;</span>
  <span class="k">JOIN</span>
    <span class="k">NAME</span> <span class="s">&quot;mysql-join&quot;</span>
    <span class="k">CONNECTIONTYPE</span> <span class="nb">MYSQL</span>
    <span class="k">CONNECTION</span> <span class="s">&#39;server:user:password:database&#39;</span>
    <span class="k">TABLE</span> <span class="s">&quot;mysql-tablename&quot;</span>
    <span class="k">FROM</span> <span class="s">&quot;ID&quot;</span>
    <span class="k">TO</span> <span class="s">&quot;mysql-column&quot;</span>
    <span class="k">TYPE</span> <span class="nb">ONE-TO-ONE</span>
  <span class="k">END</span> <span class="c"># join</span>
<span class="k">END</span> <span class="c"># layer</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="example-5-one-to-many-join">
<h2>Example 5: One-to-many join<a class="headerlink" href="#example-5-one-to-many-join" title="Lien permanent vers ce titre">¶</a></h2>
<p>In a join of type <cite>ONE-TO-MANY</cite>, the <cite>JOIN</cite> object needs to contain a
<cite>TEMPLATE</cite>.  This <cite>TEMPLATE</cite> is used for each matching record in the
join table.  Columns in the join table are referenced using
&lt;join_name&gt;_&lt;join_column_name&gt;.  Columns in the layer table are
referenced using &lt;column_name&gt;.</p>
<p>For a one-to-many join, the <cite>LAYER</cite> <cite>TEMPLATE</cite> file has to contain a
reference to the the <cite>JOIN</cite> object, as follows: [join_&lt;join_name&gt;].</p>
<p>In this example, it is assumed that the join table many.dbf contains
the columns MANYFIELD1 and MANYFIELD2 in addition to the join column
(IDENT).</p>
<p>Layer object:</p>
<div class="highlight-mapfile"><div class="highlight"><pre><span class="k">LAYER</span>
  <span class="k">NAME</span> <span class="s">&quot;joinonetomany&quot;</span>
  <span class="k">TYPE</span> <span class="nb">POLYGON</span>
  <span class="k">STATUS</span> <span class="nb">DEFAULT</span>
  <span class="k">DATA</span> <span class="s">&quot;prov.shp&quot;</span>
  <span class="k">CLASS</span>
    <span class="k">NAME</span> <span class="s">&quot;Province&quot;</span>
    <span class="k">STYLE</span>
      <span class="k">OUTLINECOLOR</span> <span class="mi">120</span> <span class="mi">120</span> <span class="mi">120</span>
      <span class="k">COLOR</span> <span class="mi">255</span> <span class="mi">255</span> <span class="mi">0</span>
    <span class="k">END</span> <span class="c"># style</span>
  <span class="k">END</span> <span class="c"># class</span>
  <span class="k">TEMPLATE</span> <span class="s">&quot;oneToMany.html&quot;</span>
  <span class="k">HEADER</span> <span class="s">&quot;oneToMany_header.html&quot;</span>
  <span class="k">FOOTER</span> <span class="s">&quot;oneToMany_footer.html&quot;</span>
  <span class="k">JOIN</span>
    <span class="k">NAME</span> <span class="s">&quot;onetomanytest&quot;</span>
    <span class="k">TABLE</span> <span class="s">&quot;many.dbf&quot;</span>
    <span class="k">FROM</span> <span class="s">&quot;ID&quot;</span>
    <span class="k">TO</span> <span class="s">&quot;IDENT&quot;</span>
    <span class="k">TYPE</span> <span class="nb">ONE-TO-MANY</span>
    <span class="k">TEMPLATE</span> <span class="s">&quot;oneToMany_join.html&quot;</span>
  <span class="k">END</span> <span class="c"># join</span>
<span class="k">END</span> <span class="c"># layer</span>
</pre></div>
</div>
<p>Template oneToMany_header.html:</p>
<div class="highlight-python"><div class="highlight"><pre>&lt;!-- Mapserver Template --&gt;
&lt;html&gt;
  &lt;head&gt;&lt;title&gt;One to Many Join&lt;/title&gt;&lt;/head&gt;
  &lt;body&gt;
    &lt;h1&gt;Mapserver output&lt;/h1&gt;
    &lt;table&gt;
</pre></div>
</div>
<p>Template oneToMany.html:</p>
<div class="highlight-python"><div class="highlight"><pre>&lt;!-- Mapserver Template --&gt;
      &lt;tr&gt;
        &lt;td&gt;&lt;strong&gt;[ID]&lt;/strong&gt;&lt;/td&gt;
        &lt;td&gt;&lt;table&gt;
[join_onetomanytest]
        &lt;/table&gt;&lt;/td&gt;
      &lt;/tr&gt;
</pre></div>
</div>
<p>Template oneToMany_join.html:</p>
<div class="highlight-python"><div class="highlight"><pre>&lt;!-- Mapserver Template --&gt;
          &lt;tr&gt;
            &lt;td&gt;[NAME]&lt;/td&gt;
            &lt;td&gt;[onetomanytest_MANYFIELD1]&lt;/td&gt;
            &lt;td&gt;[onetomanytest_MANYFIELD2]&lt;/td&gt;
          &lt;/tr&gt;
</pre></div>
</div>
<p>Template oneToMany_footer.html:</p>
<div class="highlight-python"><div class="highlight"><pre>&lt;!-- Mapserver Template --&gt;
    &lt;/table&gt;
  &lt;/body&gt;
&lt;html&gt;
</pre></div>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper"><h3>Navigation</h3>
<p>
<a href="../about.html" title="About">About</a><br>
<a href="../products.html" title="Products">Products</a><br>
<a href="../community/index.html" title="Community">Community</a><br>
<a href="../development/index.html" title="Development">Development</a><br>
<a href="../download.html" title="Downloads">Downloads</a><br>
<a href="../documentation.html" title="Documentation">Documentation</a><br>
<a href="../faq.html" title="FAQ">FAQ</a>
</p>
  <h3>Current Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">JOIN</a><ul>
<li><a class="reference internal" href="#description">Description</a></li>
<li><a class="reference internal" href="#supported-formats">Formats gérés</a></li>
<li><a class="reference internal" href="#mapfile-parameters">Paramètres du Mapfile</a></li>
<li><a class="reference internal" href="#example-1-join-from-shape-dataset-to-dbf-file">Exemple 1 : jointure d&#8217;un fichier SHP et d&#8217;un fichier DBF</a><ul>
<li><a class="reference internal" href="#mapfile-layer">Couche de Mapfile</a></li>
<li><a class="reference internal" href="#ogrinfo">Ogrinfo</a></li>
<li><a class="reference internal" href="#template">Modèle</a></li>
</ul>
</li>
<li><a class="reference internal" href="#example-2-join-from-shape-dataset-to-postgresql-table">Exemple 2 : jointure d&#8217;un fichier SHP et d&#8217;une table PostgreSQL</a><ul>
<li><a class="reference internal" href="#id2">Couche de Mapfile</a></li>
<li><a class="reference internal" href="#id3">Ogrinfo</a></li>
<li><a class="reference internal" href="#id4">Modèle</a></li>
</ul>
</li>
<li><a class="reference internal" href="#example-3-join-from-shape-dataset-to-csv-file">Exemple 3 : jointure d&#8217;un fichier SHP et d&#8217;un fichier CSV</a><ul>
<li><a class="reference internal" href="#id5">Couche de Mapfile</a></li>
<li><a class="reference internal" href="#csv-file-structure">Structure du fichier CSV</a></li>
<li><a class="reference internal" href="#id6">Ogrinfo</a></li>
<li><a class="reference internal" href="#template-prov-html">Modèle (prov.html)</a></li>
</ul>
</li>
<li><a class="reference internal" href="#example-4-join-from-shape-dataset-to-mysql">Exemple 4 : jointure d&#8217;un fichier SHP avec une table MySQL</a><ul>
<li><a class="reference internal" href="#id7">Couche de Mapfile</a></li>
</ul>
</li>
<li><a class="reference internal" href="#example-5-one-to-many-join">Example 5: One-to-many join</a></li>
</ul>
</li>
</ul>

<div id="searchbox" style="display: none" role="search">
  <h3>Recherche rapide</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Saisissez un mot clef ou un nom de module, classe ou fonction.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2016, Open Source Geospatial Foundation.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.3.1</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.6</a>
      
    </div>

    

    
  </body>
</html>