<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Serveur WMS &mdash; MapServer 7.0.0 documentation</title>
    
    <link rel="stylesheet" href="../_static/sphinx.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '7.0.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/translations.js"></script>
    <link rel="shortcut icon" href="../_static/mapserver.ico"/>
    <link rel="author" title="À propos de ces documents" href="../about.html" />
    <link rel="copyright" title="Copyright" href="../copyright.html" />
    <link rel="top" title="MapServer 7.0.0 documentation" href="../index.html" />
    <link rel="up" title="Gestion et configuration des standards OGC" href="index.html" />
    <link rel="next" title="Service de vue INSPIRE" href="inspire.html" />
    <link rel="prev" title="Support des spécifications OGC dans MapServer" href="ogc_support.html" />
   
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9">

  </head>
  <body role="document">

<table width="100%" style="width: 100%; background-color: white;">
  <tr>
    <td rowspan="2" style="padding: 10px 0px 10px 10px;">
      <a href="../index.html" title="Home"><img src="../_static/banner.png" alt="MapServer banner" border="0" /></a>
    </td>
    <td style="padding: 10px 10px 0px 0px; text-align: right; vertical-align: top;">
      <a href="../index.html" title="Home">Home</a> |
      <a href="../products.html" title="Products (MapServer core, MapCache, TinyOWS">Products</a> |
      <a href="https://github.com/mapserver/mapserver/issues/" title="Issue Tracker (MapServer core)">Issue Tracker</a> |
      <a href="../faq.html" title="FAQ">FAQ</a> |
      <a href="../download.html" title="Download">Download </a>
    </td>
  </tr>
  <tr>
    <td style="padding: 0px 10px 0px 0px; text-align: right; vertical-align: bottom;">
        
          
            <a href="../../ogc/wms_server.html"><img src="../_static/flagicons/en.png" alt="en" title="en" border="0" /></a>
          
        
        
          
            <a href="../../ar/ogc/wms_server.html"><img src="../_static/flagicons/ar.png" alt="ar" title="ar" border="0" /></a>
          
        
        
          
            <a href="../../de/ogc/wms_server.html"><img src="../_static/flagicons/de.png" alt="de" title="de" border="0" /></a>
          
        
        
          
            <a href="../../el/ogc/wms_server.html"><img src="../_static/flagicons/el.png" alt="el" title="el" border="0" /></a>
          
        
        
          
            <a href="../../es/ogc/wms_server.html"><img src="../_static/flagicons/es.png" alt="es" title="es" border="0" /></a>
          
        
        <img src="../_static/flagicons/fr.png" alt="fr" title="fr" border="0" width="18px" height="13px"/>
        
          
            <a href="../../id/ogc/wms_server.html"><img src="../_static/flagicons/id.png" alt="id" title="id" border="0" /></a>
          
        
        
          
            <a href="../../it/ogc/wms_server.html"><img src="../_static/flagicons/it.png" alt="it" title="it" border="0" /></a>
          
        
        
          
            <a href="../../ja/ogc/wms_server.html"><img src="../_static/flagicons/ja.png" alt="ja" title="ja" border="0" /></a>
          
        
        
          
            <a href="../../nl_NL/ogc/wms_server.html"><img src="../_static/flagicons/nl_NL.png" alt="nl_NL" title="nl_NL" border="0" /></a>
          
        
        
          
            <a href="../../pl/ogc/wms_server.html"><img src="../_static/flagicons/pl.png" alt="pl" title="pl" border="0" /></a>
          
        
        
          
            <a href="../../ru/ogc/wms_server.html"><img src="../_static/flagicons/ru.png" alt="ru" title="ru" border="0" /></a>
          
        
        
          
            <a href="../../sq/ogc/wms_server.html"><img src="../_static/flagicons/sq.png" alt="sq" title="sq" border="0" /></a>
          
        
        
          
            <a href="../../tr/ogc/wms_server.html"><img src="../_static/flagicons/tr.png" alt="tr" title="tr" border="0" /></a>
          
        
        
          
            <a href="../../uk/ogc/wms_server.html"><img src="../_static/flagicons/uk.png" alt="uk" title="uk" border="0" /></a>
          
        

    </td>
  </tr>
</table>


    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="Index général"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="inspire.html" title="Service de vue INSPIRE"
             accesskey="N">suivant</a> |</li>
        <li class="right" >
          <a href="ogc_support.html" title="Support des spécifications OGC dans MapServer"
             accesskey="P">précédent</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">Home</a> &raquo;</li>
          <li class="nav-item nav-item-1"><a href="../documentation.html" >Documentation de MapServer 7.0.0</a> &raquo;</li>
          <li class="nav-item nav-item-2"><a href="index.html" accesskey="U">Gestion et configuration des standards OGC</a> &raquo;</li> 
      </ul>
    </div>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="wms-server">
<span id="index-0"></span><span id="id1"></span><h1><a class="toc-backref" href="#table-of-contents">Serveur WMS</a><a class="headerlink" href="#wms-server" title="Lien permanent vers ce titre">¶</a></h1>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Author:</th><td class="field-body">Jeff McKenna</td>
</tr>
<tr class="field-even field"><th class="field-name">Contact:</th><td class="field-body">jmckenna at gatewaygeomatics.com</td>
</tr>
<tr class="field-odd field"><th class="field-name">Last Updated:</th><td class="field-body"><p class="first last">20-06-2013</p>
</td>
</tr>
</tbody>
</table>
<div class="contents topic" id="table-of-contents">
<p class="topic-title first">Table des matières</p>
<ul class="simple">
<li><a class="reference internal" href="#wms-server" id="id2">Serveur WMS</a><ul>
<li><a class="reference internal" href="#introduction" id="id3">Introduction</a></li>
<li><a class="reference internal" href="#setting-up-a-wms-server-using-mapserver" id="id4">Configurer un serveur WMS avec MapServer</a></li>
<li><a class="reference internal" href="#changing-the-online-resource-url" id="id5">Changer l&#8217;URL &#8220;Online Resource&#8221;</a></li>
<li><a class="reference internal" href="#wms-1-3-0-support" id="id6">Support WMS 1.3.0</a></li>
<li><a class="reference internal" href="#reference-section" id="id7">Section de référence</a></li>
<li><a class="reference internal" href="#faq-common-problems" id="id8">FAQ / Problèmes communs</a></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="introduction">
<h2><a class="toc-backref" href="#table-of-contents">Introduction</a><a class="headerlink" href="#introduction" title="Lien permanent vers ce titre">¶</a></h2>
<p>Un WMS (ou Web Map Server) permet l&#8217;utilisation de données provenant de nombreux serveurs différents, et rend aussi possible la création d&#8217;un réseau de serveurs cartographiques depuis lequel des clients peuvent construire des cartes personnalisées. La documentation suivante est basée sur la spécification <a class="reference external" href="http://portal.opengeospatial.org/files/?artifact_id=1081&amp;version=1&amp;format=pdf">Web Map Server Interfaces Implementation Specification v1.1.1</a>.de l&#8217;Open Geospatial Consortium (OGC)</p>
<p>MapServer v3.5 ou plus récent est requis pour implémenter les fonctionnalités du WMS. Au moment de l&#8217;écriture de ce document, MapServer supporte les versions de WMS suivantes: 1.0.0, 1.0.7, 1.1.0 (l&#8217;alias de 1.0.8), 1.1.1 et 1.3.0</p>
<p>Ce document assume que vous êtes déjà familier avec certains aspects de MapServer :</p>
<ul class="simple">
<li><p class="first">Développement d&#8217;application MapServer et configuration des fichiers .map.</p>
</li>
<li><p class="first">La familiarité avec la spécification WMS est un avantage. Un lien vers le document de spécification WMS est inclus dans la section &#8220;Informations liées au WMS&#8221;:</p>
</li>
</ul>
<div class="section" id="links-to-wms-related-information">
<h3>Liens vers les informations liées au WMS<a class="headerlink" href="#links-to-wms-related-information" title="Lien permanent vers ce titre">¶</a></h3>
<ul class="simple">
<li><p class="first"><a class="reference internal" href="wms_client.html#wms-client"><span>Guide du client WMS MapServer</span></a></p>
</li>
<li><p class="first"><a class="reference external" href="http://portal.opengeospatial.org/files/?artifact_id=1081&amp;version=1&amp;format=pdf">Spécification WMS 1.1.1</a></p>
</li>
<li><a class="reference external" href="http://portal.opengeospatial.org/files/?artifact_id=14416">WMS 1.3.0 specification</a></li>
<li><p class="first">Page d&#8217;accueil de l&#8217;<a class="reference external" href="http://www.opengeospatial.org/">Open Geospatial Consortium (OGC)</a></p>
</li>
<li><a class="reference external" href="http://www.intl-interfaces.com/cookbook/WMS/">WMS Cookbook</a></li>
<li><p class="first">Package <a class="reference external" href="http://mapserver.github.io/ms-ogc-workshop/">Workshop sur les Web Services OGC dans MapServer</a></p>
</li>
<li><p class="first"><a class="reference internal" href="sld.html#sld"><span>Guide des Styled Layer Descriptor (SLD) dans MapServer</span></a></p>
</li>
<li><p class="first"><a class="reference internal" href="wms_time.html#wms-time"><span>Guide du support du WMS Time dans MapServer</span></a></p>
</li>
</ul>
</div>
<div class="section" id="how-does-a-wms-work">
<h3>Comment un WMS fonctionne<a class="headerlink" href="#how-does-a-wms-work" title="Lien permanent vers ce titre">¶</a></h3>
<p>Les serveurs WMS interagissent avec leurs clients via le protocole HTTP. Dans le plupart des cas, un serveur WMS est un programme CGI. C&#8217;est aussi le cas avec Mapserver.</p>
<p>La spécification WMS définit un certain nombre de types de requêtes, et pour chacun de ces types un jeu de paramètres d&#8217;interrogations avec des comportements associés. Un serveur respectant la norme WMS doit être capable de gérer au moins les deux types de requêtes WMS suivants:</p>
<ol class="arabic simple">
<li><p class="first"><strong>GetCapabilities:</strong> retourne un document XML avec les informations de métadonnées du serveur cartographique web</p>
</li>
<li><p class="first"><strong>GetMap:</strong> renvoie une image d&#8217;un carte en fonction des besoins de l&#8217;utilisateur.</p>
</li>
</ol>
<p>Et supporte de manière optionnelle les types de requête suivant:</p>
<ol class="arabic simple">
<li><p class="first"><strong>GetFeatureInfo:</strong> renvoie des informations sur le ou les objet(s) géographique(s) en fonction de l&#8217;endroit de la requête sur la carte (du clic souris).  MapServer supporte 3 types de réponses à cette requête:</p>
<ul>
<li><p class="first">une sortie text/plain avec les informations attributaires.</p>
</li>
<li><p class="first">une sortie text/html en utilisant les templates d&#8217;interrogation de MapServer spécifiés dans le paramètre <a class="reference internal" href="../mapfile/class.html#class"><span>CLASS</span></a> du TEMPLATE le nom du fichier doit avoir une extension .html.  Le type MIME retourné par défaut par les templates CLASS est le text/html et peut être contrôlé en utilisant les métadonnées via &#8220;wms_feature_info_mime_type&#8221;</p>
</li>
<li><p class="first">application/vnd.ogc.gml, GML.1 ou GML pour les objets de type GML.</p>
</li>
</ul>
</li>
<li><p class="first"><strong>DescribeLayer:</strong> retourne une description XML de une ou plusieurs couches cartographiques. Pour l&#8217;exécuter:</p>
<ul>
<li><p class="first">pour les couches vecteur: pour avoir un retour valide, l&#8217;utilisateur doit initialiser la métadonnée wfs_onlineresource (ou ows_onlineresource) soit au niveau MAP soit au niveau LAYER (la métadonnée du niveau LAYER est celle utilisée si les deux sont renseignées) - pour les couches raster: la métadonnée est au niveau de wcs_onlineresource et suit la même logique que celle ci-dessus.</p>
</li>
</ul>
</li>
<li><p class="first"><strong>GetLegendGraphic:</strong> retourne une image de légende (icône) pour la couche demandée, avec la(les) étiquette(s). Plus d&#8217;informations sur cette requête peut être trouvée dans la section GetLegendGraphic plus loin dans ce document.</p>
</li>
</ol>
<p>En ce qui concerne MapServer précisément, c&#8217;est le programme CGI &#8220;mapserv&#8221; qui sait comment traiter les requêtes WMS. Ainsi, la mise en place d&#8217;un serveur WMS avec MapServer consiste à installer le programme CGI <a class="reference internal" href="../cgi/mapserv.html#mapserv"><span>mapserv</span></a> et à une mise en place d&#8217;un mapfile avec des métadonnées appropriées dedans. Cela est couvert dans le reste du document.</p>
</div>
</div>
<div class="section" id="setting-up-a-wms-server-using-mapserver">
<span id="index-1"></span><h2><a class="toc-backref" href="#table-of-contents">Configurer un serveur WMS avec MapServer</a><a class="headerlink" href="#setting-up-a-wms-server-using-mapserver" title="Lien permanent vers ce titre">¶</a></h2>
<div class="section" id="install-the-required-software">
<h3>Installez le logiciel requis<a class="headerlink" href="#install-the-required-software" title="Lien permanent vers ce titre">¶</a></h3>
<p>Les requêtes WMS sont gérées par le programme <a class="reference internal" href="../cgi/index.html#cgi"><span>CGI</span></a> <a class="reference internal" href="../cgi/mapserv.html#mapserv"><span>mapserv</span></a>. Toutes les versions du programme mapserv n&#8217;incluent pas le support WMS (c&#8217;est inclut par défaut quand vous compilez ensemble avec la librairie PROJ), c&#8217;est pourquoi la première étape est de vérifier que votre exécutable mapserv inclut le support WMS. Une manière de vérifier cela est d&#8217;utiliser l&#8217;option &#8220;-v&#8221; en ligne de commande et de regarder la présence de &#8220;SUPPORTS=WMS_SERVER&#8221;</p>
<p>(Les utilisateurs Unix doivent se référer au document <a class="reference internal" href="../installation/unix.html#unix"><span>Compiler sous Unix</span></a> pour les instructions relatives à la compilation, et les utilisateurs Windows préfèreront peut être utiliser <a class="reference external" href="http://www.ms4w.com">MS4W</a>, qui inclue automatiquement le support WMS/WFS)</p>
<p>Exemple 1. sous Unix</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>$ ./mapserv -v
MapServer version 6.3-dev OUTPUT=GIF OUTPUT=PNG OUTPUT=JPEG OUTPUT=KML
SUPPORTS=PROJ SUPPORTS=GD SUPPORTS=AGG SUPPORTS=FREETYPE SUPPORTS=CAIRO
SUPPORTS=ICONV SUPPORTS=FRIBIDI SUPPORTS=WMS_SERVER SUPPORTS=WMS_CLIENT
SUPPORTS=WFS_SERVER SUPPORTS=WFS_CLIENT SUPPORTS=WCS_SERVER
SUPPORTS=SOS_SERVER SUPPORTS=GEOS INPUT=JPEG INPUT=POSTGIS INPUT=OGR
INPUT=GDAL INPUT=SHAPEFILE
</pre></div>
</div>
<p>Exemple 2. sous Windows</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>C:\apache\cgi-bin&gt; mapserv -v
MapServer version 6.3-dev OUTPUT=GIF OUTPUT=PNG OUTPUT=JPEG OUTPUT=KML
SUPPORTS=PROJ SUPPORTS=GD SUPPORTS=AGG SUPPORTS=FREETYPE SUPPORTS=CAIRO
SUPPORTS=ICONV SUPPORTS=FRIBIDI SUPPORTS=WMS_SERVER SUPPORTS=WMS_CLIENT
SUPPORTS=WFS_SERVER SUPPORTS=WFS_CLIENT SUPPORTS=WCS_SERVER
SUPPORTS=SOS_SERVER SUPPORTS=GEOS INPUT=JPEG INPUT=POSTGIS INPUT=OGR
INPUT=GDAL INPUT=SHAPEFILE
</pre></div>
</div>
</div>
<div class="section" id="setup-a-mapfile-for-your-wms">
<span id="index-2"></span><h3>Configurer un Mapfile pour votre WMS<a class="headerlink" href="#setup-a-mapfile-for-your-wms" title="Lien permanent vers ce titre">¶</a></h3>
<p>Each instance of WMS server that you setup needs to have its own
mapfile. It is just a regular MapServer mapfile in which some
parameters and some metadata entries are mandatory. Most of the
metadata is required in order to produce a valid GetCapabilities
output.</p>
<p>Voici ici la liste des paramètres et métadonnées qui sont généralement optionnels avec MapServer, mais qui sont <strong>nécessaires (ou particulièrement recommandés) pour une configuration WMS:</strong></p>
<p><strong>Au niveau du bloc MAP:</strong></p>
<ul class="simple">
<li><p class="first">NAME dans l&#8217;objet Map</p>
</li>
<li><p class="first">PROJECTION dans l&#8217;objet Map</p>
</li>
<li><p class="first">METADATA dans l&#8217;objet Map (en fait dans l&#8217;objet WEB):</p>
<ul>
<li>wms_title</li>
<li>wms_onlineresource</li>
<li><p class="first">wms_srs (A moins que l&#8217;objet PROJECTION soit défini en utilisant &#8220;init=epsg:...&#8221;)</p>
</li>
<li>wms_enable_request</li>
</ul>
</li>
</ul>
<p><strong>Et pour chaque LAYER:</strong></p>
<ul class="simple">
<li><p class="first">NAME dans l&#8217;objet Layer</p>
</li>
<li><p class="first">PROJECTION dans l&#8217;objet Layer</p>
</li>
<li><p class="first">METADATA dans l&#8217;objet Layer</p>
<ul>
<li>wms_title</li>
<li><p class="first">wms_srs (optionnel à partir du moment où les couches LAYER héritent de la valeur du SRS de l&#8217;objet MAP)</p>
</li>
</ul>
</li>
<li><p class="first">STATUS de l&#8217;objet LAYER</p>
<ul>
<li><p class="first">Les couches LAYER ayant un STATUS DEFAULT seront toujours envoyées au client.</p>
</li>
<li><p class="first">Les couches LAYER ayant un STATUS ON ou STATUS OFF peuvent être demandées par le client.</p>
</li>
</ul>
</li>
<li><p class="first">TEMPLATE de l&#8217;objet LAYER (requis pour les requêtes GetFeatureInfo - voir <a class="reference internal" href="../mapfile/template.html#template"><span>Templating</span></a>)</p>
</li>
</ul>
<p>Revoyons chacun de ces paramètres plus en détail</p>
<ul>
<li><p class="first"><strong>NAME de l&#8217;objet MAP et wms_title:</strong></p>
<p>WMS Capabilities requiert un tag Nom et Titre pour chaque couche. Le NAME de l&#8217;objet MAP et wms_title du bloc METADATA seront utilisés pour définir le nom et le titre de la couche racine dans la sortie XML de GetCapabilities. La couche racine dans le contexte WMS correspond à l&#8217;ensemble du mapfile.</p>
</li>
<li><p class="first"><strong>NAME de l&#8217;objet MAP et métadonnée wms_title:</strong></p>
<p>Chaque couche individuelle nécessite son propre nom et titre. Les noms des couches sont aussi utilisé dans les requêtes GetMap et GetFeatureInfo pour référencer les couches qui doivent être incluses dans la sortie de carte et dans la requête. Les noms de couche doivent obligatoirement commencer avec une lettre quand on définit une couche WMS (les noms des couches ne doivent pas démarrer avec un chiffre ou avoir des espaces).</p>
</li>
<li><p class="first"><strong>PROJECTION de l&#8217;objet MAP et métadonnée wms_srs:</strong></p>
<p>Les serveurs WMS doivent pouvoir renvoyer la projection dans laquelle ils sont capables de servir les données en utilisant les codes de projections EPSG (voir <a class="reference external" href="http://www.epsg.org/">The EPSG web page</a> pour plus d&#8217;informations sur les codes EPSG). Les versions récentes de la bibliothèque PROJ4 viennent avec une table d&#8217;initialisation de codes EPSG et permettent aux utilisateurs de définir une projection comme ceci:</p>
<div class="highlight-mapfile"><div class="highlight"><pre><span></span><span class="k">PROJECTION</span>
   <span class="s">&quot;init=epsg:4269&quot;</span>
<span class="k">END</span>
</pre></div>
</div>
<p>(Note that &#8220;epsg&#8221; has to be in lowercase when used in the PROJ4
&#8216;init&#8217; directive.)</p>
<p>Si un bloc <a class="reference internal" href="../mapfile/projection.html#projection"><span>PROJECTION</span></a> dans <a class="reference internal" href="../mapfile/map.html#map"><span>MAP</span></a> est fournit dans le format &#8220;init=epsg:xxxx&#8221; alors MapServer utilisera aussi cette information pour générer un tag &lt;BoundingBox&gt; pour la couche de niveau supérieure dans le document Capabilities du WMS.  BoundingBox est un élément obligatoire dans le retour Capabilities WMS pour le WMS 1.3.0 (pour le WMS 1.1.0, il est optionnel, mais c&#8217;est une bonne pratique de permettre à MapServer de l&#8217;inclure lorsque c&#8217;est possible).</p>
<p>Ce qui précède suffit pour MapServer à reconnaître le code EPSG et à linclure dans les tags SRS dans la sortie &#8220;capabilities&#8221; (la métadonnée wms_srs n&#8217;est pas requise dans ce cas)? Cependant, il est souvent imposible de  trouver un code EPSG qui corresponde à la projection de votre donnée. Dans ces cas, la métadonnée &#8220;wms_srs&#8221; est utilisée pour lister un ou plusieurs codes EPSG dans lesquelles la donnée peut être servie et l&#8217;objet PROJECTION contient la vraie définition PROJ4 de la la projection de la donnée.</p>
<p>Voici un exemple de serveur dont dont la donnée est en projection Lambert Conforme Conique (42304). Sa sortie &#8220;capabilities&#8221; indiquera les projections EPSG:4269 et EPSG:4326 (lat/lon) mais l&#8217;objet PROJECTION est définie à la véritable projection dans laquelle la donnée est:</p>
<div class="highlight-mapfile"><div class="highlight"><pre><span></span><span class="k">NAME</span> <span class="s">&quot;DEMO&quot;</span>
<span class="p">...</span>

<span class="k">WEB</span>
  <span class="p">...</span>
  <span class="k">METADATA</span>
    <span class="s">&quot;wms_title&quot;</span>           <span class="s">&quot;WMS Demo Server&quot;</span>
    <span class="s">&quot;wms_onlineresource&quot;</span>  <span class="s">&quot;http://my.host.com/cgi-bin/mapserv?map=wms.map&amp;&quot;</span>
    <span class="s">&quot;wms_srs&quot;</span>             <span class="s">&quot;EPSG:4269 EPSG:4326&quot;</span>
  <span class="k">END</span>
<span class="k">END</span>

<span class="k">PROJECTION</span>
  <span class="s">&quot;init=epsg:42304&quot;</span>
<span class="k">END</span>
<span class="p">...</span>
<span class="k">END</span>
</pre></div>
</div>
<p>En plus des projections EPSG:xxxx, un serveur WMS peut afficher des projections dans le namespace AUTO:xxxx. Les projections AUTO 42001 à 42005 sont supportées den interne par MapServer. Cependant, les projections AUTO sont utiles seulement avec les clients WMS les plus intelligents, comme le client a besoin de définir les paramètres de projection dans les requêtes WMS vers le serveur. Pour plus d&#8217;informations, voir l&#8217;annexe E de la <a class="reference external" href="http://portal.opengeospatial.org/files/?artifact_id=1081&amp;version=1&amp;format=pdf">WMS 1.1.1 specification</a> et la section 6.5.5.2 du même document. Voir aussi la FAQ sur les projections AUTO à la fin de ce document.</p>
</li>
<li><p class="first"><strong>PROJECTION de l&#8217;objet LAYER et métadonnée wms_srs:</strong></p>
<p>Par défaut, les couches héritent du SRS de leur couche parente (la PROJECTION du bloc MAP dans les cas de MapServer). Pour cette raison, il n&#8217;est pas nécessaire (mais quand même fortement recommandé) de fournir une PROJECTION et une métadonnée wms_srs pour chaque couche. Si une PROJECTION de couche n&#8217;est pas fournie alors c&#8217;est la projection du niveau supérieur MAP qui sera assumée.</p>
<p>La PROJECTION de l&#8217;objet LAYER et la métadonnée wms_srs sont définis exactement de la même manière que la PROJECTION et la métadonnée wms_srs du bloc MAP.</p>
<p>Pour les couches vecteur, si un bloc de PROJECTION est fournit dans le format &#8220;init=epsg:xxxx&#8221; alors MapServer utilisera aussi cette information pour générer un tag &lt;BoundingBox&gt; pour cette couche dans le document &#8220;capabilities&#8221; du WMS. BoundingBox est un élément obligatoire dans un &#8220;capabilities&#8221; WMS pour le WMS 1.3.0 (pour le WMS 1.1.0, c&#8217;est optionnel, mais c&#8217;est une bonne pratique de permettre à MapServer de l&#8217;inclure lorsque c&#8217;est possible).</p>
</li>
<li><p class="first"><strong>Métadonnée &#8220;wms_onlineresource&#8221;:</strong></p>
<p>La métadonnée wms_onlineresource metadata est définie dans  l&#8217;objet METADATA de l&#8217;objet WEB dans le block MAP et spécifie l&#8217;URL qui devrait être utilisée pour accéder à votre serveur. Cela est requis pour la sortie &#8220;GetCapabilities&#8221;. Si wms_onlineresource n&#8217;est pas fourni alors MapServer essayera d&#8217;en fournir un par défaut en utilisant le nom du script et de l&#8217;hôte, mais vous ne devriez pas trop compter sur comportement. Il est fortement recommandé que vous fournissiez la métadonnée wms_onlineresource.</p>
<p>Voir la section 6.2.2 de la <a class="reference external" href="http://portal.opengeospatial.org/files/?artifact_id=1081&amp;version=1&amp;format=pdf">WMS 1.1.1 specification</a> pour avoir l&#8217;ensemble de l&#8217;histoire à propos de l&#8217;URL &#8220;Online Resource&#8221;. Basiquement, ce que vous avez besoin est une URL HTTP complète incluant le préfixe <a class="reference external" href="http://">http://</a> , le nom d&#8217;hôte, le nom du script, potentiellement un paramètre &#8220;map=&#8221;, et terminé par &#8221;?&#8221; ou &#8220;&amp;&#8221;.</p>
<p>Voici ici une URL &#8220;Online Resource&#8221; valide:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>http://my.host.com/cgi-bin/mapserv?map=mywms.map&amp;
</pre></div>
</div>
<p>En créant un script d&#8217;encapsulation, il est possible de cacher le paramètre &#8220;map=&#8221; depuis l&#8217;URL et ainsi, votre URL &#8220;Online Resource&#8221; pourra être du type suivant:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>http://my.host.com/cgi-bin/mywms?
</pre></div>
</div>
<p>Ceci est couvert plus en détails dans la section &#8220;En savoir plus sur l&#8217;URL Online Resource&#8221; ci-dessous.</p>
</li>
<li><p class="first"><strong>Métadonnée &#8220;wms_enable_request&#8221;:</strong></p>
<p>Spécifie quelles requêtes permettre.  Si ce n&#8217;est pas spécifié, aucun requête ne sera permise!  Voir les explications ci-dessous.</p>
</li>
<li><p class="first"><strong>Configurer les requêtes GetFeatureInfo:</strong></p>
<p>Vous devez définir le paramètre TEMPLATE du bloc LAYER pour que la couche soit interrogeable par des requêtes GetFeatureInfo (voir <a class="reference internal" href="../mapfile/template.html#template"><span>Templating</span></a>).  Pour des requêtes de type &#8220;text/html&#8221;, vous devriez aussi définir les paramètres HEADER et FOOTER de la couche.</p>
<p>Depuis MapServer 4.6, vous devez obligatoirement définir la métadonnée <em>gml_*</em> pour les attributs de la couche qui doivent être renvoyés (voir l&#8217;objet METADATA du bloc LAYER dans la section de référence plus loin dans ce document).  Pour inclure les géométries, gml_geometries et gml_[nom_de_la_géométrie]_type doivent être spécifié.</p>
<p>Voici quelques examples qui fonctionnent de requêtes GetFeatureInfo: <a class="reference external" href="http://demo.mapserver.org/cgi-bin/wms?SERVICE=WMS&amp;VERSION=1.1.1&amp;REQUEST=GetFeatureInfo&amp;BBOX=-11.332970,24.121208,47.584718,57.965035&amp;SRS=EPSG:4326&amp;WIDTH=1001&amp;HEIGHT=575&amp;LAYERS=cities&amp;STYLES=&amp;FORMAT=image/png&amp;TRANSPARENT=true&amp;QUERY_LAYERS=cities&amp;INFO_FORMAT=text/plain&amp;X=229&amp;Y=280">text/plain</a> / <a class="reference external" href="http://demo.mapserver.org/cgi-bin/wms?SERVICE=WMS&amp;VERSION=1.1.1&amp;REQUEST=GetFeatureInfo&amp;BBOX=-11.332970,24.121208,47.584718,57.965035&amp;SRS=EPSG:4326&amp;WIDTH=1001&amp;HEIGHT=575&amp;LAYERS=cities&amp;STYLES=&amp;FORMAT=image/png&amp;TRANSPARENT=true&amp;QUERY_LAYERS=cities&amp;INFO_FORMAT=text/html&amp;X=229&amp;Y=280">text/html</a> / <a class="reference external" href="http://demo.mapserver.org/cgi-bin/wms?SERVICE=WMS&amp;VERSION=1.1.1&amp;REQUEST=GetFeatureInfo&amp;BBOX=-11.332970,24.121208,47.584718,57.965035&amp;SRS=EPSG:4326&amp;WIDTH=1001&amp;HEIGHT=575&amp;LAYERS=cities&amp;STYLES=&amp;FORMAT=image/png&amp;TRANSPARENT=true&amp;QUERY_LAYERS=cities&amp;INFO_FORMAT=gml&amp;X=229&amp;Y=280">gml</a> (pour gml, votre navigateur risque de vous demander de sauver le fichier, si, c&#8217;est le cas, sauvez-le localement comme fichier .gml et regardez-le avec un éditeur de texte)</p>
</li>
</ul>
</div>
<div class="section" id="test-your-wms-server">
<h3>Tester votre serveur WMS<a class="headerlink" href="#test-your-wms-server" title="Lien permanent vers ce titre">¶</a></h3>
<div class="section" id="validate-the-capabilities-metadata">
<span id="wms-capabilities"></span><h4>Valider les métadonnées des &#8220;Capabilities&#8221;<a class="headerlink" href="#validate-the-capabilities-metadata" title="Lien permanent vers ce titre">¶</a></h4>
<p>Ok, maintenant que nous avons un mapfile, nous devons vérifier les &#8220;capabilities &#8221; du XML retourné par notre serveur en nous assurant que rien ne manque.</p>
<p>En utilisant un navigateur web, accédez à votre URL &#8220;Online Resource&#8221; auxquel vous vous ajouterez les paramètres &#8220;SERVICE=WMS&amp;VERSION=1.1.1&amp;REQUEST=GetCapabilities&#8221; à la fin, c&#8217;est à dire.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>http://my.host.com/cgi-bin/mapserv?map=mywms.map&amp;SERVICE=WMS&amp;VERSION=1.1.1
                                                &amp;REQUEST=GetCapabilities
</pre></div>
</div>
<p>Voici une requête GetCapabilities qui fonctionne (notez que le paramètre SERVICE est requis pour toutes les requêtes GetCapabilities):</p>
<p><a class="reference external" href="http://demo.mapserver.org/cgi-bin/wms?SERVICE=WMS&amp;VERSION=1.1.1&amp;REQUEST=GetCapabilities">http://demo.mapserver.org/cgi-bin/wms?SERVICE=WMS&amp;VERSION=1.1.1&amp;REQUEST=GetCapabilities</a></p>
<p>Cela devrait retourner un document de type MIME application/vnd.ogc.wms_xml, aisni, votre navigateur is susceptible de vous demander de sauver ce fichier. Sauvez-le et ouvrez-le dans un éditeur de texte (Emacs, Notepad, etc.), et vous pourrez voir le XML retourné depuis le serveur WMS.</p>
<p>Si vous avez un message d&#8217;erreur dans la sortie XML alors prenez les actions en conséquence pour corriger. Les problèmes et solutions communs sont listé dans la FAQ à la fin de ce document.</p>
<p>Si tout c&#8217;est bien passé, vous devriez avoir un document XML complet des &#8220;capabilities&#8221;.  Cherchez dedans le mot &#8220;WARNING&#8221;... MapServer insère des commentaires XML qui commence avec &#8220;&lt;!&#8211;WARNING: &#8221; dans la sortie XML s&#8217;il détecte éléments de paramètres ou de métadonnées manquants dans le mapfile. Si vous voyez des avertissements de ce type dans votre sortie XML alors vous allez avoir à les corriger toutes avant d&#8217;appeler votre serveur avec un client WMS, sinon, les choses risquent fortement de ne pas marcher.</p>
<p>Notez que que quand une requête est lancée, elle est passée via WMS, WFS et WCS dans MapServer (dans cet ordre) jusqu&#8217;à ce qu&#8217;un des services lui réponde.</p>
</div>
<div class="section" id="test-with-a-getmap-request">
<span id="index-3"></span><h4>Tester avec une requête GetMap<a class="headerlink" href="#test-with-a-getmap-request" title="Lien permanent vers ce titre">¶</a></h4>
<p>OK, maintenant que nous savons que notre serveur peut produire une réponse GetCapabilities XML valide, nous devrions tester une requête GetMap. MapServer vérifie seulement vérifie seulement quelques-uns des paramètres GetMap requis, ainsi à la fois les paramètres MapServer minimum et une requête GetMap valide seront expliqués ci-dessous.</p>
<p>Ce qui suit est la liste des paramètres GetMap requis selon la spécification WMS:</p>
<blockquote>
<div><p><strong>VERSION=version:</strong> Version pour la requête</p>
<p><strong>REQUEST=GetMap:</strong> Nom de la requête</p>
<p><strong>LAYERS=liste_de_couches:</strong> Liste séparée par des virgules de une ou plusieurs couches de carte. Optionnelle si le paramètre SLD est présent.</p>
<p><strong>STYLES=liste_du_style:</strong> Liste séparée par des virgules d&#8217;un style rendu par couche interrogée.  Optionnelle si le paramètre SLD est présent. Définir &#8220;STYLES=&#8221; avec une valeur vide  pour utiliser le(s) style(s) par défaut. Les styles nommés sont aussi supportés et sont controlés par noms de GROUP de CLASS dans le mapfile.</p>
<p><strong>SRS=namespace:identifiant:</strong> Système de référence spatial.</p>
<p><strong>BBOX=minx,miny,maxx,maxy:</strong> Coins du rectangle englobant (bas gauche, haut droite) dans l&#8217;unité du SRS.</p>
<p><strong>WIDTH=largeur_de_sortie:</strong> Largeur en pixels d&#8217;une image de carte.</p>
<p><strong>HEIGHT=hauteur_de_sortie:</strong> Hauteur en pixels de l&#8217;image de carte.</p>
<p><strong>FORMAT=format_de_sortie:</strong> Format de sortie de la carte.</p>
</div></blockquote>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Les serveurs WMS affichent les formats supportés qui sont présents dans les bibliothèques gd / gdal.</p>
</div>
<p>Un exemple valide serait donc:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>http://my.host.com/cgi-bin/mapserv?map=mywms.map&amp;SERVICE=WMS&amp;VERSION=1.1.1
     &amp;REQUEST=GetMap&amp;LAYERS=prov_bound&amp;STYLES=&amp;SRS=EPSG:4326
     &amp;BBOX=-173.537,35.8775,-11.9603,83.8009&amp;WIDTH=400&amp;HEIGHT=300
     &amp;FORMAT=image/png
</pre></div>
</div>
<p>Voici une <a class="reference external" href="http://demo.mapserver.org/cgi-bin/wms?SERVICE=WMS&amp;VERSION=1.1.1&amp;REQUEST=GetMap&amp;BBOX=-180,-90,180,90&amp;SRS=EPSG:4326&amp;WIDTH=953&amp;HEIGHT=480&amp;LAYERS=bluemarble,cities&amp;STYLES=&amp;FORMAT=image/png&amp;TRANSPARENT=true">valid request</a> qui fonctionne.</p>
</div>
<div class="section" id="test-with-a-real-client">
<h4>Testez avec un client réel<a class="headerlink" href="#test-with-a-real-client" title="Lien permanent vers ce titre">¶</a></h4>
<p>Si vous avez accès à un client WMS, alors enregistrez votre nouvelle &#8220;Online Resource&#8221; du serveur avec et vous devriez être bon pour que ça marche.</p>
<p>Si vous n&#8217;avez pas votre client WMS déjà installé, voici quelques pointeurs:</p>
<ul class="simple">
<li><p class="first">MapServer lui-même peut être utilisé comme client WMS, voir le <a class="reference internal" href="wms_client.html#wms-client"><span>guide du client WMS MapServer</span></a>.</p>
</li>
<li><p class="first"><a class="reference external" href="http://www.qgis.org/">Quantum GIS</a> est un logiciel SIG complet qui inclut le support du client WMS. (recommandé)</p>
</li>
<li><p class="first"><a class="reference external" href="http://www.openjump.org">OpenJUMP</a> est un logiciel SIG bureautique qui inclut le support du client WMS.</p>
</li>
<li><p class="first"><a class="reference external" href="http://udig.refractions.net/">uDig</a> est un logiciel SIG bureautique qui permet aux utilisateurs d&#8217;ajouter des couches WMS.</p>
</li>
<li><p class="first"><a class="reference external" href="http://www.deegree.org/">Deegree</a> fournit un client WMS.</p>
</li>
</ul>
<p>Cette liste n&#8217;est pas exhaustive, il y a de nombreux logiciels Open Source ou propriétaire qui offre le support WMS et qui peuvent être utilisé pour interagir avec votre nouvelle instance serveur WMS MapServer.</p>
</div>
</div>
<div class="section" id="getlegendgraphic-request">
<span id="index-4"></span><h3>Requête GetLegendGraphic<a class="headerlink" href="#getlegendgraphic-request" title="Lien permanent vers ce titre">¶</a></h3>
<p>Cette requête retourne une image de légende (icône) pour la couche spécifiée. La requête dessinera une icône et une étiquette pour toutes les classes définies sur la couche. Si le nom de la couche demandée est un NAME de GROUP, toutes les couches incluses seront retournées dans l&#8217;icône de légende.</p>
<div class="section" id="requirements">
<h4>Prérequis<a class="headerlink" href="#requirements" title="Lien permanent vers ce titre">¶</a></h4>
<p>Ce qui suit est obligatoire dans le mapfile du serveur WMS pour permettre cette requête:</p>
<ul class="simple">
<li><p class="first">un objet LEGEND.</p>
</li>
<li><p class="first">un objet CLASS pour chaque couche.</p>
</li>
<li><p class="first">un NAME dans l&#8217;objet CLASS.</p>
</li>
<li><p class="first">le STATUS de chaque LAYER doit être mis à ON.</p>
</li>
</ul>
</div>
<div class="section" id="parameters">
<h4>Paramètres<a class="headerlink" href="#parameters" title="Lien permanent vers ce titre">¶</a></h4>
<p>Les élements suivants sont des paramètres valides pour cette requête:</p>
<blockquote>
<div><ul class="simple">
<li><p class="first"><strong>LAYER</strong> - (Requis) Nom de la couche WMS à retourner à l&#8217;image de  légende.  Notez que c&#8217;est le paramètre &lt;Name&gt; de &lt;Layer&gt; dans le &#8220;GetCapabilities&#8221;.</p>
</li>
<li><p class="first"><strong>FORMAT</strong> - (Requis) Format de l&#8217;mage de légende (c&#8217;est à dire &#8220;image/png&#8221;).</p>
</li>
<li><p class="first"><strong>WIDTH</strong> - (Optionnelle) Largeur de l&#8217;image de légende. Notez que le paramètre &#8220;Width&#8221; est seulement utilisé quand le paramètre &#8220;Rule&#8221; est aussi utilisé dans la requête.</p>
</li>
<li><p class="first"><strong>HEIGHT</strong> - (Optionnelle) Hauteur de l&#8217;image de légende. Notez que le paramètre &#8220;Height&#8221; est seulement utilisé quand le paramètre &#8220;Rule&#8221; est aussi utilisé dans la requête.</p>
</li>
<li><strong>SLD</strong> - (Optional) The URL to the SLD. Applies the SLD on the
layer and the legend is drawn after the SLD is applied (using the
classes specified by the SLD). Note here that you need to put a
&lt;Name&gt;class1&lt;/Name&gt; inside the Rule element so that a class name
is created from the SLD and therefore a correct legend image.</li>
<li><p class="first"><strong>SLD_BODY</strong> - (Optionnel) Le contenu (code) d SLD, à la place de la spécification d&#8217;une URL (comme dans le paramètre &#8216;SLD&#8217;).</p>
</li>
<li><p class="first"><strong>SLD_VERSION</strong> - (Optionnel) La version du SLD.</p>
</li>
<li><p class="first"><strong>SCALE</strong> - (Optionnelle) Spécifie l&#8217;échelle ainsi seules les couches qui tombent dans cette échelle auront une légende.</p>
</li>
<li><p class="first"><strong>STYLE</strong> - (Optionnel) Le style.</p>
</li>
<li><p class="first"><strong>RULE</strong> - (Optionnelle) Spécifie le nom de la CLASS pour lequel générer une image de légende (au contraire de générer une icône et une étiquette pour toutes les classes de la couches).</p>
</li>
</ul>
</div></blockquote>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Toutes les règles sont utilisées pour dessiner la légende dans le mode CGI normal qui s&#8217;applique ici.  Voir le <a class="reference internal" href="../cgi/index.html#cgi"><span>document de référence CGI</span></a> si nécessaire.</p>
</div>
<p>Le paramètre KEYIMAGE de l&#8217;objet <a class="reference internal" href="../mapfile/class.html#class"><span>CLASS</span></a> peut aussi être utilisé pour spécifier l&#8217;image de légende pour une CLASS. Voir <a class="reference internal" href="../mapfile/index.html#mapfile"><span>document de référence MapFile</span></a> si nécessaire. Requête exemple</p>
<p>Un exemple de requête pourrait ressembler à ceci:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>http://127.0.0.1/cgi-bin/mapserv.exe?SERVICE=WMS&amp;VERSION=1.1.1&amp;layer=park&amp;
REQUEST=getlegendgraphic&amp;FORMAT=image/png
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="changing-the-online-resource-url">
<span id="online-resource-wms"></span><span id="index-5"></span><h2><a class="toc-backref" href="#table-of-contents">Changer l&#8217;URL &#8220;Online Resource&#8221;</a><a class="headerlink" href="#changing-the-online-resource-url" title="Lien permanent vers ce titre">¶</a></h2>
<p>Comme mentionné dans la section &#8220;Configurer un Mapfile / métadonnée wms_onlineresource&#8221; ci-dessus, l&#8217;URL &#8220;Online Resource&#8221; suivante est parfaitement valide pour un WMS MapServer selon la section 6.2.2 ou la spécification WMS 1.1.1:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>http://my.host.com/cgi-bin/mapserv?map=mywms.map&amp;
</pre></div>
</div>
<p>Cependant, certains personnes feront remarquer que l&#8217;URL ci-dessus contient des paramètres obligatoires spécifiques à MapServer et que c&#8217;est illégal. Premièrement, nous voulons pointer que &#8220;map=...&#8221; n&#8217;est pas considéré comme un paramètre spécifique à MapServer dans ce cas comme c&#8217;est une partie de l&#8217;URL &#8220;Online Resource&#8221; qui est définit comme une chaîne opaque terminée par &#8221;?&#8221; ou &#8220;&amp;&#8221; (Voir la <a class="reference external" href="http://portal.opengeospatial.org/files/?artifact_id=1081&amp;version=1&amp;format=pdf">WMS 1.1.1 section 6.2.2</a>).</p>
<p>Mais quelque soit le cas, même si elle est valide, l&#8217;URL ci-dessus est toujours laide. Et vous voudriez peut utiliser une URL plus jolie pour votre URL &#8220;Online Resource&#8221; WMS. Voici quelques suggestions.</p>
<div class="section" id="apache-rewrite-rules-using-apache-mod-rewrite">
<span id="index-6"></span><h3>Règles de réécritures Apache (utilisant mod_rewrite Apache)<a class="headerlink" href="#apache-rewrite-rules-using-apache-mod-rewrite" title="Lien permanent vers ce titre">¶</a></h3>
<p>L&#8217;un peut utiliser mod_rewrite de Apache pour éviter de spécifier la &#8220;map&#8221;, ou un autre paramètre par défaut dans l&#8217;URL de MapServer.  Cette tâche consiste en trois étapes, en spécifiant que le module mod_rewrite soit chargé, en activant le module mod_rewrite pour les répertoires sélectionnés et enfin en écrivant un fichier .htaccess pour effectuer la réécriture d&#8217;URL.</p>
<p>Dans le fichier httpd.conf, le module mod_rewrite est par défaut désactivé.  Pour l&#8217;activer, enlevez le # du début dans la ligne</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="c1">#LoadModule rewrite_module modules/mod_rewrite.so</span>
</pre></div>
</div>
<p>Pour être capable  d&#8217;utiliser le module, il doit être activé, en utilisant la directive AllowOverride. Cela peut fait par serveur ou par répertoire. Si vous avez juste un seul serveur, ajoutez une ligne &#8220;AllowOverride All&#8221; dans le fichier httpd.conf (voir la documentation Apache pour être sûr des implications de sécurité de cette manipulation).  Le fonctionnement par répertoire est la manière la plus facile de le faire fonctionner dans des hôtes virtuels.  A l&#8217;intérieur de la section &lt;virtualHost&gt; de httpd.conf, insérez:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>&lt;Directory myhtdocsdir&gt;
  AllowOverride All
&lt;/Directory&gt;
</pre></div>
</div>
<p>Où myhtdocsdir est le répertoire définit comme &#8220;documentroot&#8221; pour le serveur virtuel actuel.</p>
<p>Quand les directives sont définies pour charger et permettre le fonctionnement du module mod_rewrite module, Apache doit être redémarré.</p>
<p>Dans un répertoire accessible au web, créez un fichier .htaccess comme suivant:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>RewriteEngine on
RewriteRule wmsmap?(.*) /cgi-bin/mapserv?map=/home/www/mapserverstuff/mymapfile.map&amp;$1
</pre></div>
</div>
<p>La règle de ré-écriture dit: étant donné qu&#8217;une page web commençant avec wmsmap, récupérez les paramètres d&#8217;interrogation, faites une requête de nouvelle page commençant avec /cgi-bin/mapserv?map=(…)? et ajoutez tous les paramètres d&#8217;interrogation venant de la requête dans la page originale.</p>
<p>c&#8217;est à dire, l&#8217;URL wmsmap?mode=map sera réécrite comme</p>
<dl class="docutils">
<dt>::</dt>
<dd><p class="first last">/cgi-bin/mapserv?map=/home/www/trucmapserver/monmapfile.map&amp;mode=map</p>
</dd>
</dl>
<p>Si juste une URL wmsmap est donnée (sans aucun paramètre), une page non trouvée sera affichée comme elle ne correspond pas à l&#8217;expression wmsmap?.</p>
</div>
<div class="section" id="apache-environment-variables-ms-mapfile">
<span id="index-7"></span><h3>Variables d&#8217;environnement Apache - MS_MAPFILE<a class="headerlink" href="#apache-environment-variables-ms-mapfile" title="Lien permanent vers ce titre">¶</a></h3>
<p>Un mapfile par défaut peut être spécifié en utilisant la variable d&#8217;environnement MS_MAPFILE:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>Alias /mywms /usr/lib/cgi-bin/mapserver
&lt;Location /mywms&gt;
   SetHandler cgi-script
   Options ExecCGI
   SetEnv MS_MAPFILE /path/to/mymapfile.map
&lt;/Location&gt;
</pre></div>
</div>
</div>
<div class="section" id="apache-setenvif">
<span id="index-8"></span><h3>SetEnvIf Apache<a class="headerlink" href="#apache-setenvif" title="Lien permanent vers ce titre">¶</a></h3>
<p>Une autre option est d&#8217;utiliser la fonctionnalité &#8220;setenvif&#8221; de Apache: utilisez des liens symboliques qui pointent tous vers le même binaire mapserv, et pour chacun des liens symboliques, testez l&#8217;URL, et définissez un environment MAP en fonction.</p>
<p>Pour les utilisateurs de Windows et Apache, les étapes sont comme suivantes (cela requiert Apache 1.3 ou plus récent):</p>
<ul class="simple">
<li><p class="first">Copiez mapserv.exe avec un nouveau nom pour votre WMS, comme &#8220;mywms.exe&#8221;.</p>
</li>
<li><p class="first">Dans httpd.conf, ajouter:</p>
</li>
</ul>
<div class="highlight-python"><div class="highlight"><pre><span></span>SetEnvIf Request_URI &quot;/cgi-bin/mywms&quot; MS_MAPFILE=/path/to/mymap.map
</pre></div>
</div>
</div>
<div class="section" id="asp-script-iis-microsoft-windows">
<span id="index-9"></span><h3>Script ASP (IIS - Microsoft Windows)<a class="headerlink" href="#asp-script-iis-microsoft-windows" title="Lien permanent vers ce titre">¶</a></h3>
<p>Sur les serveurs IIS (Windows), vous pouvez utiliser le script ASP suivant:</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Le script ci-dessous, bien que fonctionnel, est seulement destiné à être un exemple d&#8217;usage d&#8217;ASP pour filtrer les requêtes MapServer. Utiliser ASP dans un serveur WMS de production devra sûrement requérir du code ASP supplémentaire en particulier dans la gestion des erreurs et la configuration des timeouts.*</p>
</div>
<div class="highlight-guess"><div class="highlight"><pre><span></span><span class="cp">&lt;%</span>
  <span class="no">Server</span><span class="o">.</span><span class="n">ScriptTimeout</span> <span class="o">=</span> <span class="mi">360</span>

  <span class="no">Select</span> <span class="no">Case</span> <span class="no">Request</span><span class="o">.</span><span class="n">ServerVariables</span><span class="p">(</span><span class="s2">&quot;REQUEST_METHOD&quot;</span><span class="p">)</span>
    <span class="no">Case</span> <span class="s2">&quot;GET&quot;</span>  <span class="n">strRequest</span> <span class="o">=</span> <span class="no">Request</span><span class="o">.</span><span class="n">QueryString</span>
    <span class="no">Case</span> <span class="s2">&quot;POST&quot;</span> <span class="n">strRequest</span> <span class="o">=</span> <span class="no">Request</span><span class="o">.</span><span class="n">Form</span>
  <span class="no">End</span> <span class="no">Select</span>

  <span class="n">strURL</span> <span class="o">=</span> <span class="s2">&quot;http://myserver/cgi-bin/mapserv.exe?</span>
<span class="s2">            map=C:\Inetpub\wwwroot\workshop\itasca.map&amp;&quot;</span> <span class="o">&amp;</span> <span class="n">strRequest</span>

  <span class="no">Dim</span> <span class="n">objHTTP</span>
  <span class="no">Set</span> <span class="n">objHTTP</span> <span class="o">=</span> <span class="no">Server</span><span class="o">.</span><span class="n">CreateObject</span><span class="p">(</span><span class="s2">&quot;MSXML2.ServerXMLHTTP&quot;</span><span class="p">)</span>
  <span class="n">objHTTP</span><span class="o">.</span><span class="n">open</span> <span class="s2">&quot;GET&quot;</span><span class="p">,</span> <span class="n">strURL</span><span class="p">,</span> <span class="kp">false</span>
  <span class="n">objHTTP</span><span class="o">.</span><span class="n">send</span> <span class="s2">&quot;&quot;</span>

  <span class="no">Response</span><span class="o">.</span><span class="n">ContentType</span> <span class="o">=</span> <span class="n">objHTTP</span><span class="o">.</span><span class="n">getResponseHeader</span><span class="p">(</span><span class="s2">&quot;content-type&quot;</span><span class="p">)</span>
  <span class="no">Response</span><span class="o">.</span><span class="n">BinaryWrite</span> <span class="n">objHTTP</span><span class="o">.</span><span class="n">responseBody</span>

  <span class="no">Set</span> <span class="n">objHTTP</span> <span class="o">=</span> <span class="no">Nothing</span>
<span class="cp">%&gt;</span><span class="x"></span>
</pre></div>
</div>
</div>
<div class="section" id="mapscript-wrapper">
<span id="index-10"></span><h3>Wrapper Mapscript<a class="headerlink" href="#mapscript-wrapper" title="Lien permanent vers ce titre">¶</a></h3>
<p>Quelques services OGC (WFS, SOS) supportent à la fois des requêtes GET et POST. Ici, vous pouvez utiliser un wrapper WxS MapScript minimal.  Voici un exemple Python:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="ch">#!/usr/bin/python</span>

<span class="kn">import</span> <span class="nn">mapscript</span>

<span class="n">req</span> <span class="o">=</span> <span class="n">mapscript</span><span class="o">.</span><span class="n">OWSRequest</span><span class="p">()</span>
<span class="n">req</span><span class="o">.</span><span class="n">loadParams</span><span class="p">()</span>
<span class="nb">map</span> <span class="o">=</span> <span class="n">mapscript</span><span class="o">.</span><span class="n">mapObj</span><span class="p">(</span><span class="s1">&#39;/path/to/config.map&#39;</span><span class="p">)</span>
<span class="nb">map</span><span class="o">.</span><span class="n">OWSDispatch</span><span class="p">(</span><span class="n">req</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="wrapper-script-unix">
<span id="index-11"></span><h3>Script wrapper (Unix)<a class="headerlink" href="#wrapper-script-unix" title="Lien permanent vers ce titre">¶</a></h3>
<p>Sur les serveur Unix, vous pouvez configurer un script wrapper shell qui définit la variable d&#8217;environnement MS_MAPFILE et ensuite qui passe le contrôle à l&#8217;exécutable mapserv... qui résulte en une URL &#8220;OnlineResource&#8221; plus propre:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>#! /bin/sh
MS_MAPFILE=/path/to/demo.map
export MS_MAPFILE
/path/to/mapserv
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Utiliser un script wrapper /bin/sh cause une surcharge sur les ressources système comme deux process doivent être servis plutôt qu&#8217;un, et que cela n&#8217;est pas recommandé.</p>
</div>
</div>
</div>
<div class="section" id="wms-1-3-0-support">
<span id="index-12"></span><h2><a class="toc-backref" href="#table-of-contents">Support WMS 1.3.0</a><a class="headerlink" href="#wms-1-3-0-support" title="Lien permanent vers ce titre">¶</a></h2>
<p>MapServer 5.4 ajoute le support pour le WMS 1.3.0. Bien que le mécanisme général dans MapServer pour supporter cette nouvelle spécification soit le même, il y a des mises à jour notables.</p>
<div class="section" id="major-features-related-to-the-wms-1-3-0-support">
<h3>Fonctionnalités principales liées au support du WMS 1.3<a class="headerlink" href="#major-features-related-to-the-wms-1-3-0-support" title="Lien permanent vers ce titre">¶</a></h3>
<ul class="simple">
<li><p class="first">Apporte le support des opérations basiques WMS 1.3.0: GetCapabilities, GetMap et GetFeatureInfo.</p>
</li>
<li><p class="first">Implémente le <a class="reference external" href="http://portal.opengeospatial.org/files/?artifact_id=22364">Styled Layer Descriptor profile of the Web Map Service Implementation Specification</a>. Cette spécification étend le WMS 1.3.0 et permet d&#8217;exposer les &#8220;capabilities&#8221; de stylage (support du standard OGC Styled Layer Descriptor (SLD)). Il définit aussi deux opérations additionnelel GetLegendGraphic et DescribeLayer</p>
</li>
<li><p class="first">Implémente la <a class="reference external" href="http://portal.opengeospatial.org/files/?artifact_id=16700">Symbology Encoding Implementation Specification</a>, qui est la nouvelle version du SLD. Le support de lecture a été ajouté pour les symboliseurs &#8220;Point&#8221;, &#8220;Line&#8221;, &#8220;Polygon&#8221;, &#8220;Raster&#8221;</p>
</li>
<li><p class="first">Met à jour la génération de SLD à la version 1.1.0 (SLD généré via l&#8217;opération GetStyles ou via MapScript)</p>
</li>
</ul>
</div>
<div class="section" id="coordinate-systems-and-axis-orientation">
<span id="index-13"></span><h3>Systèmes de coordonnées et orientation des axes<a class="headerlink" href="#coordinate-systems-and-axis-orientation" title="Lien permanent vers ce titre">¶</a></h3>
<p>Les changements les plus notables introduit dans le WMS 1.3 sont:</p>
<ul class="simple">
<li><p class="first">les changements d&#8217;axes</p>
</li>
<li><p class="first">l&#8217;introduction de nouveaux systèmes de coordonnées</p>
</li>
<li><p class="first">l&#8217;utilisation du paramètre CRS (à la place de SRS)</p>
</li>
</ul>
<p>L&#8217;ordre des axes dans les versions précédentes des spécifications WMS était de toujours utiliser l&#8217;abscisse (x ou lon ) et l&#8217;ordonnée (y ou lat).  Le WMS 1.3.0 spécifie qu&#8217;en fonction d&#8217;un CRS particulier, l&#8217;axe x pourra ou non être orienté Ouest-Est, et que l&#8217;axe y pourra ou non être orienté Sud-Nord. L&#8217;opération de représentation WMS doit s&#8217;appliquer pour l&#8217;ordre des axes. Cela affecte certains des codes EPSG qui était couramment utilisé comme EPSG:4326.  MapServer 5.x s&#8217;assure que les coordonnées passées au serveur (comme un partie du paramètre BBOX de GetMap) ainsi celles qui sont renvoyées dans le document des &#8220;capabilities&#8221; reflète l&#8217;inversion des ordres des axes pour les codes EPSG entre 4000 et 5000.</p>
<p>MapServer 6.0 et supérieur contient une liste des codes epsg ayant un ordre des axes inversés. Il est actuellement basé sur la base de données EPSG version 7.6. Il est aussi possible de définir l&#8217;ordre des axes à la compilation pour un code EPSG spécifique (voir #3582). Cela permet par exemple d&#8217;utiliser l&#8217;ordre &#8220;normal&#8221; des axes pour certains des codes EPSG entre 4000 and 5000.</p>
<p>En plus, le WMS 1.3.0 définit une série de nouveaux systèmes de coordonnées. Voici ceux qui, pour le moment, sont supportés dans MapServer:</p>
<ul class="simple">
<li><p class="first">CRS:84 (longitude-latitude WGS 84)</p>
</li>
<li><p class="first">CRS:83 (longitude-latitude NAD83)</p>
</li>
<li><p class="first">CRS:27 (longitude-latitude NAD27)</p>
</li>
<li>AUTO2:420001 (WGS 84 / Auto UTM )</li>
<li>AUTO2:420002 (WGS 84 / Auto Tr. Mercator)</li>
<li>AUTO2:420003 (WGS 84 / Auto Orthographic)</li>
<li>AUTO2:420004 (WGS 84 / Auto Equirectangular)</li>
<li>AUTO2:420005 (WGS 84 / Auto Mollweide)</li>
</ul>
</div>
<div class="section" id="example-of-requests">
<h3>Exemples de requêtes<a class="headerlink" href="#example-of-requests" title="Lien permanent vers ce titre">¶</a></h3>
<p>Les utilisateurs peuvent utiliser le système de coordonnées CRS:84 et demander les coordonnées de la BBOX comme long/lat:</p>
<ul class="simple">
<li>...&amp;CRS=CRS:84&amp;BBOX=-180.0,-90.0,180.0,90.0&amp;... <a class="reference external" href="http://demo.mapserver.org/cgi-bin/wms?SERVICE=WMS&amp;VERSION=1.3.0&amp;REQUEST=GetMap&amp;BBOX=-180,-90,180,90&amp;CRS=CRS:84&amp;WIDTH=953&amp;HEIGHT=480&amp;LAYERS=bluemarble,cities&amp;STYLES=,&amp;FORMAT=image/png&amp;DPI=96&amp;TRANSPARENT=true">(example request)</a></li>
</ul>
<p>Les utilisateurs peuvent aussi utiliser les cooordonnées EPSG:4326 et demander l&#8217;ordre des axes avec lat/long</p>
<ul class="simple">
<li><p class="first">...&amp;EPSG:4326&amp;BBOX=-90.0,-180.0,90,180.0&amp;... <a class="reference external" href="http://demo.mapserver.org/cgi-bin/wms?SERVICE=WMS&amp;VERSION=1.3.0&amp;REQUEST=GetMap&amp;BBOX=-90,-180,90,180&amp;CRS=EPSG:4326&amp;WIDTH=953&amp;HEIGHT=480&amp;LAYERS=bluemarble,cities&amp;STYLES=,&amp;FORMAT=image/png&amp;DPI=96&amp;TRANSPARENT=true">(requête exemple)</a></p>
</li>
</ul>
</div>
<div class="section" id="other-notable-changes">
<h3>Autres changements notables<a class="headerlink" href="#other-notable-changes" title="Lien permanent vers ce titre">¶</a></h3>
<ul class="simple">
<li><p class="first">les valeurs valides pour le paramètre EXCEPTIONS dans une requête GetMap sont XML, INIMAGE, BLANK</p>
</li>
<li><p class="first">la valeur valide pour le paramètre EXCEPTIONS dans une requête GetFeatureInfo est XML</p>
</li>
<li><p class="first">Le paramètre &#8220;LayerLimit&#8221; est introduit, permettant à un serveur d&#8217;afficher et limiter le nombre de couches qu&#8217;un client est autorisé à appelé dans une requête GetMap</p>
</li>
</ul>
</div>
<div class="section" id="some-missing-features">
<h3>Quelque fonctionnalités manquantes<a class="headerlink" href="#some-missing-features" title="Lien permanent vers ce titre">¶</a></h3>
<ul class="simple">
<li><p class="first">Une requête Post WMS 1.3.0 doit être un document XML contenant les différentes opérations et les différents paramètres.</p>
</li>
<li><p class="first">Les documents SLD contenant des éléments provenant de la spécification Feature Encoding 1.1 peuvent potentiellement utiliser des projections ESPG avec quelques filtres. Il n&#8217;est pas encore bien claire ni même implémenté si l&#8217;ordre des axes doit être pris en compte dans ces cas spécifiques.</p>
</li>
</ul>
</div>
<div class="section" id="ocg-compliance-tests">
<h3>Tests de conformité OGC<a class="headerlink" href="#ocg-compliance-tests" title="Lien permanent vers ce titre">¶</a></h3>
<p>A partir de la version 5.4, MapServer passe tous les tests basiques et d&#8217;interrogation de la suite de test OGC CITE pour le WMS 1.3.0.</p>
</div>
</div>
<div class="section" id="reference-section">
<span id="index-14"></span><h2><a class="toc-backref" href="#table-of-contents">Section de référence</a><a class="headerlink" href="#reference-section" title="Lien permanent vers ce titre">¶</a></h2>
<p>Les métadonnées suivantes sont disponibles dans la configuration du mapfile</p>
<p>(Notez que chacune des métadonnées ci-dessous peut aussi être renseignée comme &#8216;ows_*&#8217; au lieu de &#8216;wms_*&#8217;. MapServer essaye la métadonnée &#8216;wms_*&#8217; en premier, et s&#8217;il ne la trouve pas, essaye le nom &#8216;ows_*&#8217; correspondant. Utiliser ce foctionnement permet de réduire la quantité de duplication dans les mapfiles qui supporte des interfaces OGC multiples comme les métadonnées &#8220;ows_*&#8221; peuvent être utilisées partout pour les objets métadonnées communs, partagés par les interfaces OGC multiples.)</p>
<div class="section" id="web-object-metadata">
<span id="index-15"></span><h3>Objet Metadata de l&#8217;objet Web<a class="headerlink" href="#web-object-metadata" title="Lien permanent vers ce titre">¶</a></h3>
<span class="target" id="index-16"></span><p id="index-17"><strong>ows_allowed_ip_list</strong> (or wms_allowed_ip_list)</p>
<ul>
<li><p class="first"><em>Description:</em> (Optional) A list of IP addresses that will be
allowed access to the service.</p>
<p>Example:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>METADATA
  &quot;ows_allowed_ip_list&quot; &quot;123.45.67.89 11.22.33.44&quot;
END
</pre></div>
</div>
</li>
</ul>
<span class="target" id="index-18"></span><p id="index-19"><strong>ows_denied_ip_list</strong>  (or wms_denied_ip_list)</p>
<ul>
<li><p class="first"><em>Description:</em> (Optional) A list of IP addresses that will be denied
access to the service.</p>
<p>Example:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>METADATA
  &quot;ows_denied_ip_list&quot; &quot;123.45.67.89 11.22.33.44&quot;
END
</pre></div>
</div>
</li>
</ul>
<p id="index-20"><strong>ows_http_max_age</strong></p>
<ul class="simple">
<li><p class="first"><em>Description:</em> (Optionnelle) Un entier (en seconds) pour spécifier combien de temps une réponse de carte doit être considérée comme nouvelle. Définir cette directive permet aux clients WMS avertis d&#8217;utiliser la valeur de l&#8217;en-tête HTTP résultant comme moyen d&#8217;optimiser (et diminuer) les requêtes au serveur WMS. Plus d&#8217;informations sont disponibles sur <a class="reference external" href="http://www.mnot.net/cache_docs/#CACHE-CONTROL">http://www.mnot.net/cache_docs/#CACHE-CONTROL</a></p>
</li>
</ul>
<p id="index-21"><strong>ows_schemas_location</strong></p>
<ul class="simple">
<li><em>Description:</em> (Optional) (Note the name ows_schemas_location and
not wms_... this is because all OGC Web Services (OWS) use the same
metadata) Root of the web tree where the family of OGC WMS XMLSchema
files are located. This must be a valid URL where the actual .xsd
files are located if you want your WMS output to validate in a
validating XML parser. Default is <a class="reference external" href="http://schemas.opengis.net">http://schemas.opengis.net</a>.</li>
</ul>
<span class="target" id="index-22"></span><p id="index-23"><strong>ows_sld_enabled</strong></p>
<ul class="simple">
<li><p class="first"><em>Description:</em> (Optionnelle) Une valeur (true ou false) qui, quand elle est définie à &#8220;false&#8221;, ignorera les paramètres SLD et SLD_BODY afin de désactiver le stylage distant des couches WMS.  Aussi, SLD n&#8217;est pas affiché dans les &#8220;Capabilities&#8221; WMS par conséquent</p>
</li>
</ul>
<p><strong>ows_updatesequence</strong></p>
<ul class="simple">
<li><p class="first"><em>Description:</em> (Optionnelle) Le paramètre updateSequence peut être utilisé pour maintenir la consistance dun cache client des contenus étant dans un document de service de métadonnée. La valeur du paramètre peut être un entier, un timestamp en format [ISO 8601:2000], ou n&#8217;importe quel autre nombre ou chaîne de caractères.</p>
</li>
</ul>
<p id="index-24"><strong>wms_abstract</strong></p>
<ul class="simple">
<li><p class="first"><em>Nom du TAG WMS:</em> Abstract (WMS1.1.1, sect. 7.1.4.2)</p>
</li>
<li><p class="first"><em>Description:</em> (Optionnelle) Un texte de présentation fournissant plus d&#8217;informations sur le serveur WMS</p>
</li>
</ul>
<p id="index-25"><strong>wms_accessconstraints</strong></p>
<ul class="simple">
<li><p class="first"><em>Nom du TAG WMS:</em> AccessConstraints (WMS1.1.1, sect. 7.1.4.2)</p>
</li>
<li><p class="first"><em>Description:</em> (Optionnelle) Informations de contraintes d&#8217;accès . Utilise le mot-clé réservé &#8220;none&#8221; si il n&#8217;y a pas de contraintes d&#8217;accès définies.</p>
</li>
</ul>
<span class="target" id="index-26"></span><span class="target" id="index-27"></span><span class="target" id="index-28"></span><span class="target" id="index-29"></span><span class="target" id="index-30"></span><p id="index-31"><strong>wms_addresstype, wms_address, wms_city, wms_stateorprovince,
wms_postcode, wms_country</strong></p>
<ul class="simple">
<li><p class="first"><em>Nom du TAG WMS:</em> ContactAddress et family (WMS1.1.1, sect. 7.1.4.2)</p>
</li>
<li><p class="first"><em>Description :</em> Information d&#8217;adresse de contact, optionnelle. Si fournie, alors les six éléments de métadonnées sont requis.</p>
</li>
</ul>
<p id="index-32"><strong>wms_attribution_logourl_format</strong></p>
<ul class="simple">
<li><p class="first"><em>Description:</em> (Optionnelle) Le type MIME de l&#8217;image du logo (par exemple &#8220;image/png&#8221;).. Notez que les autres métadonnées wms_attribution_logourl_* doivent être spécifiées.</p>
</li>
<li><p class="first">Se réfèrer à la section 7.1.4.5.11 de la spécification WMS 1.1.1.</p>
</li>
</ul>
<p id="index-33"><strong>wms_attribution_logourl_height</strong></p>
<ul class="simple">
<li><p class="first"><em>Description:</em> (Optionnelle) Hauteur de l&#8217;image du logo en pixels. Notez que les autres métadonnées wms_attribution_logourl_* doivent être spécifiées.</p>
</li>
<li><p class="first">Se réfèrer à la section 7.1.4.5.11 de la spécification WMS 1.1.1.</p>
</li>
</ul>
<p id="index-34"><strong>wms_attribution_logourl_href</strong></p>
<ul class="simple">
<li><p class="first"><em>Description:</em> (Optionnelle) URL de l&#8217;image du logo. Notez que les autres métadonnées wms_attribution_logourl_* doivent être spécifiées.</p>
</li>
<li><p class="first">Se réfèrer à la section 7.1.4.5.11 de la spécification WMS 1.1.1.</p>
</li>
</ul>
<p id="index-35"><strong>wms_attribution_logourl_width</strong></p>
<ul class="simple">
<li><p class="first"><em>Description:</em> (Optionnelle) Largeur de l&#8217;image du logo en pixels. Notez que les autres métadonnées wms_attribution_logourl_* doivent être spécifiées.</p>
</li>
<li><p class="first">Se réfèrer à la section 7.1.4.5.11 de la spécification WMS 1.1.1.</p>
</li>
</ul>
<p id="index-36"><strong>wms_attribution_onlineresource</strong></p>
<ul class="simple">
<li><p class="first"><em>Description:</em> (Optional) l&#8217;URL du fournisseur de données.</p>
</li>
<li><p class="first">Se réfèrer à la section 7.1.4.5.11 de la spécification WMS 1.1.1.</p>
</li>
</ul>
<p id="index-37"><strong>wms_attribution_title</strong></p>
<ul>
<li><dl class="first docutils">
<dt><em>Description:</em> (Optionnelle) Chaîne lisible par les hommes pour nommer le fournisseur de données</dt>
<dd><p class="first last">provider.</p>
</dd>
</dl>
</li>
<li><p class="first">Se réfèrer à la section 7.1.4.5.11 de la spécification WMS 1.1.1.</p>
</li>
</ul>
<p id="index-38"><strong>wms_bbox_extended:</strong></p>
<ul class="simple">
<li><p class="first"><em>Description:</em> (Optionnelle) &#8220;true&#8221; ou &#8220;false&#8221;.  Si &#8220;true&#8221;, les rectangles englobants sont renvoyés pour tous les SRS / CRS supportés du document de &#8220;capabilities&#8221; .  Si &#8220;false&#8221;, seul le rectangle englobant du premier SRS / CRS est retourné.</p>
</li>
<li><p class="first">Introduit en version 6.0.</p>
</li>
</ul>
<p id="index-39"><strong>wms_contactelectronicmailaddress</strong></p>
<ul>
<li><dl class="first docutils">
<dt><em>Nom du TAG WMS:</em> ContactElectronicMailAddress (WMS1.1.1,</dt>
<dd><p class="first last">sect. 7.1.4.2)</p>
</dd>
</dl>
</li>
<li><p class="first"><em>Description :</em> Adresse mail de contact, optionnelle.</p>
</li>
</ul>
<p id="index-40"><strong>wms_contactfacsimiletelephone</strong></p>
<ul class="simple">
<li><p class="first"><em>Nom du TAG WMS:</em> ContactFacsimileTelephone (WMS1.1.1, sect. 7.1.4.2)</p>
</li>
<li><p class="first"><em>Description :</em> Numéro de téléphone du fax du contact, optionnel.</p>
</li>
</ul>
<span class="target" id="index-41"></span><span class="target" id="index-42"></span><p id="index-43"><strong>wms_contactperson, wms_contactorganization, wms_contactposition</strong></p>
<ul class="simple">
<li><p class="first"><em>Nom du TAG WMS:</em> ContactInformation, ContactPerson, ContactOrganization, ContactPosition (WMS1.1.1, sect. 7.1.4.2)</p>
</li>
<li><p class="first"><em>Description :</em> Information de contact, optionnelle. Si définie, alors les trois éléments de métadonnées sont requis.</p>
</li>
</ul>
<p id="index-44"><strong>wms_contactvoicetelephone</strong></p>
<ul class="simple">
<li><p class="first"><em>Nom du TAG WMS:</em> ContactVoiceTelephone (WMS1.1.1, sect. 7.1.4.2)</p>
</li>
<li><p class="first"><em>Description :</em> Numéro de téléphone pour contact audio, optionnel.</p>
</li>
</ul>
<p id="index-45"><strong>wms_enable_request</strong> (ou <strong>ows_enable_request</strong>)</p>
<ul>
<li><p class="first"><em>Description:</em> Liste séparée par des espaces des requêtes à activer. Par défaut, la valeur est &#8220;none&#8221;. Les requêtes suivantes peuvent être activées: <cite>GetCapabilities</cite>, <cite>GetMap</cite>, <cite>GetFeatureInfo</cite> et <cite>GetLegendGraphic</cite>.  Un &#8221;!&#8221; juste avant le nom de la requête désactivera la requête. &#8220;*&#8221; permet d&#8217;avoit toutes les requêtes activées.</p>
</li>
<li><p class="first"><em>Exemples :</em></p>
<p>Pour permettre d&#8217;utiliser seulement <cite>GetMap</cite> et <cite>GetFeatureInfo</cite>:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="s2">&quot;wms_enable_request&quot;</span> <span class="s2">&quot;GetMap GetFeatureInfo&quot;</span>
</pre></div>
</div>
<p>Pour permettre toutes les requêtes sauf <cite>GetFeatureInfo</cite></p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="s2">&quot;wms_enable_request&quot;</span> <span class="s2">&quot;* !GetFeatureInfo&quot;</span>
</pre></div>
</div>
</li>
</ul>
<p id="index-46"><strong>wms_encoding</strong></p>
<ul class="simple">
<li><p class="first"><em>Nom du TAG WMS:</em> Encoding</p>
</li>
<li><p class="first"><em>Description:</em> Type de l&#8217;encodage des &#8220;capabilities&#8221; optionnel. Celui par défaut est ISO-8859-1.</p>
</li>
</ul>
<p id="index-47"><strong>wms_feature_info_mime_type</strong></p>
<ul>
<li><p class="first"><em>Nom du TAG WMS:</em> Feature_info_mime_type</p>
</li>
<li><p class="first"><em>Description:</em></p>
<ul>
<li><p class="first">Utilisé pour spécifier un type MIME supplémentaire qui peut être utilisé quand le serveur répond à la requête GetFeature.</p>
<p>Par exemple si vous voulez utiliser le template HTML de la couche comme une base pour votre réponse, voius devez ajouter &#8220;WMS_FEATURE_INFO_MIME_TYPE&#8221; &#8220;text/html&#8221;.  Faire cette configuration aura pour effet d&#8217;indiquer text/html comme l&#8217;un des types MIME supporté pour une requête GetFeature. Vous devez aussi vous assurer que la couche pointe vers un template html valide (voir <a class="reference internal" href="../mapfile/template.html#template"><span>Templating</span></a>).  Le client peut alors appeler le serveur avec INFO_FORMAT=text/html.</p>
</li>
<li><p class="first">Si non spécifié, MapServer par défaut a text/plain et GML implémentés.</p>
</li>
</ul>
</li>
</ul>
<p id="index-48"><strong>wms_fees</strong></p>
<ul class="simple">
<li><p class="first"><em>Nom du TAG WMS:</em> Fees (WMS1.1.1, sect. 7.1.4.2)</p>
</li>
<li><p class="first"><em>Description:</em> (Optionnelle) Informations de frais. Utiliser le mot clé réservé &#8220;none&#8221; s&#8217;il n&#8217;y a pas de frais.</p>
</li>
</ul>
<p id="index-49"><strong>wms_getcapabilities_version</strong></p>
<ul class="simple">
<li><p class="first"><em>Description:</em> (Optionnelle) Version par défaut à utiliser pour les requêtes GetCapabilities qui n&#8217;ont pas de paramètre de version.  Si il est non défini, la version la plus récente supportée sera retournée.</p>
</li>
</ul>
<p id="index-50"><strong>wms_getlegendgraphic_formatlist</strong></p>
<ul class="simple">
<li><p class="first"><em>Description:</em> (Optionnelle) Une liste séparée par des virgules de formats valides pour une requête GetLegendGraphic WMS</p>
</li>
</ul>
<p id="index-51"><strong>wms_getmap_formatlist</strong></p>
<ul class="simple">
<li><p class="first"><em>Description:</em> (Optionnelle) Une liste séparée par des virgules de formats valides pour une requête GetMap WMS</p>
</li>
</ul>
<p id="index-52"><strong>wms_keywordlist</strong></p>
<ul class="simple">
<li><p class="first"><em>Nom du TAG WMS:</em> KeywordList (WMS1.1.1, sect. 7.1.4.2)</p>
</li>
<li><p class="first"><em>Description:</em> (Optionnelle) Une liste séparée par des virgules des mots clés ou phrases clés pour aider la recherche du catalogue. A partir du WMS 1.1.0, aucun vocabulaire controllé n&#8217;a été défini.</p>
</li>
</ul>
<p id="index-53"><strong>wms_keywordlist_vocabulary</strong></p>
<ul class="simple">
<li><p class="first"><em>Nom de l&#8217;attribut WMS:</em> vocabulaire de KeywordList -&gt; Keyword</p>
</li>
<li><p class="first"><em>Description:</em> (Optionnelle) Nom du vocabulaire utilisé dans <strong>wms_keywordlist_[nom_du_vocabulaire]_items</strong> comme décrit ci-dessous.</p>
</li>
</ul>
<p id="index-54"><strong>wms_keywordlist_[nom_du_vocabulaire]_items</strong></p>
<ul class="simple">
<li><p class="first"><em>Nom du TAG WMS:</em> KeywordList -&gt; Keyword</p>
</li>
<li><p class="first"><em>Description:</em> (Optionnelle) Une liste séparée par des virgules des mots clés ou phrases clés pour aider la recherche du catalogue pour un vocabulaire donné.</p>
</li>
</ul>
<p id="index-55"><strong>wms_languages</strong></p>
<ul class="simple">
<li><p class="first"><em>Description:</em> (Optionnelle) Une liste séparée par des virgules des languages supportés. Pour plus de détails, merci de vous référez à la section <a class="reference internal" href="inspire.html#inspire-multi-language-support"><span>Support multi-langues pour certains champs des &#8220;capabilities&#8221;</span></a> dans la documentation du service de vue INSPIRE.</p>
</li>
</ul>
<p id="index-56"><strong>wms_layerlimit</strong></p>
<ul class="simple">
<li><p class="first"><em>Nom du TAG WMS:</em> LayerLimit (WMS1.3.0, sect. 7.2.4.3)</p>
</li>
<li><p class="first"><em>Description:</em> (Optionnelle) Le nombre maximum de couches qu&#8217;un client WMS peut spécifier dans une requête GetMap. Si non défini, alors pas de limites n&#8217;est imposée.</p>
</li>
</ul>
<p id="index-57"><strong>wms_onlineresource</strong></p>
<ul>
<li><p class="first"><em>Nom du TAG WMS:</em> OnlineResource (WMS1.1.1, sect. 6.2.2)</p>
</li>
<li><p class="first"><em>Description:</em> (Recommandé) L&#8217;URL qui sera utilisée pour accéder au serveur WMS. Cette valeur est utilisée dans la réponse &#8220;GetCapabilities&#8221;.</p>
<div class="admonition seealso">
<p class="first admonition-title">Voir aussi</p>
<p class="last">Voir aussi la section &#8220;Configurer votre Mapfile / métadonnée wms_onlineresource et &#8220;Plus sur les URL Online Resource&#8221; ci-dessus.</p>
</div>
</li>
</ul>
<p id="index-58"><strong>wms_remote_sld_max_bytes</strong></p>
<ul class="simple">
<li><em>Description:</em> (Optional) Maximum size in bytes authorized when fetching
a remote SLD through http. Defaults to 1 MegaByte (1048596).</li>
</ul>
<span class="target" id="index-59"></span><p id="index-60"><strong>wms_resx, wms_resy</strong></p>
<ul class="simple">
<li><p class="first"><em>Nom du TAG WMS:</em> BoundingBox (WMS1.1.1, sect. 6.5.6)</p>
</li>
<li><p class="first"><em>Description:</em> (Optionnelle) Uitlisée dans le tag BoundingBox pour fournir des informations sur la résolution spatiale de la donnée, les valeurs sont dans l&#8217;unité de la projection de la carte.</p>
</li>
</ul>
<p id="index-61"><strong>wms_rootlayer_abstract</strong></p>
<ul class="simple">
<li><p class="first"><em>Nom du TAG WMS:</em> Abstract (WMS1.1.1, sect. 7.1.4.2)</p>
</li>
<li><p class="first"><em>Description:</em> (Optionnelle) Identique à wms_abstract, appliqué à l&#8217;élément racine de la couche.  S&#8217;il n&#8217;est pas défini, alors wms_abstract sera utilisé.</p>
</li>
</ul>
<p id="index-62"><strong>wms_rootlayer_keywordlist</strong></p>
<ul class="simple">
<li><p class="first"><em>Nom du TAG WMS:</em> KeywordList (WMS1.1.1, sect. 7.1.4.2)</p>
</li>
<li><p class="first"><em>Description:</em> (Optionnelle) Identique à wms_keywordlist, appliqué à l&#8217;élément racine de la couche.  S&#8217;il n&#8217;est pas défini, alors wms_keywordlist sera utilisé.</p>
</li>
</ul>
<p id="index-63"><strong>wms_rootlayer_title</strong></p>
<ul class="simple">
<li><p class="first"><em>Nom du TAG WMS:</em> Title (WMS1.1.1, sect. 7.1.4.1)</p>
</li>
<li><p class="first"><em>Description:</em> (Optionnelle) Identique à wms_title, appliqué à l&#8217;élément racine de la couche.  S&#8217;il n&#8217;est pas défini, alors wms_title sera utilisé.</p>
</li>
</ul>
<p id="index-64"><strong>wms_service_onlineresource</strong></p>
<ul>
<li><p class="first"><em>Description:</em> (Optionnelle) URL onlineresource de premier niveau. MapServer utilise la métadonnée onlineresource (si fournie) dans l&#8217;ordre suivant:</p>
<ol class="arabic simple">
<li>wms_service_onlineresource</li>
<li>ows_service_onlineresource</li>
</ol>
<p>3. wms_onlineresource (or automatically generated URL, see the
onlineresource section of this document)</p>
</li>
</ul>
<p id="index-65"><strong>wms_srs</strong></p>
<ul class="simple">
<li><p class="first"><em>Nom du TAG WMS:</em> SRS (WMS1.1.1, sect. 6.5.5)</p>
</li>
<li><p class="first"><em>Description:</em> (Recommandé) Contient une liste des codes de projection EPSG qui doivent être indiquer comme disponibles pour toutes les couches dans le serveur. La valeur peut contenir une ou plusieurs paires d&#8217;EPSG:&lt;code&gt; séparés par des espaces (par exemple &#8220;EPSG:4269 EPSG:4326&#8221;) Cette valeur devrait être mise en majuscule (EPSG:42304.....et non epsg:42304) pour éviter les problèmes liés aux plates-formes sensibles à la casse.</p>
</li>
<li><p class="first">Voir aussi la section &#8220;Configurer votre Mapfile / PROJECTION de l&#8217;objet MAP et métadonnée wms_srs&#8221; ci-dessus.</p>
</li>
</ul>
<p id="index-66"><strong>wms_timeformat</strong></p>
<ul class="simple">
<li><p class="first"><em>Description:</em> Le format de temps à utiliser quand une requête est envoyée. (par exemple &#8220;wms_timeformat&#8221; &#8220;%Y-%m-%d %H, %Y-%m-%d %H:%M&#8221;). Merci de voir le <a class="reference internal" href="wms_time.html#wms-time"><span>guide du support WMS Time</span></a> pour plus d&#8217;informations.</p>
</li>
</ul>
<p id="index-67"><strong>wms_title</strong></p>
<ul class="simple">
<li><p class="first"><em>Nom du TAG WMS:</em> Title (WMS1.1.1, sect. 7.1.4.1)</p>
</li>
<li><p class="first"><em>Description:</em> (Requise) Un nom lisible par les hommes pour cette couche.</p>
</li>
</ul>
</div>
<div class="section" id="layer-object-metadata">
<span id="index-68"></span><h3>Objet Metadata de l&#8217;objet Layer<a class="headerlink" href="#layer-object-metadata" title="Lien permanent vers ce titre">¶</a></h3>
<p id="index-69"><strong>gml_exclude_items</strong></p>
<ul>
<li><p class="first"><em>Description:</em> (Optionnelle, s&#8217;applique seulement aux requête GML GetFeatureInfo) Une liste séparée par des virgules d&#8217;éléments à exclure. Depuis MapServer 4.6, vous pouvez contrôler combien d&#8217;attributs (champs) vous exposez pour votre couche de données, avec cette métadonnée. Le comportement antérieur était simplement d&#8217;exposer tous les attributs dans tous les cas. Un exemple excluant un champ spécifique pourrait être:</p>
<div class="highlight-mapfile"><div class="highlight"><pre><span></span><span class="s">&quot;gml_include_items&quot;</span> <span class="s">&quot;all&quot;</span>
<span class="s">&quot;gml_exclude_items&quot;</span> <span class="s">&quot;Phonenum&quot;</span>
</pre></div>
</div>
</li>
</ul>
<p id="index-70"><strong>gml_geometries</strong></p>
<ul class="simple">
<li><p class="first"><em>Description:</em> (Optionnelle, s&#8217;applique seulement aux requête GML GetFeatureInfo) Fournit un nom pour les éléments de géométrie.  La valeur est spécifiée comme une chaîne à utiliser pour les noms de l&#8217;élement de géométrie. Par défaut, les géométries GML ne sont pas écrites dans la sortie GetFeatureInfo GML, à moins que gml_geometries et gml_[nom_de_la_géométrie]_type ne soient tous les deux définis.  Par défaut, seul le rectangle englobant est écrit. Si gml_geometries est défini à &#8220;none&#8221;, ni le rectangel englobant ni la géométrie ne sont écrits.</p>
</li>
</ul>
<p id="index-71"><strong>gml_groups</strong></p>
<ul class="simple">
<li><p class="first"><em>Description:</em> (Optionnelle, s&#8217;applique seulement aux requête GML GetFeatureInfo) Une liste séparée par des virgules de noms de groupes pour cette couche.</p>
</li>
</ul>
<p id="index-72"><strong>gml_[nom_du_groupe]_group</strong></p>
<ul>
<li><p class="first"><em>Description:</em> (Optionnelle, s&#8217;applique seulement aux requête GML GetFeatureInfo) Une liste séparée par des virgules d&#8217;attributs dans le groupe.  Voici un exemple:</p>
<div class="highlight-mapfile"><div class="highlight"><pre><span></span><span class="s">&quot;gml_include_items&quot;</span> <span class="s">&quot;all&quot;</span>
<span class="s">&quot;gml_groups&quot;</span>        <span class="s">&quot;display&quot;</span>
<span class="s">&quot;gml_display_group&quot;</span> <span class="s">&quot;Name_e,Name_f&quot;</span>
</pre></div>
</div>
</li>
</ul>
<p id="index-73"><strong>gml_include_items</strong></p>
<ul>
<li><p class="first"><em>Description:</em> (Optionnelle, s&#8217;applique seulement aux requête GML GetFeatureInfo) Une liste séparée par des virgules d&#8217;éléments à inclure, ou le mot-clé &#8220;all&#8221;. Depuis MapServer 4.6, vous pouvez contrôler combien d&#8217;attributs (champs) vous exposez pour votre couche de données, avec cette métadonnée. Le comportement antérieur était simplement d&#8217;exposer tous les attributs dans tous les cas. Vous pouvez permettre une exposition complète des champs en utilisant le mot-clé &#8220;all&#8221;, comme ceci:</p>
<div class="highlight-mapfile"><div class="highlight"><pre><span></span><span class="s">&quot;gml_include_items&quot;</span> <span class="s">&quot;all&quot;</span>
</pre></div>
</div>
<p>Vous pouvez spécifier une liste d&#8217;attributs (champs) pour une exposition partielle, comme suivant :</p>
<div class="highlight-mapfile"><div class="highlight"><pre><span></span><span class="s">&quot;gml_include_items&quot;</span> <span class="s">&quot;Name,ID&quot;</span>
</pre></div>
</div>
<p>Le nouveau comportement par défaut est ne pas exposer d&#8217;attributs du tout.</p>
</li>
</ul>
<p id="index-74"><strong>gml_[nom de l&#8217;élément]_alias</strong></p>
<ul>
<li><p class="first"><em>Description:</em> (Optionnelle, s&#8217;applique seulement aux requête GML GetFeatureInfo) Un alias pour un nom d&#8217;attributs. Le GML servi se réfèrera à cet attribut par son alias. Voici un example:</p>
<div class="highlight-mapfile"><div class="highlight"><pre><span></span><span class="s">&quot;gml_province_alias&quot;</span> <span class="s">&quot;prov&quot;</span>
</pre></div>
</div>
</li>
</ul>
<p id="index-75"><strong>gml_[nom de l&#8217;élément]_type</strong></p>
<ul class="simple">
<li><em>Description:</em> (Optional)
Specifies the type of the attribute.  Valid values are the OGR data
types: Integer|Real|Character|Date|Boolean.  Mapserver translates
these to valid GML data types.</li>
</ul>
<p id="index-76"><strong>gml_[nom_de_la_géométrie]_type</strong></p>
<ul class="simple">
<li><p class="first"><em>Description:</em> (Optionnelle, s&#8217;applique seulement aux requête GML GetFeatureInfo) Quand gml_geometries est employé, il est aussi nécessaire de spécifier le type de géométrie de la couche.  Cela peut être réalisé en fournissant une valeur pour gml_[nom_de_la_géométrie]_type, où [nom_de_la_géométrie] est une valeur de chaîne spécifiée pour gml_geometries, et une valeur qui est parmi celles-ci:</p>
<ul>
<li>point</li>
<li>multipoint</li>
<li>line</li>
<li>multiline</li>
<li>polygon</li>
<li>multipolygon</li>
</ul>
</li>
</ul>
<p id="index-77"><strong>gml_xml_items</strong></p>
<ul class="simple">
<li><p class="first"><em>Description:</em> (Optionnelle, s&#8217;applique seulement aux requête GML GetFeatureInfo). Une liste séparée par des virgules de champs à qui ne doivent pas être en XML encodé.</p>
</li>
</ul>
<dl class="docutils" id="index-78">
<dt><strong>ows_allowed_ip_list</strong></dt>
<dd>Same as ows_allowed_ip_list in the Web Object.</dd>
</dl>
<dl class="docutils" id="index-79">
<dt><strong>ows_denied_ip_list</strong></dt>
<dd>Same as ows_denied_ip_list in the Web Object.</dd>
</dl>
<dl class="docutils" id="index-80">
<dt><strong>wms_abstract</strong></dt>
<dd><p class="first last">Identique à wms_abstract dans l&#8217;objet WEB.</p>
</dd>
</dl>
<p id="index-81"><strong>wms_attribution_logourl_format</strong></p>
<ul class="simple">
<li><p class="first"><em>Description:</em> (Optionnelle) Le type MIME de l&#8217;image du logo (par exemple &#8220;image/png&#8221;).. Notez que les autres métadonnées wms_attribution_logourl_* doivent être spécifiées.</p>
</li>
<li><p class="first">Se réfèrer à la section 7.1.4.5.11 de la spécification WMS 1.1.1.</p>
</li>
</ul>
<p id="index-82"><strong>wms_attribution_logourl_height</strong></p>
<ul class="simple">
<li><p class="first"><em>Description:</em> (Optionnelle) Hauteur de l&#8217;image du logo en pixels. Notez que les autres métadonnées wms_attribution_logourl_* doivent être spécifiées.</p>
</li>
<li><p class="first">Se réfèrer à la section 7.1.4.5.11 de la spécification WMS 1.1.1.</p>
</li>
</ul>
<p id="index-83"><strong>wms_attribution_logourl_href</strong></p>
<ul class="simple">
<li><p class="first"><em>Description:</em> (Optionnelle) URL de l&#8217;image du logo. Notez que les autres métadonnées wms_attribution_logourl_* doivent être spécifiées.</p>
</li>
<li><p class="first">Se réfèrer à la section 7.1.4.5.11 de la spécification WMS 1.1.1.</p>
</li>
</ul>
<p id="index-84"><strong>wms_attribution_logourl_width</strong></p>
<ul class="simple">
<li><p class="first"><em>Description:</em> (Optionnelle) Largeur de l&#8217;image du logo en pixels. Notez que les autres métadonnées wms_attribution_logourl_* doivent être spécifiées.</p>
</li>
<li><p class="first">Se réfèrer à la section 7.1.4.5.11 de la spécification WMS 1.1.1.</p>
</li>
</ul>
<p id="index-85"><strong>wms_attribution_onlineresource</strong></p>
<ul class="simple">
<li><p class="first"><em>Description:</em> (Optional) l&#8217;URL du fournisseur de données.</p>
</li>
<li><p class="first">Se réfèrer à la section 7.1.4.5.11 de la spécification WMS 1.1.1.</p>
</li>
</ul>
<p id="index-86"><strong>wms_attribution_title</strong></p>
<ul>
<li><dl class="first docutils">
<dt><em>Description:</em> (Optionnelle) Chaîne lisible par les hommes pour nommer le fournisseur de données</dt>
<dd><p class="first last">provider.</p>
</dd>
</dl>
</li>
<li><p class="first">Se réfèrer à la section 7.1.4.5.11 de la spécification WMS 1.1.1.</p>
</li>
</ul>
<span class="target" id="index-87"></span><p id="index-88"><strong>wms_authorityurl_name, wms_authorityurl_href</strong></p>
<ul class="simple">
<li><p class="first"><em>Description:</em> (Optionnelle) AuthorityURL est utilisé en tandem avec les points d&#8217;accès de Identifier pour fournir un moyen de lier l&#8217;information de l&#8217;identifiant à un service web.  Le paramètre wms_identifier_authority doit fournir un chaîne qui correspond à un wms_authorityurl_name déclaré. A la fois wms_authorityurl_name et wms_authorityurl_href doivent être présent pour qu&#8217;un tag AuthorityURL soit écrit dans les &#8220;capabilities&#8221;.</p>
</li>
<li><p class="first">Se réfèrer à la section 7.1.4.5.12 of the WMS 1.1.1 spec.</p>
</li>
</ul>
<p id="index-89"><strong>wms_bbox_extended:</strong></p>
<ul class="simple">
<li><p class="first"><em>Description:</em> (Optionnelle) &#8220;true&#8221; ou &#8220;false&#8221;.  Si &#8220;true&#8221;, les rectangles englobants sont renvoyés pour tous les SRS / CRS supportés du document de &#8220;capabilities&#8221; .  Si &#8220;false&#8221;, seul le rectangle englobant du premier SRS / CRS est retourné.</p>
</li>
<li><p class="first">Introduit en version 6.0.</p>
</li>
</ul>
<p id="index-90"><strong>wms_dataurl_format</strong></p>
<ul class="simple">
<li><p class="first"><em>Description:</em> (Optionnelle) Format de fichier non standardisé de la métadonnée. La métadonnée wms_dataurl_href de la couche doit aussi être spécifiée.</p>
</li>
<li><p class="first">Se réfèrer à la section 7.1.4.5.14 de la spécification WMS 1.1.1.</p>
</li>
</ul>
<p id="index-91"><strong>wms_dataurl_href</strong></p>
<ul class="simple">
<li><p class="first"><em>Description:</em> (Optionnelle) L&#8217;URL vers la métadonnée de la couche. La métadonnée wms_dataurl_format de la couche doit aussi être spécifiée.</p>
</li>
<li><p class="first">Se réfèrer à la section 7.1.4.5.14 de la spécification WMS 1.1.1.</p>
</li>
</ul>
<p id="index-92"><strong>wms_enable_request</strong> (ou <strong>ows_enable_request</strong>)</p>
<ul>
<li><p class="first"><em>Description:</em> Liste séparée par des espaces des requêtes à activer. Par défaut, la valeur est &#8220;none&#8221;. Les requêtes suivantes peuvent être activées: <cite>GetCapabilities</cite>, <cite>GetMap</cite>, <cite>GetFeatureInfo</cite> et <cite>GetLegendGraphic</cite>.  Un &#8221;!&#8221; juste avant le nom de la requête désactivera la requête. &#8220;*&#8221; permet d&#8217;avoit toutes les requêtes activées.</p>
</li>
<li><p class="first"><em>Exemples :</em></p>
<p>Pour permettre d&#8217;utiliser seulement <cite>GetMap</cite> et <cite>GetFeatureInfo</cite>:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="s2">&quot;wms_enable_request&quot;</span> <span class="s2">&quot;GetMap GetFeatureInfo&quot;</span>
</pre></div>
</div>
<p>Pour permettre toutes les requêtes sauf <cite>GetFeatureInfo</cite></p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="s2">&quot;wms_enable_request&quot;</span> <span class="s2">&quot;* !GetFeatureInfo&quot;</span>
</pre></div>
</div>
</li>
</ul>
<p id="index-93"><strong>wms_exclude_items</strong></p>
<ul>
<li><p class="first"><em>Description:</em> (Optionnelle, s&#8217;applique seulement aux requête text/plain GetFeatureInfo). Une liste séparée par des virgules de champs à exclude, ou le mot-clé &#8220;all&#8221;.</p>
<p>Voir gml_exclude_items ci-dessus.</p>
</li>
</ul>
<p id="index-94"><strong>wms_extent</strong></p>
<ul>
<li><p class="first"><em>Nom du TAG WMS:</em> BoundingBox (WMS1.1.1, sect. 6.5.6)</p>
</li>
<li><p class="first"><em>Description:</em> (Optionnelle) Utilisée pour le tag BoundingBox de la couche pour les cas où il est impossible (ou très inefficace) pour MapServer de deviner depuis la source de donnée son éténdue. La valeur pour cette métadonnée est &#8220;minx miny maxx maxy&#8221; séparée par des espaces, avec les valeurs dans l&#8217;unité de la projection de la couche.  Si wms_extent est fournit, alors il est prioritaire et MapServer n&#8217;essayera PAS de lire l&#8217;étendue du fichier source.</p>
<p>Pour les rasters servis via WMS, MapServer peut maintenant utiliser le paramètre de métadonnée wms_extent pour déclarer l&#8217;image. Si un fichier .wld ne peut être trouvé, MapServer regardera alors dans le paramètre de métadonnée wms_extent et utilisera l&#8217;étendue et la taille de l&#8217;image pour déclarer la position géographique.</p>
</li>
</ul>
<p id="index-95"><strong>wms_getfeatureinfo_formatlist</strong></p>
<ul class="simple">
<li><em>Description:</em> (Optional) Comma-separted list of formats that should
be valid for a GetFeatureInfo request.  If defined, only these
formats are advertised through in the Capabilities document.</li>
</ul>
<p id="index-96"><strong>wms_getlegendgraphic_formatlist</strong></p>
<ul class="simple">
<li><em>Description:</em> (Optional) Comma-separted list of image formats that
should be valid for a GetLegendGraphic request.  If defined, only
these formats are advertised through in the Capabilities document.</li>
</ul>
<p id="index-97"><strong>wms_getmap_formatlist</strong></p>
<ul class="simple">
<li><em>Description:</em> (Optional) Comma-separted list of image formats that
should be valid for a GetMap request.  If defined, only these formats
are advertised through in the Capabilities document.</li>
</ul>
<p id="index-98"><strong>wms_group_abstract</strong></p>
<ul class="simple">
<li><p class="first"><em>Description:</em> (Optionnelle) Un texte de présentation fournissant plus d&#8217;informations sur le groupe. Seule une seule couche pour le groupe nécessite de contenir  wms_group_abstract. MapServer trouvera et utilisera cette valeur. La valeur trouvée pour la première couche dans le groupe est celle utilisée. Ainsi, si de multiples couches ont un wms_group_abstract défini, alors seule la première valeur sera utilisée.</p>
</li>
</ul>
<p id="index-99"><strong>wms_group_title</strong></p>
<ul class="simple">
<li><p class="first"><em>Nom du TAG WMS:</em> Group_title (WMS1.1.1, section 7.1.4.1)</p>
</li>
<li><p class="first"><em>Description:</em> (Optionnelle) Un nom lisible par les hommes pour le groupe auxquel la couche appartient. Une seule une couche du groupe nécessite d&#8217;avoir le paramètre wms_group_title. MapServer trouvera et utilisera cette valeur. La valeur trouvée pour la première couche dans le groupe est celle utilisée. Ainsi, si de multiples couches ont un wms_group_title défini, alors seule la première valeur sera utilisée.</p>
</li>
</ul>
<span class="target" id="index-100"></span><p id="index-101"><strong>wms_identifier_authority, wms_identifier_value</strong></p>
<ul class="simple">
<li><p class="first"><em>Description:</em> (Optionnelle) Identifier est utilisé en tandem avec les points d&#8217;accès de AuthorityURL pour fournir un moyen de lier l&#8217;information de l&#8217;identifiant à un service web.  Le paramètre wms_identifier_authority doit fournir un chaîne qui correspond à un wms_authorityurl_name déclaré. A la fois wms_identifier_authority et wms_identifier_value doivent être présent pour qu&#8217;un tag Identifier soit écrit dans les &#8220;capabilities&#8221;.</p>
</li>
<li><p class="first">Se réfèrer à la section 7.1.4.5.12 of the WMS 1.1.1 spec.</p>
</li>
</ul>
<p id="index-102"><strong>wms_include_items</strong></p>
<ul>
<li><p class="first"><em>Description:</em> (Optionnelle, s&#8217;applique seulement aux requêtes text/plain de GetFeatureInfo) Une liste séparée par des virgules d&#8217;éléments à inclure, ou un mot-clé &#8220;all&#8221;.</p>
<p>Voir gml_include_items ci-dessus.</p>
</li>
</ul>
<dl class="docutils" id="index-103">
<dt><strong>wms_keywordlist</strong></dt>
<dd><p class="first last">Identique à wms_keywordlist dans l&#8217;objet WEB</p>
</dd>
</dl>
<dl class="docutils" id="index-104">
<dt><strong>wms_keywordlist_vocabulary</strong></dt>
<dd><p class="first last">Identique à wms_keywordlist_vocabulary dans l&#8217;objet WEB</p>
</dd>
</dl>
<dl class="docutils" id="index-105">
<dt><strong>wms_keywordlist_[nom_du_vocabulaire]_items</strong></dt>
<dd><p class="first last">Identique à wms_keywordlist_[nom_du_vocabulaire]_items dans l&#8217;objet WEB</p>
</dd>
</dl>
<p id="index-106"><strong>wms_layer_group</strong></p>
<ul>
<li><p class="first"><em>Description:</em> (Optionnelle) Peut être utilisé pour assigner une couche à un nombre hiérarchiquement imbriqués de groupes. Cette hiérarchie groupéee sera exprimée dans le &#8220;capabilities&#8221;.</p>
<p>WMS_LAYER_GROUP est différent du mot-clé GROUP par le fait qu&#8217;il ne publie pas forcément le nom du groupe dans le &#8220;capabilities&#8221; mais seulement le &#8220;title&#8221; est toujours publié. Si une couche avec le même nom que celui utilisé dans le WMS_LAYER_GROUP est trouvé, il est traité comme un groupe nommé et si aucune couche avec le même nom est trouvé en tant que groupe non nommé.</p>
<p>Comme conséquence, les groupes définis avec le WMS_LAYER_GROUP ne peuvent pas toujours être interrogés avec une requête GetMap ou GetFeatureInfo (voir la section 7.1.4.5.2 de la spécification de l&#8217;implémentation WMS version 1.1.1. (OGC 01-068r2)). Une autre différence iest que ce GROUP ne supporte pas l&#8217;imbrication de groupes. Le but de la configuration de la métadonnée est de rendre un client WMS conscient du groupement de couches.</p>
<p>Tous les noms de groupe doivent être précédés par un anti-slash (/). Il n&#8217;est pas autorisé d&#8217;utiliser à la fois la configuration WMS_LAYER_GROUP et un mot-clé GROUP pour une couche seule.</p>
<div class="highlight-mapfile"><div class="highlight"><pre><span></span><span class="k">LAYER</span>
  <span class="k">NAME</span> <span class="s">&quot;mylayer&quot;</span>
  <span class="k">DATA</span> <span class="s">&quot;mylayer&quot;</span>
  <span class="k">TYPE</span> <span class="nb">LINE</span>
  <span class="k">CLASS</span>
    <span class="k">STYLE</span>
      <span class="k">COLOR</span> <span class="mi">100</span> <span class="mi">100</span> <span class="mi">255</span>
    <span class="k">END</span>
  <span class="k">END</span>
  <span class="k">METADATA</span>
   <span class="s">&quot;WMS_LAYER_GROUP&quot;</span> <span class="s">&quot;/rootgroup/subgroup&quot;</span>
  <span class="k">END</span>
<span class="k">END</span>
</pre></div>
</div>
</li>
</ul>
<p id="index-107"><strong>wms_metadataurl_format</strong></p>
<ul class="simple">
<li><p class="first"><em>Description:</em> (Optionnelle) Le type MIME du format de fichier de l&#8217;enregistrement de métadonnée (c&#8217;est à dire. &#8220;text/plain&#8221;). Les métadonnées metadata wms_metadataurl_type et wms_metadataurl_href de la couche doivent aussi être spécifiées.</p>
</li>
<li><p class="first">Se réfèrer à la section 7.1.4.5.10 de la spécification WMS 1.1.1.</p>
</li>
</ul>
<p id="index-108"><strong>wms_metadataurl_href</strong></p>
<ul class="simple">
<li><p class="first"><em>Description:</em> (Optionnelle) L&#8217;URL vers la méadonnée de la couche. Les métadonnées wms_metadataurl_format et wms_metadataurl_type de la couche doivent aussi être spécifiées.</p>
</li>
<li><p class="first">Se réfèrer à la section 7.1.4.5.10 de la spécification WMS 1.1.1.</p>
</li>
</ul>
<p id="index-109"><strong>wms_metadataurl_type</strong></p>
<ul class="simple">
<li><p class="first"><em>Description:</em> (Optionnelle) Le standard auxquel la métadonnée se conforme.  Actuellement seulement deux types sont valides: &#8220;TC211&#8221; qui se réfère à [ISO 19115], et &#8220;FGDC&#8221; qui se réfère à [FGDC-STD-001-1988]. Les métadonnées wms_metadataurl_format et wms_metadataurl_href de la couche doivent aussi être spécifiées.</p>
</li>
<li><p class="first">Se réfèrer à la section 7.1.4.5.10 de la spécification WMS 1.1.1.</p>
</li>
</ul>
<p id="index-110"><strong>wms_opaque</strong></p>
<ul class="simple">
<li><p class="first"><em>Nom du TAG WMS:</em> Opaque (WMS 1.1.1, section 7.1.4.6.3)</p>
</li>
<li><p class="first"><em>Description:</em> (Optionnelle) Définir cette métadonnée à &#8220;1&#8221; pour indiquer que la couche représente un couverture de remplissage de l&#8217;espace (par exemple une couche de bathymétrie et d&#8217;élèvation). Cela devrait être considéré par le client comme une indication que la couche devrait être placée en bas de la liste de couches.</p>
</li>
</ul>
<dl class="docutils" id="index-111">
<dt><strong>wms_srs</strong></dt>
<dd><p class="first last">Identique à wms_srs dans l&#8217;objet WEB.</p>
</dd>
</dl>
<p id="index-112"><strong>wms_style</strong></p>
<ul class="simple">
<li><p class="first"><em>Description:</em> (Optionnelle) Le nom du style de &#8220;LegendURL&#8221;. Nécessite les métadonnées suivantes: wms_style_[nom_du_style]_width, wms_style_[nom_du_style]_legendurl_height, wms_style_[nom_du_style]_legendurl_format, wms_style_[nom_du_style]_legendurl_href</p>
</li>
<li><p class="first">Se réfèrer à la section 7.1.4.5.4 de la spécification WMS 1.1.1.</p>
</li>
</ul>
<p id="index-113"><strong>wms_style_[nom_du_style]_legendurl_format</strong></p>
<ul class="simple">
<li><p class="first"><em>Description:</em> (Optionnelle) Le type MIME du format de fichier de l&#8217;image de légende.  Nécessite la métadonnée suivante: wms_style_[nom_du_style]_width, wms_style_[nom_du_style]_legendurl_height, wms_style, wms_style_[nom_du_style]_legendurl_href.</p>
</li>
<li><p class="first">Se réfèrer à la section 7.1.4.5.4 de la spécification WMS 1.1.1.</p>
</li>
</ul>
<p id="index-114"><strong>wms_style_[nom_du_style]_legendurl_height</strong></p>
<ul class="simple">
<li><p class="first"><em>Description:</em> (Optionnelle) La hauteur de l&#8217;image de légende en pixels. Nécessite la métadonnée suivante: wms_style_[nom_du_style]_width, wms_style, wms_style_[nom_du_style]_legendurl_format, wms_style_[nom_du_style]_legendurl_href.</p>
</li>
<li><p class="first">Se réfèrer à la section 7.1.4.5.4 de la spécification WMS 1.1.1.</p>
</li>
</ul>
<p id="index-115"><strong>wms_style_[nom_du_style]_legendurl_href</strong></p>
<ul class="simple">
<li><p class="first"><em>Description:</em> (Optionnelle) L&#8217;URL vers la légende de la couche. Nécessite la métadonnée suivante: wms_style_[nom_du_style]_width, wms_style_[nom_du_style]_legendurl_height, wms_style_[nom_du_style]_legendurl_format, wms_style.</p>
</li>
<li><p class="first">Se réfèrer à la section 7.1.4.5.4 de la spécification WMS 1.1.1.</p>
</li>
</ul>
<p id="index-116"><strong>wms_style_[nom_du_style]_legendurl_width</strong></p>
<ul class="simple">
<li><p class="first"><em>Description:</em> (Optionnelle) La largeur de l&#8217;image de légende en pixels. Nécessite la métadonnée suivante : wms_style_[nom_du_style]_format, wms_style_[nom_du_style]_legendurl_height, wms_style, wms_style_[nom_du_style]_legendurl_href.</p>
</li>
<li><p class="first">Se réfèrer à la section 7.1.4.5.4 de la spécification WMS 1.1.1.</p>
</li>
</ul>
<p id="index-117"><strong>wms_timedefault</strong></p>
<ul class="simple">
<li><p class="first"><em>Description:</em> (Optionnelle pour le support du &#8220;Time&#8221;, WMS-T) Cette valeur est utilisée si elle est définie et que la valeur &#8220;Time&#8221; est manquante dans la requête. Merci de voir le <a class="reference internal" href="wms_time.html#wms-time"><span>guide du support WMS Time Support Howto</span></a> for more information.</p>
</li>
</ul>
<p id="index-118"><strong>wms_timeextent</strong></p>
<ul class="simple">
<li><p class="first"><em>Description:</em> (Obligatoire pour le support du &#8220;Time&#8221;, WMS-T) Il est utilisé dans les &#8220;capabilities&#8221; pour retourner les valeurs de temps valides pour la couche. La valeur définit ici doit être un intervalle de temps valide.  Merci de vous reporter au <a class="reference internal" href="wms_time.html#wms-time"><span>guide du support WMS Time</span></a> pour plus d&#8217;informations.</p>
</li>
</ul>
<p id="index-119"><strong>wms_timeitem</strong></p>
<ul class="simple">
<li><p class="first"><em>Description:</em> (Obligatoire pour le support du Temps, WMS-T) C&#8217;est le nom du champ dans la base de donnée qui contient les valeurs de temps. Merci de vous reporter au <a class="reference internal" href="wms_time.html#wms-time"><span>guide du support WMS Time</span></a> pour plus d&#8217;informations.</p>
</li>
</ul>
<dl class="docutils" id="index-120">
<dt><strong>wms_title</strong></dt>
<dd><p class="first last">Identique au wms_title dans l&#8217;objet WEB</p>
</dd>
</dl>
</div>
<div class="section" id="vendor-specific-wms-parameters">
<span id="index-121"></span><h3>Paramètres WMS spécifiques vendeur (c&#8217;est à dire à MapServer)<a class="headerlink" href="#vendor-specific-wms-parameters" title="Lien permanent vers ce titre">¶</a></h3>
<p id="index-122"><strong>angle</strong></p>
<ul class="simple">
<li><p class="first">Angle (en degrés) pour pivoter la carte.</p>
</li>
</ul>
<blockquote>
<div><div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">La valeur de l&#8217;angle est en degrés, dans le sens des aiguilles d&#8217;une montre.</p>
</div>
</div></blockquote>
<p id="index-123"><strong>radius</strong></p>
<ul class="simple">
<li><p class="first">Ce paramètre accepte deux types d&#8217;arguments:</p>
<ul>
<li><p class="first">Un entier qui spécifie le rayon de recherche en pixels.</p>
</li>
<li><p class="first">Une valeur spéciale <cite>bbox</cite> qui changera la requête en entrée en requête bbox basé sur la bbox donnée dans les paramètres de la requête.</p>
</li>
</ul>
</li>
</ul>
<p><strong>bbox_pixel_is_point</strong></p>
<ul class="simple">
<li><p class="first">Si ce paramètre est à &#8220;TRUE&#8221;, MapServer traitera la BBOX reçue dans les requêtes GetMap WMS comme si elle était fournie par le mode pixel_is_point. Essentiellement en désactivant la conversion de pixel_is_area (modèle WMS) à pixel_is_point qui est ésent dans mapwms.c pour ce  module spécifique.</p>
</li>
</ul>
</div>
<div class="section" id="cascading-wms-requests">
<span id="index-124"></span><h3>Requêtes WMS &#8220;en cascade&#8221;<a class="headerlink" href="#cascading-wms-requests" title="Lien permanent vers ce titre">¶</a></h3>
<p>Actuellement, il y a 3 requêtes qui supportent le WMS &#8220;en cascade&#8221;</p>
<ul>
<li><p class="first">GetMap</p>
</li>
<li><p class="first">GetFeatureInfo</p>
</li>
<li><p class="first">GetLegendGraphic</p>
<p>Avant MapServer 6.2, une requête GetLegendGraphic n&#8217;était pas possible en cascade. Une légende était retournée en utilisant les classes de la couche. Pour préserver ce comportement, une requête GetLegendGraphic ne sera passée en cascade que <strong>si</strong>:</p>
<ol class="arabic simple">
<li><p class="first">La requête GetLegendGraphic est activé via le paramètre de métadonnée <em>_enable_request</em>.</p>
</li>
<li><p class="first">La couche ne contient aucune classe avec une propriété NAME définie, c&#8217;est à dire:</p>
</li>
</ol>
<div class="highlight-mapfile"><div class="highlight"><pre><span></span><span class="k">CLASS</span>
  <span class="k">NAME</span> <span class="s">&quot;Parks&quot;</span>
  <span class="k">STYLE</span>
    <span class="k">COLOR</span> <span class="mi">0</span> <span class="mi">255</span> <span class="mi">0</span>
  <span class="k">END</span>
<span class="k">END</span>
</pre></div>
</div>
<p>Cette couche ne fonctionnera pas en cascade parce qu&#8217;elle contient au moins une classe avec une propriété NAME définie.</p>
</li>
</ul>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Si vous savez que le serveur distant WMS <em>ne</em> supporte pas un type de requête WMS donné, vous devriez explicitement cette requête pour votre couche en utilisant la métadonnée (ows/wms)_enable_request. Sinon, vous obtiendrez simplement une exception XML depuis le serveur &#8220;en cascade&#8221;</p>
</div>
</div>
<div class="section" id="sample-wms-server-mapfile">
<h3>Exemple de Mapfile de type serveur WMS<a class="headerlink" href="#sample-wms-server-mapfile" title="Lien permanent vers ce titre">¶</a></h3>
<p>Ce qui suit est un mapfile très basique de type serveur WMS:</p>
<div class="highlight-mapfile"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="k">MAP</span>
  <span class="k">NAME</span> <span class="s">&quot;WMS-test&quot;</span>
  <span class="k">STATUS</span> <span class="nb">ON</span>
  <span class="k">SIZE</span> <span class="mi">400</span> <span class="mi">300</span>
  <span class="k">EXTENT</span> <span class="p">-</span><span class="mi">2200000</span> <span class="p">-</span><span class="mi">712631</span> <span class="mi">3072800</span> <span class="mi">3840000</span>
  <span class="k">UNITS</span> <span class="nb">METERS</span>
  <span class="k">SHAPEPATH</span> <span class="s">&quot;../data&quot;</span>
  <span class="k">IMAGECOLOR</span> <span class="mi">255</span> <span class="mi">255</span> <span class="mi">255</span>
  <span class="k">FONTSET</span> <span class="p">..</span><span class="o">/</span><span class="err">etc</span><span class="o">/</span><span class="err">fonts</span><span class="p">.</span><span class="err">txt</span>

  <span class="k">WEB</span>
    <span class="k">IMAGEPATH</span> <span class="s">&quot;/ms4w/tmp/ms_tmp/&quot;</span>
    <span class="k">IMAGEURL</span> <span class="s">&quot;/ms_tmp/&quot;</span>
    <span class="k">METADATA</span>
      <span class="s">&quot;wms_title&quot;</span>     <span class="s">&quot;WMS Demo Server&quot;</span>  <span class="c">##required</span>
      <span class="s">&quot;wms_onlineresource&quot;</span> <span class="s">&quot;http://yourpath/cgi-bin/mapserv.exe?&quot;</span>   <span class="c">##required</span>
      <span class="s">&quot;wms_srs&quot;</span>       <span class="s">&quot;EPSG:42304 EPSG:42101 EPSG:4269 EPSG:4326&quot;</span>  <span class="c">##recommended</span>
      <span class="s">&quot;wms_enable_request&quot;</span> <span class="s">&quot;*&quot;</span>   <span class="c">##necessary</span>
    <span class="k">END</span>
  <span class="k">END</span> <span class="c"># Web</span>

  <span class="k">PROJECTION</span>
    <span class="s">&quot;init=epsg:42304&quot;</span>   <span class="c">##required</span>
  <span class="k">END</span>

  <span class="k">SYMBOL</span>
    <span class="k">NAME</span> <span class="s">&quot;circle&quot;</span>
    <span class="k">TYPE</span> <span class="nb">ellipse</span>
    <span class="k">POINTS</span> <span class="mi">1</span> <span class="mi">1</span> <span class="k">END</span>
  <span class="k">END</span> <span class="c"># Symbol</span>

  <span class="c">#</span>
  <span class="c"># Start of layer definitions</span>
  <span class="c">#</span>

  <span class="k">LAYER</span>
    <span class="k">NAME</span> <span class="s">&quot;park&quot;</span>
    <span class="k">METADATA</span>
      <span class="s">&quot;wms_title&quot;</span>    <span class="s">&quot;Parks&quot;</span>   <span class="c">##required</span>
    <span class="k">END</span>
    <span class="k">TYPE</span> <span class="nb">POLYGON</span>
    <span class="k">STATUS</span> <span class="nb">OFF</span>
    <span class="k">DATA</span> <span class="err">park</span>
    <span class="k">PROJECTION</span>
      <span class="s">&quot;init=epsg:42304&quot;</span>   <span class="c">##recommended</span>
    <span class="k">END</span>
    <span class="k">CLASS</span>
      <span class="k">NAME</span> <span class="s">&quot;Parks&quot;</span>
      <span class="k">STYLE</span>
        <span class="k">COLOR</span> <span class="mi">200</span> <span class="mi">255</span> <span class="mi">0</span>
        <span class="k">OUTLINECOLOR</span> <span class="mi">120</span> <span class="mi">120</span> <span class="mi">120</span>
      <span class="k">END</span> <span class="c"># Style</span>
    <span class="k">END</span> <span class="c"># Class</span>
  <span class="k">END</span> <span class="c"># Layer</span>

  <span class="k">LAYER</span>
    <span class="k">NAME</span> <span class="err">popplace</span>
    <span class="k">METADATA</span>
      <span class="s">&quot;wms_title&quot;</span>    <span class="s">&quot;Cities&quot;</span>  <span class="c">##required</span>
    <span class="k">END</span>
    <span class="k">TYPE</span> <span class="nb">POINT</span>
    <span class="k">STATUS</span> <span class="nb">ON</span>
    <span class="k">DATA</span> <span class="err">popplace</span>
    <span class="k">PROJECTION</span>
      <span class="s">&quot;init=epsg:42304&quot;</span>   <span class="c">##recommended</span>
    <span class="k">END</span>
    <span class="k">CLASS</span>
      <span class="k">NAME</span> <span class="s">&quot;Cities&quot;</span>
      <span class="k">STYLE</span>
        <span class="k">SYMBOL</span> <span class="s">&quot;circle&quot;</span>
        <span class="k">SIZE</span> <span class="mi">8</span>
        <span class="k">COLOR</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span>
      <span class="k">END</span> <span class="c"># Style</span>
    <span class="k">END</span> <span class="c"># Class</span>
  <span class="k">END</span> <span class="c"># Layer</span>

<span class="k">END</span> <span class="c"># Map File</span>
</pre></div>
</td></tr></table></div>
</div>
</div>
<div class="section" id="faq-common-problems">
<h2><a class="toc-backref" href="#table-of-contents">FAQ / Problèmes communs</a><a class="headerlink" href="#faq-common-problems" title="Lien permanent vers ce titre">¶</a></h2>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Q:</th><td class="field-body"><p class="first"><strong>Comment je peux trouver le code EPSG pour la projection de ma donnée?</strong></p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">A:</th><td class="field-body"><p class="first">Si vous connaissez les paramètres de projection de votre donnée, vous pouvez simplement naviguer dans le fichier &#8220;epsg&#8221; fournit avec PROJ4 et regardez pour une définition de projection qui corresponde à celle de votre donnée. C&#8217;est un simple fichier texte et les codes EPSG sont entre les symboles <cite>&lt;</cite> et <cite>&gt;</cite> au début de chaque ligne.</p>
<p class="last">Le fichier &#8220;epsg&#8221; est habituellement situé dans /usr/local/share/proj/ sur les systèmes Unix et dans C:/PROJ/ ou C:/PROJ/NAD dans les systèmes Windows (en fonction de votre installation).  Les utilisateurs de MS4W trouveront le fichier epsg dans /MS4W/proj/nad/.</p>
</td>
</tr>
</tbody>
</table>
<hr class="docutils" />
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Q:</th><td class="field-body"><p class="first"><strong>Mon serveur WMS produit une erreur &#8220;msProcessProjection(): no system list, errno: ..&#8221;</strong></p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">A:</th><td class="field-body"><p class="first">C&#8217;est probablement PROJ4 qui se plaint qu&#8217;il ne peut pas trouver le fichier de définition de projection &#8220;epsg&#8221;. Assurez-vous que vous avez installé PROJ 4.4.3 ou plus récent et que ce fichier &#8220;epsg&#8221; est installé au bon emplacement. Sous Unix, cela devrait être sous /usr/local/share/proj/, et sous Windows, PROJ cherche le fichier dans C:/PROJ/ ou C:/PROJ/NAD (en fonction de votre installation).  Vous devriez aussi vérifier la <a class="reference internal" href="../errors.html#errors"><span>error documentation</span></a> pour voir si votre erreur exacte est abordée.</p>
<p class="last">Si vous n&#8217;avez pas le fichier &#8220;epsg&#8221; alors vous pouvez l&#8217;obtenir depuis la distribution de PROJ4 sur <a class="reference external" href="http://trac.osgeo.org/proj/">http://trac.osgeo.org/proj/</a> ou vous pouvez le télécharger sur <a class="reference external" href="http://www.maptools.org/dl/proj4-epsg.zip">http://www.maptools.org/dl/proj4-epsg.zip</a>.</p>
</td>
</tr>
</tbody>
</table>
<hr class="docutils" />
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Q:</th><td class="field-body"><p class="first"><strong>Comment les projections AUTO fonctionnent-elles?</strong></p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">A:</th><td class="field-body"><p class="first">Quand un client WMS appelle un serveur WMS avec une projection auto, il doit spécifier le SRS sous la forme: AUTO: proj_id,unit_id,lon0,lat0 où:</p>
<ul class="simple">
<li><p class="first">proj_id est composé de 42001, 42002, 42003, 42004, ou 42005 (seulement cinq projections auto sont actuellement définies).</p>
</li>
<li><p class="first">unit_id est toujours 9001 pour les mètres. (il est incertain que quelqu&#8217;un d&#8217;autre soit amené à utiliser d&#8217;autres unités.)</p>
</li>
<li><p class="first">lon0 et lat0 sont les coordonnées à utiliser comme l&#8217;origine pour la projection.</p>
</li>
</ul>
<p>Quand une projection AUTO dans un GetCapabilities WM est utilisée, vous devez seulement inclure la chaîne &#8220;AUTO:42003&#8221; dans votre métadonnée wms_srs, vous ne devez pas inclure les paramètres de la projection. Ces paramètres sont ajoutés par l&#8217;application (cliente) à l&#8217;exécution en fonction de votre vue carte. Par exemple:</p>
<div class="highlight-mapfile"><div class="highlight"><pre><span></span><span class="k">NAME</span> <span class="s">&quot;DEMO&quot;</span>
<span class="p">...</span>

<span class="k">WEB</span>
  <span class="p">...</span>
  <span class="k">METADATA</span>
    <span class="s">&quot;wms_title&quot;</span>            <span class="s">&quot;WMS Demo Server&quot;</span>
    <span class="s">&quot;wms_onlineresource&quot;</span>   <span class="s">&quot;http://my.host.com/cgi-bin/mapserv?map=wms.map&amp;&quot;</span>
    <span class="s">&quot;wms_srs&quot;</span>              <span class="s">&quot;AUTO:42001 AUTO:42002&quot;</span>
    <span class="s">&quot;wms_enable_request&quot;</span> <span class="s">&quot;*&quot;</span>   <span class="c">##necessary</span>
  <span class="k">END</span> <span class="c"># METADATA</span>
<span class="k">END</span> <span class="c"># WEB</span>
</pre></div>
</div>
<p class="last">Le serveur ci-dessous affiche les deux premières projections auto.</p>
</td>
</tr>
</tbody>
</table>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper"><h3>Navigation</h3>
<p>
<a href="../about.html" title="About">About</a><br>
<a href="../products.html" title="Products">Products</a><br>
<a href="../community/index.html" title="Community">Community</a><br>
<a href="../development/index.html" title="Development">Development</a><br>
<a href="../download.html" title="Downloads">Downloads</a><br>
<a href="../documentation.html" title="Documentation">Documentation</a><br>
<a href="../faq.html" title="FAQ">FAQ</a>
</p>
  <h3>Current Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Serveur WMS</a><ul>
<li><a class="reference internal" href="#introduction">Introduction</a><ul>
<li><a class="reference internal" href="#links-to-wms-related-information">Liens vers les informations liées au WMS</a></li>
<li><a class="reference internal" href="#how-does-a-wms-work">Comment un WMS fonctionne</a></li>
</ul>
</li>
<li><a class="reference internal" href="#setting-up-a-wms-server-using-mapserver">Configurer un serveur WMS avec MapServer</a><ul>
<li><a class="reference internal" href="#install-the-required-software">Installez le logiciel requis</a></li>
<li><a class="reference internal" href="#setup-a-mapfile-for-your-wms">Configurer un Mapfile pour votre WMS</a></li>
<li><a class="reference internal" href="#test-your-wms-server">Tester votre serveur WMS</a><ul>
<li><a class="reference internal" href="#validate-the-capabilities-metadata">Valider les métadonnées des &#8220;Capabilities&#8221;</a></li>
<li><a class="reference internal" href="#test-with-a-getmap-request">Tester avec une requête GetMap</a></li>
<li><a class="reference internal" href="#test-with-a-real-client">Testez avec un client réel</a></li>
</ul>
</li>
<li><a class="reference internal" href="#getlegendgraphic-request">Requête GetLegendGraphic</a><ul>
<li><a class="reference internal" href="#requirements">Prérequis</a></li>
<li><a class="reference internal" href="#parameters">Paramètres</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#changing-the-online-resource-url">Changer l&#8217;URL &#8220;Online Resource&#8221;</a><ul>
<li><a class="reference internal" href="#apache-rewrite-rules-using-apache-mod-rewrite">Règles de réécritures Apache (utilisant mod_rewrite Apache)</a></li>
<li><a class="reference internal" href="#apache-environment-variables-ms-mapfile">Variables d&#8217;environnement Apache - MS_MAPFILE</a></li>
<li><a class="reference internal" href="#apache-setenvif">SetEnvIf Apache</a></li>
<li><a class="reference internal" href="#asp-script-iis-microsoft-windows">Script ASP (IIS - Microsoft Windows)</a></li>
<li><a class="reference internal" href="#mapscript-wrapper">Wrapper Mapscript</a></li>
<li><a class="reference internal" href="#wrapper-script-unix">Script wrapper (Unix)</a></li>
</ul>
</li>
<li><a class="reference internal" href="#wms-1-3-0-support">Support WMS 1.3.0</a><ul>
<li><a class="reference internal" href="#major-features-related-to-the-wms-1-3-0-support">Fonctionnalités principales liées au support du WMS 1.3</a></li>
<li><a class="reference internal" href="#coordinate-systems-and-axis-orientation">Systèmes de coordonnées et orientation des axes</a></li>
<li><a class="reference internal" href="#example-of-requests">Exemples de requêtes</a></li>
<li><a class="reference internal" href="#other-notable-changes">Autres changements notables</a></li>
<li><a class="reference internal" href="#some-missing-features">Quelque fonctionnalités manquantes</a></li>
<li><a class="reference internal" href="#ocg-compliance-tests">Tests de conformité OGC</a></li>
</ul>
</li>
<li><a class="reference internal" href="#reference-section">Section de référence</a><ul>
<li><a class="reference internal" href="#web-object-metadata">Objet Metadata de l&#8217;objet Web</a></li>
<li><a class="reference internal" href="#layer-object-metadata">Objet Metadata de l&#8217;objet Layer</a></li>
<li><a class="reference internal" href="#vendor-specific-wms-parameters">Paramètres WMS spécifiques vendeur (c&#8217;est à dire à MapServer)</a></li>
<li><a class="reference internal" href="#cascading-wms-requests">Requêtes WMS &#8220;en cascade&#8221;</a></li>
<li><a class="reference internal" href="#sample-wms-server-mapfile">Exemple de Mapfile de type serveur WMS</a></li>
</ul>
</li>
<li><a class="reference internal" href="#faq-common-problems">FAQ / Problèmes communs</a></li>
</ul>
</li>
</ul>

<div id="searchbox" style="display: none" role="search">
  <h3>Recherche rapide</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Saisissez un mot clef ou un nom de module, classe ou fonction.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2016, Open Source Geospatial Foundation.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.3.5</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.4</a>
      
    </div>

    

    
  </body>
</html>