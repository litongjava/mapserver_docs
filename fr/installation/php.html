<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Installation de PHP MapScript &mdash; MapServer 7.0.0 documentation</title>
    
    <link rel="stylesheet" href="../_static/sphinx.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '7.0.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/translations.js"></script>
    <link rel="shortcut icon" href="../_static/mapserver.ico"/>
    <link rel="author" title="À propos de ces documents" href="../about.html" />
    <link rel="copyright" title="Copyright" href="../copyright.html" />
    <link rel="top" title="MapServer 7.0.0 documentation" href="../index.html" />
    <link rel="up" title="Installation" href="index.html" />
    <link rel="next" title="Compilation de MapScript .NET" href="dotnet.html" />
    <link rel="prev" title="Compiler sous Win32" href="win32.html" />
   
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9">

  </head>
  <body role="document">

<table width="100%" style="width: 100%; background-color: white;">
  <tr>
    <td rowspan="2" style="padding: 10px 0px 10px 10px;">
      <a href="../index.html" title="Home"><img src="../_static/banner.png" alt="MapServer banner" border="0" /></a>
    </td>
    <td style="padding: 10px 10px 0px 0px; text-align: right; vertical-align: top;">
      <a href="../index.html" title="Home">Home</a> |
      <a href="../products.html" title="Products (MapServer core, MapCache, TinyOWS">Products</a> |
      <a href="https://github.com/mapserver/mapserver/issues/" title="Issue Tracker (MapServer core)">Issue Tracker</a> |
      <a href="../faq.html" title="FAQ">FAQ</a> |
      <a href="../download.html" title="Download">Download </a>
    </td>
  </tr>
  <tr>
    <td style="padding: 0px 10px 0px 0px; text-align: right; vertical-align: bottom;">
        
          
            <a href="../../installation/php.html"><img src="../_static/flagicons/en.png" alt="en" title="en" border="0" /></a>
          
        
        
          
            <a href="../../ar/installation/php.html"><img src="../_static/flagicons/ar.png" alt="ar" title="ar" border="0" /></a>
          
        
        
          
            <a href="../../de/installation/php.html"><img src="../_static/flagicons/de.png" alt="de" title="de" border="0" /></a>
          
        
        
          
            <a href="../../el/installation/php.html"><img src="../_static/flagicons/el.png" alt="el" title="el" border="0" /></a>
          
        
        
          
            <a href="../../es/installation/php.html"><img src="../_static/flagicons/es.png" alt="es" title="es" border="0" /></a>
          
        
        <img src="../_static/flagicons/fr.png" alt="fr" title="fr" border="0" width="18px" height="13px"/>
        
          
            <a href="../../id/installation/php.html"><img src="../_static/flagicons/id.png" alt="id" title="id" border="0" /></a>
          
        
        
          
            <a href="../../it/installation/php.html"><img src="../_static/flagicons/it.png" alt="it" title="it" border="0" /></a>
          
        
        
          
            <a href="../../ja/installation/php.html"><img src="../_static/flagicons/ja.png" alt="ja" title="ja" border="0" /></a>
          
        
        
          
            <a href="../../nl_NL/installation/php.html"><img src="../_static/flagicons/nl_NL.png" alt="nl_NL" title="nl_NL" border="0" /></a>
          
        
        
          
            <a href="../../pl/installation/php.html"><img src="../_static/flagicons/pl.png" alt="pl" title="pl" border="0" /></a>
          
        
        
          
            <a href="../../ru/installation/php.html"><img src="../_static/flagicons/ru.png" alt="ru" title="ru" border="0" /></a>
          
        
        
          
            <a href="../../sq/installation/php.html"><img src="../_static/flagicons/sq.png" alt="sq" title="sq" border="0" /></a>
          
        
        
          
            <a href="../../tr/installation/php.html"><img src="../_static/flagicons/tr.png" alt="tr" title="tr" border="0" /></a>
          
        
        
          
            <a href="../../uk/installation/php.html"><img src="../_static/flagicons/uk.png" alt="uk" title="uk" border="0" /></a>
          
        

    </td>
  </tr>
</table>


    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="Index général"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="dotnet.html" title="Compilation de MapScript .NET"
             accesskey="N">suivant</a> |</li>
        <li class="right" >
          <a href="win32.html" title="Compiler sous Win32"
             accesskey="P">précédent</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">Home</a> &raquo;</li>
          <li class="nav-item nav-item-1"><a href="../documentation.html" >Documentation de MapServer 7.0.0</a> &raquo;</li>
          <li class="nav-item nav-item-2"><a href="index.html" accesskey="U">Installation</a> &raquo;</li> 
      </ul>
    </div>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="php-mapscript-installation">
<span id="php-install"></span><h1><a class="toc-backref" href="#table-of-contents">Installation de PHP MapScript</a><a class="headerlink" href="#php-mapscript-installation" title="Lien permanent vers ce titre">¶</a></h1>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Author:</th><td class="field-body">Jeff McKenna</td>
</tr>
<tr class="field-even field"><th class="field-name">Contact:</th><td class="field-body">jmckenna at gatewaygeomatics.com</td>
</tr>
<tr class="field-odd field"><th class="field-name">Revision:</th><td class="field-body">$Revision$</td>
</tr>
<tr class="field-even field"><th class="field-name">Date:</th><td class="field-body">$Date$</td>
</tr>
</tbody>
</table>
<div class="contents topic" id="table-of-contents">
<p class="topic-title first">Table des matières</p>
<ul class="simple">
<li><a class="reference internal" href="#php-mapscript-installation" id="id1">Installation de PHP MapScript</a><ul>
<li><a class="reference internal" href="#introduction" id="id2">Introduction</a></li>
<li><a class="reference internal" href="#obtaining-compiling-and-installing-php-and-the-php-mapscript-module" id="id3">Obtenir, compiler et installer PHP et le module PHP/MapScript</a></li>
<li><a class="reference internal" href="#faq-common-problems" id="id4">FAQ / Problèmes communs</a></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="introduction">
<span id="index-0"></span><h2><a class="toc-backref" href="#table-of-contents">Introduction</a><a class="headerlink" href="#introduction" title="Lien permanent vers ce titre">¶</a></h2>
<p>Le module PHP/MapScript est un module PHP chargeable dynamiquement qui met à disposition les fonctions et les classes de MapScript Mapserver dans un environnement PHP.</p>
<p>La version originale de MapScript (en Perl) utilise <a class="reference external" href="http://www.swig.org/">SWIG</a>, mais comme SWIG ne supporte pas le langage PHP, le module doit être maintenu séparément et peut ne pas être parfaitement synchronisé avec la version Perl.</p>
<p>Le module PHP a été développé par <a class="reference external" href="http://www.dmsolutions.ca/">DM Solutions Group</a> et est maintenu actuellement par <a class="reference external" href="http://www.mapgears.com">Mapgears</a>.</p>
<p>Ce document assume que vous êtes déjà familier avec certains aspects de votre système d&#8217;exploitation:</p>
<ul class="simple">
<li><p class="first">Pour les utilisateurs Unix/Linux, une familiarité avec l&#8217;environnement de compilation, particulièrement <em>make</em>.</p>
</li>
<li><p class="first">Pour les utilisateurs Windows, quelques compétences en compilation si vous n&#8217;avez pas accès à une installation précompilée et que vous avez besoin de compiler votre propre version de Mapserver avec le module PHP/MapScript</p>
</li>
</ul>
<div class="section" id="which-version-of-php-is-supported">
<span id="index-1"></span><h3>Quelle version de PHP est supportée?<a class="headerlink" href="#which-version-of-php-is-supported" title="Lien permanent vers ce titre">¶</a></h3>
<p>PHP MapScript a été initialement été développé pour PHP-3.0.14 mais après MapServer 3.5, le support de PHP3 a été abandonné et lors de la dernière mise à jour de ce document, PHP 4.3.11 ou plus était requis (PHP5 est bien supporté).</p>
<p>Les meilleurs combinaisons entre les versions de MapScript et PHP sont:</p>
<ul class="simple">
<li><p class="first">MapScript 4.10 avec PHP 5.2.1 et plus</p>
</li>
<li><p class="first">MapScript 4.10 avec PHP 4.4.6 et plus</p>
</li>
</ul>
</div>
<div class="section" id="how-to-get-more-information-on-the-php-mapscript-module-for-mapserver">
<h3>Comment avoir plus d&#8217;informations sur le module PHP/MapScript pour MapServer<a class="headerlink" href="#how-to-get-more-information-on-the-php-mapscript-module-for-mapserver" title="Lien permanent vers ce titre">¶</a></h3>
<ul class="simple">
<li><p class="first">Pour une liste de toutes les classes, propriétés, et méthodes disponibles dans le module, voir le document de référence <span class="xref std std-ref">php_mapscript</span>.</p>
</li>
<li><p class="first">Plus d&#8217;informations sur me module PHP/MapScript peut être trouvée sur la page <a class="reference external" href="http://www.maptools.org/php_mapscript/">PHP/MapScript page</a> sur le site MapTools.org.</p>
</li>
<li><p class="first">Le <a class="reference external" href="http://trac.osgeo.org/mapserver/wiki/PHPMapScript">Wiki MapServer</a> a aussi des notes sur la compilation et l&#8217;installation de PHP/MapScript et quelques exemples de codes php.</p>
</li>
<li><p class="first">Les questions concernant le module doivent être adressées par la <a class="reference internal" href="../community/lists.html#lists"><span>liste de diffusion MapServer</span></a>.</p>
</li>
</ul>
</div>
</div>
<div class="section" id="obtaining-compiling-and-installing-php-and-the-php-mapscript-module">
<h2><a class="toc-backref" href="#table-of-contents">Obtenir, compiler et installer PHP et le module PHP/MapScript</a><a class="headerlink" href="#obtaining-compiling-and-installing-php-and-the-php-mapscript-module" title="Lien permanent vers ce titre">¶</a></h2>
<div class="section" id="download-php-and-php-mapscript">
<span id="index-2"></span><h3>Télécharger PHP et PHP/MapScript<a class="headerlink" href="#download-php-and-php-mapscript" title="Lien permanent vers ce titre">¶</a></h3>
<ul class="simple">
<li><p class="first">Les sources de PHP ou les binaires Win32 peuvent être obtenus sur le <a class="reference external" href="PHPwebsite">site web de PHP</a>.</p>
</li>
<li><p class="first">Une fois vérifié que vous avez PHP installé et fonctionnel, vous avez besoin d&#8217;obtenir les dernières <a class="reference internal" href="../download.html#download"><span>sources de MapServer</span></a> et de compiler MapServer et le module PHP associé.</p>
</li>
</ul>
</div>
<div class="section" id="setting-up-php-on-your-server">
<span id="index-3"></span><h3>Configurer PHP sur votre serveur<a class="headerlink" href="#setting-up-php-on-your-server" title="Lien permanent vers ce titre">¶</a></h3>
<p><strong>Unix</strong></p>
<ul class="simple">
<li><p class="first">Vérifiez si vous avez déjà PHP d&#8217;installé (de nombreuses distributions Linux l&#8217;ont, installé par défaut).</p>
</li>
<li><p class="first">Si ce n&#8217;est pas le cas, voir la section &#8220;<a class="reference external" href="InstallationonUnixsystems">Installation sous les systèmes Unix</a>&#8221; du manuel de PHP.</p>
</li>
</ul>
<p><strong>Windows</strong></p>
<ul class="simple">
<li><p class="first"><a class="reference external" href="MS4W(MapServerForWindows)">MS4W (MapServer pour Windows)</a>  est un paquet qui contient Apache, PHP, et PHP/MapScript prêt à utiliser dans un simple fichier zip. Plusieurs applications Open Source sont aussi disponibles pour être utilisées dans MS4W.</p>
</li>
<li><p class="first">Les utilisateurs Windows peuvent suivre les étapes dans <a class="reference external" href="InstallingApache,PHPandMySQLonWindowstutorial">le tutoriel installer Apache, PHP et MySQL Windows</a> pour installer Apache et PHP manuellement sur leur système.</p>
</li>
<li><p class="first">Les utilisateurs Windows faisant fonctionner PWS/IIS peuvent suivre le <a class="reference external" href="php.net'showto">howto php.net</a> pour installer PHP pour PWS/IIS 3, PWS 4 ou plus récent, et IIS 4 ou plus.</p>
</li>
</ul>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Quand vous configurez PHP sous Windows, bérifiez bien que PHP est configuré comme un module CGI pas comme un module Apache parce que php_mapscript.dll n&#8217;est pas &#8220;thread-safe&#8221; et ne marche pas comme un module Apache (Voir la section <a class="reference internal" href="#php-install-example-steps"><span>Exemple d&#8217;étapes d&#8217;une installation complète sous Windows</span></a> de ce document).</p>
</div>
</div>
<div class="section" id="build-install-the-php-mapscript-module">
<span id="index-4"></span><h3>Compiler/installer le module PHP/MapScript<a class="headerlink" href="#build-install-the-php-mapscript-module" title="Lien permanent vers ce titre">¶</a></h3>
<p><strong>Compiler sur une machine Linux</strong></p>
<p>NOTE : Pour les utilisateurs UNIX, lisez le fichier README.CONFIGURE dans les sources MapServer ou voir le HowTo <a class="reference internal" href="unix.html#unix"><span>Compiler sous Unix</span></a>.</p>
<ul class="simple">
<li><p class="first">Le script &#8220;configure&#8221; principal de MapServer configurera automatiquement le makefile principal pour compiler php_mapscript.so si vous passez l&#8217;argument <em>&#8211;with-php=DIR</em> au script configure.</p>
</li>
<li><p class="first">Copiez la bibliothèque php_mapscript.so dans votre répertoire d&#8217;extensions PHP, et ensuite utilisez la fonction dl() pour charger le module au début de vos scripts PHP. Voir aussi la fonction PHP <a class="reference external" href="http://www.php.net/manual/en/function.extension-loaded.php">extension_loaded()</a> pour vérifier si une extension est déjà chargée.</p>
</li>
<li><p class="first">Le fichier <em>mapscript/php3/examples/phpinfo_mapscript.phtml</em> testera que le module php_mapscript est correctement installé et chargé.</p>
</li>
<li><p class="first">Si vous avez une erreur de PHP qui se plaint que la bibliothèque ne peut être chargée, alors assurez-vous que vous avez recompilé et réinstallé PHP avec le support des bibliothèques dynamiques. Sur RedHat 5.x et 6.x, cela signifie d&#8217;ajouter &#8220;-rdynamic&#8221; au CLDFLAGS dans le Makefile PHP3 principal après avoir lancé ./configure Vérifier aussi que tous les répertoires dans le chemin vers l&#8217;emplacement de php_mapscript.so sont au moins à r-x pour l&#8217;utilisateur du service Apache (habituellement &#8216;nobody&#8217;), autrement dl() risque de se plaindre qu&#8217;il ne trouve pas le fichier même s&#8217;il est présent.</p>
</li>
</ul>
<p><strong>Compiler sous Windows</strong></p>
<ul class="simple">
<li><p class="first">Pour les utilisateurs Windows, il est recommandé de regarder pour avoir un binaire précompilé pour votre version de PHP sur la <a class="reference internal" href="../download.html#download"><span>page de téléchargement de MapServer</span></a> ou sur <a class="reference external" href="http://www.maptools.org/php_mapscript/index.phtml?page=downloads.html">MapTools.org</a>.</p>
</li>
<li><p class="first">Si pour une raison donnée, vous avez vraiment besoin de compiler votre propre binaire Windows, alors regardez ke fichier README.WIN32 dans les sources de MapServer (bonne chance!).</p>
</li>
</ul>
</div>
<div class="section" id="installing-php-mapscript">
<span id="index-5"></span><h3>Installer PHP/MapScript<a class="headerlink" href="#installing-php-mapscript" title="Lien permanent vers ce titre">¶</a></h3>
<p>Copier simplement le fichier php4_mapscript.dll dans votre répertoire d&#8217;extensions PHP4 (pathto/php/extensions)</p>
<p>Utiliser phpinfo()</p>
<p>Pour vérifier que PHP et PHP/MapScript ont été installés correctement, créez un fichier &#8216;.php&#8217; contenant le code suivant et essayez d&#8217;y accéder via votre serveur web:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>&lt;HTML&gt;
&lt;BODY&gt;

&lt;?php
  if (PHP_OS == &quot;WINNT&quot; || PHP_OS == &quot;WIN32&quot;)
  {
    dl(&quot;php_mapscript.dll&quot;);
  }
  else
  {
    dl(&quot;php_mapscript.so&quot;);
  }
  phpinfo();
?&gt;

&lt;/BODY&gt;
&lt;/HTML&gt;
</pre></div>
</div>
<p>Si PHP et PHP/MapScript sont installés correctement, plusieurs tables devraient être affichées dans votre page, et &#8216;MapScript&#8217; devrait être listé dans la table &#8216;Extensions&#8217;.</p>
</div>
<div class="section" id="example-steps-of-a-full-windows-installation">
<span id="php-install-example-steps"></span><h3>Exemple d&#8217;étapes d&#8217;une installation complète sous Windows<a class="headerlink" href="#example-steps-of-a-full-windows-installation" title="Lien permanent vers ce titre">¶</a></h3>
<p><strong>Utiliser MS4W (MapServer pour Windows)</strong></p>
<ol class="arabic simple">
<li><p class="first">Télécharger la dernière version du <a class="reference external" href="MS4Wbasepackage">paquet MS4W</a>.</p>
</li>
<li><p class="first">Extraire les fichiers de l&#8217;archive dans le répertoire racine d&#8217;un de vos lecteurs disque (comme. C:/ ou D:/).</p>
</li>
<li><p class="first">Faire un double-clic sur le fichier /ms4w/apache-install.bat pour installer et démarrer le serveur web Apache.</p>
</li>
<li><p class="first">Dans un navigateur web, allez sur <a class="reference external" href="http://127.0.0.1">http://127.0.0.1</a>. vous devriez voir une page d&#8217;ouverture pour MS4W. Vous faites maintenant fonctionner PHP, PHP/MapScript, et Apache.</p>
</li>
<li><p class="first">Vous pouvez en option installer d&#8217;autres applications qui sont préconfigurées pour MS4W, qui sont situées dans sur la <a class="reference external" href="MS4Wdownloadpage">page de téléchargement de MS4W</a>.</p>
</li>
</ol>
<p><strong>Installation manuelle en utilisant le serveur web Apache</strong></p>
<ol class="arabic">
<li><p class="first">Télécharger le <a class="reference external" href="ApacheWebServer">serveur web Apache</a> et l&#8217;extraire à la racine d&#8217;une répertoire (par exemple D:/Apache).</p>
</li>
<li><p class="first">Télécharger <a class="reference external" href="http://www.php.net/">PHP4</a> et l&#8217;extraire dans votre dossier Apache (par exemple D:/Apache/PHP4).</p>
</li>
<li><p class="first">Créer un répertoire temporaire pour stocker les GIF créés par MapServer. NOTE: Ce répertoire est spécifié dans le paramètre IMAGEPATH de l&#8217;objet WEB dans la référence du <a class="reference internal" href="../mapfile/index.html#mapfile"><span>Mapfile</span></a>. Pour cet exemple, nous appellerons le répertoire temporaire &#8220;ms_tmp&#8221; (par exemple E:/tmp/ms_tmp).</p>
</li>
<li><p class="first">Identifier l&#8217;emplacement du fichier <em>httpd.conf</em> dans le répertoire conf de Apache, et l&#8217;ouvrir dans un éditeur de texte (comme TextPad, Emacs, Notepad).</p>
<p>Dans la section <em>Alias</em> de ce fichier, ajouters des alias au dossier ms_tmp et tout autre dossier dont vous avez besoin (pour cet exemple, nous utiliserons le dossier <em>msapps</em>):</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">Alias</span>   <span class="o">/</span><span class="n">ms_tmp</span><span class="o">/</span>   <span class="s2">&quot;path/to/ms_tmp/&quot;</span>
<span class="n">Alias</span>   <span class="o">/</span><span class="n">msapps</span><span class="o">/</span>   <span class="s2">&quot;path/to/msapps/&quot;</span>
</pre></div>
</div>
<p>Dans la section <em>ScriptAlias</em> de ce fichier, ajouter un alias pour le dossier PHP4.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">ScriptAlias</span>    <span class="o">/</span><span class="n">cgi</span><span class="o">-</span><span class="n">php4</span><span class="o">/</span>     <span class="s2">&quot;pathto/apache/php4/&quot;</span>
</pre></div>
</div>
<p>Dans la section <em>AddType</em> de ce fichier, ajouter un type pour les fichiers php4.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>AddType application/x-httpd-php4   .php
</pre></div>
</div>
<p>Dans la section <em>Action</em> de ce fichier, ajouter une action pour le fichier php.exe.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>Action application/x-httpd-php4    &quot;/cgi-php4/php.exe&quot;
</pre></div>
</div>
</li>
<li><p class="first">Copier le fichier <em>php4.ini-dist</em> situé dans votre répertoire Apache/php4 et le copier dans votre dossier WindowsNT folder (comme c:/winnt), et ensuite, renommer ce fichier en <em>php.ini</em> dans votre dossier WindowsNT.</p>
</li>
<li><p class="first">Si vous voulez des extensions spécifiques chargées par défaut, ouvrir le fichier <em>php.ini</em> dans l&#8217;éditeur de texte et décommenter l&#8217;extension appropriée.</p>
</li>
<li><p class="first">Placer le fichier php_mapscript.dll dans votre dossier Apache/php4/extensions</p>
</li>
</ol>
<p><strong>Installation en utilisant Microsoft IIS</strong></p>
<p>(merci de voir le document sur <a class="reference internal" href="iis.html#iis"><span>Paramétrage de IIS pour MapServer</span></a> pour avoir les différentes étapes)</p>
<ol class="arabic">
<li><p class="first">Installer IIS si il est requis (voir la <a class="reference external" href="IIS4.0installationprocedure">procédure d&#8217;installation de IIS 4.0</a>).</p>
</li>
<li><p class="first">Installer PHP et PHP/MapScript (voir ci-dessus).</p>
</li>
<li><p class="first">Ouvrir le gestionnaire de service Internet (c&#8217;est à dire&#8217; C/WINNT/system32/inetsrv/inetmgr.exe).</p>
</li>
<li><p class="first">Sélectionner le site web par défaut et créer un répertoire virtuel (faire un clic droit, sélectionner Nouveau/Répertoire virtuel). Pour cet exemple, nous appelerons le répertoire <em>msapps</em>.</p>
</li>
<li><p class="first">Dans le champ Alias, entrer <em>msapps</em> et cliquer sur Suivant.</p>
</li>
<li><p class="first">Entrer le chemin de la racine de votre application (c&#8217;est à dire &#8220;c:/msapps&#8221;) et cliquer sur Suivant.</p>
</li>
<li><p class="first">Définir les permisions du répertoire Set the directory et cliquer sur Terminer.</p>
</li>
<li><p class="first">Sélectionner le répertoire virtuel msapps précédemment créé et ouvrez les propriétés du répertoire (en cliquant droit et sélectionnant propriétés) puis cliquez sur l&#8217;onglet Répertoire virtuel.</p>
</li>
<li><p class="first">Cliquez sur le bouton Configuration puis cliquez l&#8217;onglet &#8220;Mapping App&#8221;.</p>
</li>
<li><p class="first">Cliquez sur Ajouter et dans la boîte Exécutable entrez : <em>path/to/php4/php.exe %s %s</em>.  Vous DEVEZ avoir <em>%s %s</em> à la fin, PHP ne fonctionnera pas correctement si vous ne réalisez pas ceci. Dans la boîte Extension, entrez l&#8217;extension du nom du fichier à associer avec vos scripts PHP. Les extensions habituels qui doivent être associées sont phtml et php. Vous devez répéter cette étape pour chaque extension.</p>
</li>
<li><p class="first">Créer un répertoire temporaire dans Explorateur pour stocker les GIF créés par MapServer.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Ce répertoire est définie dans le paramètre IMAGEPATH de l&#8217;objet WEB dans le  <a class="reference internal" href="../mapfile/index.html#mapfile"><span>Mapfile</span></a>. Pour cet exemple nous appellerons le répertoire temp <em>ms_tmp</em> (eg. C:/tmp/ms_tmp).</p>
</div>
</li>
<li><p class="first">Ouvrir le gestionnaire de service Internet à nouveau.</p>
</li>
<li><p class="first">Sélectionner le site web par défaut et créer un répertoire virtuel (faites un clic droit, sélectionner Nouveau/Répertoire virtuel). Définissez le chemin au répertoire ms_tmp (eg. C:/tmp/ms_tmp) . Les permissions du répertoire doivent au moins être permettre les accès en Lecture/Écriture.</p>
</li>
</ol>
</div>
</div>
<div class="section" id="faq-common-problems">
<h2><a class="toc-backref" href="#table-of-contents">FAQ / Problèmes communs</a><a class="headerlink" href="#faq-common-problems" title="Lien permanent vers ce titre">¶</a></h2>
<div class="section" id="questions-regarding-documentation">
<h3>Questions à propos de la documentation<a class="headerlink" href="#questions-regarding-documentation" title="Lien permanent vers ce titre">¶</a></h3>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Q:</th><td class="field-body"><p class="first"><strong>Il y a une documentation disponible?</strong></p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">A:</th><td class="field-body"><p class="first">Le principal document de référence est la <a class="reference internal" href="../mapscript/php/index.html#php-mapscript"><span>référence PHP MapScript</span></a>, qui décrit toutes les classes actuelles, propriétés et méthodes associées avec le module PHP/MapScript.</p>
<p>Pour obtenir une description plus complète de chaque classe et la signification de leurs variables membres, lisez la <a class="reference internal" href="../mapscript/index.html#mapscript"><span>Référence de MapScript</span></a> et la <a class="reference internal" href="../mapfile/index.html#mapfile"><span>référence du MapFile</span></a>.</p>
<p class="last">Le <a class="reference external" href="http://trac.osgeo.org/mapserver/wiki/PHPMapScript">Wiki MapServer</a> a aussi des notes sur la compilation et l&#8217;installation de PHP/MapScript et quelques exemples de codes php.</p>
</td>
</tr>
</tbody>
</table>
<hr class="docutils" />
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Q:</th><td class="field-body"><p class="first"><a href="#id1"><span class="problematic" id="id2">**</span></a>Où puis-je trouver des scripts exemple</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">A:</th><td class="field-body"><p class="first">Plusieurs exemples sont inclus dans le dossier <em>mapserver/mapscript/php3/examples/</em> dans les sources de la distribution MapServer. Un bon exemple pour démarrer est <em>test_draw_map.phtml</em> : c&#8217;est un script très simple qui dessine juste une carte, légende et une barre d&#8217;échelle dans une page HTML.</p>
<p>Un bon exemple intermédiaire est le <a class="reference internal" href="../mapscript/php/by_example.html#php-example"><span>Guide par l&#8217;exemple de PHP MapScript</span></a> (notez que ce document a été créé pour une version plus ancienne de MapServer mais le code est toujours utile).</p>
<p class="last">Le prochain exemple est la <a class="reference external" href="http://www.mapsherpa.com/gmap/">démo GMap</a>. Vous pouvez télécharger l&#8217;ensemble du code source et les fichiers donnés à partir de la <a class="reference external" href="http://www.maptools.org/dl/">MapTools.org download page</a>.</p>
</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="questions-about-installation">
<h3>Questions à propos de l&#8217;installation<a class="headerlink" href="#questions-about-installation" title="Lien permanent vers ce titre">¶</a></h3>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Q:</th><td class="field-body"><p class="first"><strong>Comment puis-je dire que le module est correctement installé sur mon serveur ?</strong></p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">A:</th><td class="field-body"><p class="first">Créer un fichier appelé phpinfo.phtml avec le contenu suivant :</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>&lt;?php  dl(&quot;php_mapscript.so&quot;);
       phpinfo();
?&gt;
</pre></div>
</div>
<p>Assurez-vous que vous remplacez le php_mapscript.so avec le nom sous lequel vous l&#8217;avez installé, il pourrait être php_mapscript_46.so sous Unix ou sous Windows php_mapscript_46.dll</p>
<p class="last">Vous pouvez alors essayer la seconde page de test <em>mapserver/mapscript/php3/examples/test_draw_map.phtml</em>. Cette page ouvre simplement un fichier .map de MapServer et insère une carte, une légende, et une barre d&#8217;échelle dans une page HTML. Modifiez la page pour accéder à l&#8217;un de vos fichier .map pour MapServer et si vous obtenez le résultat expéré, alors tout fonctionne probablement correctement.</p>
</td>
</tr>
</tbody>
</table>
<hr class="docutils" />
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Q:</th><td class="field-body"><p class="first"><strong>J&#8217;essaie d&#8217;afficher ma page .phtml ou .php dans mon navigateur mais la page s&#8217;affiche comme elle le ferait dans Notepad.</strong></p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">A:</th><td class="field-body"><p class="first">Votre problème est que votre installation de PHP ne reconnaît pas l&#8217;extension de fichier &#8221;.phtml&#8221; comme extension PHP. En supposant que vous utilisez PHP4 sous Apache vous devez alors ajouter la ligne suivante avec les autres lignes AddType lié à PHP dans le fichier httpd.conf :</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>AddType application/x-httpd-php .phtml
</pre></div>
</div>
<p class="last">Pour des informations plus détaillées, lisez la section <a class="reference internal" href="#php-install-example-steps"><span>Étapes sous forme d&#8217;exemples d&#8217;une installation sous Windows complète</span></a> de ce document.</p>
</td>
</tr>
</tbody>
</table>
<hr class="docutils" />
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Q:</th><td class="field-body"><p class="first"><strong>J&#8217;ai installé PROJ.4, GDAL ou l&#8217;un des bibliothèques des dépendances sur mon système, elle est reconnu par le configure de MapServer comme bibliothèque système mais au lancement j&#8217;obtiens : &#8220;libproj.so.0: No such file or directory&#8221;.</strong></p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">A:</th><td class="field-body"><p class="first">Vous êtes probablement sous un système Linux Red Hat si cela vous arrive. En effet les bibliothèques s&#8217;installent dans le répertoire  /usr/local/lib mais ce répertoire ne fait pas partie du chemin des bibliothèques lors du lancement par défaut sur votre système.</p>
<p>(je suis toujours surpris que le configure récupère proj.4 en tant que bibliothèque système puisqu&#8217;elle n&#8217;est pas dans le chemin des bibliothèques du système ... Probablement quelque chose de magique dans autoconf que nous devons regarder).</p>
<p>Il y a plusieurs solutions possibles :</p>
<ol class="arabic">
<li><p class="first">Ajouter un &#8220;setenv LD_LIBRARY_PATH&#8221; à votre httpd.conf pour contenir ce répertoire</p>
</li>
<li><p class="first">Éditez le fichier /etc/ld.so.conf pour ajouter /usr/local/lib, puis lancez la commande &#8220;/sbin/ldconfig&#8221;. Cela ajoutera de manière permanente le répertoire /usr/local/lib au chemin des bibliothèques à votre système.</p>
</li>
<li><p class="first">Configurez MapServer avec les options suivantes :</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>--with-proj=/usr/local --enable-runpath
</pre></div>
</div>
<p>et le répertoire /usr/local/lib sera codé en dur dans les fichiers .so et exe.</p>
</li>
</ol>
<p class="last">I (Daniel Morissette) préfère personnellement l&#8217;option #2 parce qu&#8217;elle est permanente et s&#8217;applique à tout ce qui fonctionne sur votre système.</p>
</td>
</tr>
</tbody>
</table>
<hr class="docutils" />
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Q:</th><td class="field-body"><p class="first last"><strong>Est ce que PHP/MapScript doit être définie en tant que CGI ? Si oui, pourquoi ?</strong></p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">A:</th><td class="field-body"><p class="first last">Oui, s&#8217;il vous plait lisez la <a class="reference external" href="http://old-mapserver.gis.umn.edu/cgi-bin/wiki.pl?PHPMapScriptCGI">PHP/MapScript CGI page</a> dans le wiki MapServer pour les détails.</p>
</td>
</tr>
</tbody>
</table>
<hr class="docutils" />
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Q:</th><td class="field-body"><p class="first"><strong>j&#8217;ai compilé PHP en tant que CGI et quand PHP tente de charger le fichier php_mapscript.so, j&#8217;obtiens une erreur &#8220;undefined symbol: _register_list_destructors&#8221; error. Qu&#8217;est ce qui ne va pas ?</strong></p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">A:</th><td class="field-body"><p class="first">Votre exécutable CGI PHP n&#8217;est probablement pas lié à la gestion du chargement des bibliothèques partagées. Le script configure de MapServer aurait dû vous donner un message à propos d&#8217;une option à ajouter au Makefile PHP pour activer les bibliothèques partagées.</p>
<p>Éditez le Makefile PHP principal et ajoutez &#8220;-rdynamic&#8221; au LDFLAGS en haut du Makefile, puis compilez de nouveau l&#8217;exécutable PHP.</p>
<p class="last"><strong>Note :</strong> Le paramètre actuel pour ajouter LDFLAGS peut être différent en fonction du système sur lequel vous travaillez. Sous Linux c&#8217;est &#8220;-rdynamic&#8221;, et sur *BSD c&#8217;est &#8220;-export-dynamic&#8221;.</p>
</td>
</tr>
</tbody>
</table>
<hr class="docutils" />
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Q:</th><td class="field-body"><p class="first"><strong>Quelles sont les meilleurs combinaisons entre les versions de MapScript et PHP?</strong></p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">A:</th><td class="field-body"><p class="first">Les meilleures combinaisons sont:</p>
<ul class="last simple">
<li><p class="first">MapScript 4.10 avec PHP 5.2.1 et plus</p>
</li>
<li><p class="first">MapScript 4.10 avec PHP 4.4.6 et plus</p>
</li>
</ul>
</td>
</tr>
</tbody>
</table>
<hr class="docutils" />
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Q:</th><td class="field-body"><p class="first last"><strong>J&#8217;ai chargé dynamiquement gd.so et php_mapscript.so et je tombe sur des problèmes, pourquoi ?</strong></p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">A:</th><td class="field-body"><p class="first last">module GD</p>
</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper"><h3>Navigation</h3>
<p>
<a href="../about.html" title="About">About</a><br>
<a href="../products.html" title="Products">Products</a><br>
<a href="../community/index.html" title="Community">Community</a><br>
<a href="../development/index.html" title="Development">Development</a><br>
<a href="../download.html" title="Downloads">Downloads</a><br>
<a href="../documentation.html" title="Documentation">Documentation</a><br>
<a href="../faq.html" title="FAQ">FAQ</a>
</p>
  <h3>Current Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Installation de PHP MapScript</a><ul>
<li><a class="reference internal" href="#introduction">Introduction</a><ul>
<li><a class="reference internal" href="#which-version-of-php-is-supported">Quelle version de PHP est supportée?</a></li>
<li><a class="reference internal" href="#how-to-get-more-information-on-the-php-mapscript-module-for-mapserver">Comment avoir plus d&#8217;informations sur le module PHP/MapScript pour MapServer</a></li>
</ul>
</li>
<li><a class="reference internal" href="#obtaining-compiling-and-installing-php-and-the-php-mapscript-module">Obtenir, compiler et installer PHP et le module PHP/MapScript</a><ul>
<li><a class="reference internal" href="#download-php-and-php-mapscript">Télécharger PHP et PHP/MapScript</a></li>
<li><a class="reference internal" href="#setting-up-php-on-your-server">Configurer PHP sur votre serveur</a></li>
<li><a class="reference internal" href="#build-install-the-php-mapscript-module">Compiler/installer le module PHP/MapScript</a></li>
<li><a class="reference internal" href="#installing-php-mapscript">Installer PHP/MapScript</a></li>
<li><a class="reference internal" href="#example-steps-of-a-full-windows-installation">Exemple d&#8217;étapes d&#8217;une installation complète sous Windows</a></li>
</ul>
</li>
<li><a class="reference internal" href="#faq-common-problems">FAQ / Problèmes communs</a><ul>
<li><a class="reference internal" href="#questions-regarding-documentation">Questions à propos de la documentation</a></li>
<li><a class="reference internal" href="#questions-about-installation">Questions à propos de l&#8217;installation</a></li>
</ul>
</li>
</ul>
</li>
</ul>

<div id="searchbox" style="display: none" role="search">
  <h3>Recherche rapide</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Saisissez un mot clef ou un nom de module, classe ou fonction.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2016, Open Source Geospatial Foundation.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.3.5</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.4</a>
      
    </div>

    

    
  </body>
</html>