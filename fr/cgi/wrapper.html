<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Un simple script de wrapper CGI &mdash; MapServer 7.0.0 documentation</title>
    
    <link rel="stylesheet" href="../_static/sphinx.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '7.0.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/translations.js"></script>
    <link rel="shortcut icon" href="../_static/mapserver.ico"/>
    <link rel="author" title="À propos de ces documents" href="../about.html" />
    <link rel="copyright" title="Copyright" href="../copyright.html" />
    <link rel="top" title="MapServer 7.0.0 documentation" href="../index.html" />
    <link rel="up" title="CGI" href="index.html" />
    <link rel="next" title="Visualisateur OpenLayers de MapServer" href="openlayers.html" />
    <link rel="prev" title="Substitution à la volée" href="runsub.html" />
   
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9">

  </head>
  <body role="document">

<table width="100%" style="width: 100%; background-color: white;">
  <tr>
    <td rowspan="2" style="padding: 10px 0px 10px 10px;">
      <a href="../index.html" title="Home"><img src="../_static/banner.png" alt="MapServer banner" border="0" /></a>
    </td>
    <td style="padding: 10px 10px 0px 0px; text-align: right; vertical-align: top;">
      <a href="../index.html" title="Home">Home</a> |
      <a href="../products.html" title="Products (MapServer core, MapCache, TinyOWS">Products</a> |
      <a href="https://github.com/mapserver/mapserver/issues/" title="Issue Tracker (MapServer core)">Issue Tracker</a> |
      <a href="../faq.html" title="FAQ">FAQ</a> |
      <a href="../download.html" title="Download">Download </a>
    </td>
  </tr>
  <tr>
    <td style="padding: 0px 10px 0px 0px; text-align: right; vertical-align: bottom;">
        
          
            <a href="../../cgi/wrapper.html"><img src="../_static/flagicons/en.png" alt="en" title="en" border="0" /></a>
          
        
        
          
            <a href="../../ar/cgi/wrapper.html"><img src="../_static/flagicons/ar.png" alt="ar" title="ar" border="0" /></a>
          
        
        
          
            <a href="../../de/cgi/wrapper.html"><img src="../_static/flagicons/de.png" alt="de" title="de" border="0" /></a>
          
        
        
          
            <a href="../../el/cgi/wrapper.html"><img src="../_static/flagicons/el.png" alt="el" title="el" border="0" /></a>
          
        
        
          
            <a href="../../es/cgi/wrapper.html"><img src="../_static/flagicons/es.png" alt="es" title="es" border="0" /></a>
          
        
        <img src="../_static/flagicons/fr.png" alt="fr" title="fr" border="0" width="18px" height="13px"/>
        
          
            <a href="../../id/cgi/wrapper.html"><img src="../_static/flagicons/id.png" alt="id" title="id" border="0" /></a>
          
        
        
          
            <a href="../../it/cgi/wrapper.html"><img src="../_static/flagicons/it.png" alt="it" title="it" border="0" /></a>
          
        
        
          
            <a href="../../ja/cgi/wrapper.html"><img src="../_static/flagicons/ja.png" alt="ja" title="ja" border="0" /></a>
          
        
        
          
            <a href="../../nl_NL/cgi/wrapper.html"><img src="../_static/flagicons/nl_NL.png" alt="nl_NL" title="nl_NL" border="0" /></a>
          
        
        
          
            <a href="../../pl/cgi/wrapper.html"><img src="../_static/flagicons/pl.png" alt="pl" title="pl" border="0" /></a>
          
        
        
          
            <a href="../../ru/cgi/wrapper.html"><img src="../_static/flagicons/ru.png" alt="ru" title="ru" border="0" /></a>
          
        
        
          
            <a href="../../sq/cgi/wrapper.html"><img src="../_static/flagicons/sq.png" alt="sq" title="sq" border="0" /></a>
          
        
        
          
            <a href="../../tr/cgi/wrapper.html"><img src="../_static/flagicons/tr.png" alt="tr" title="tr" border="0" /></a>
          
        
        
          
            <a href="../../uk/cgi/wrapper.html"><img src="../_static/flagicons/uk.png" alt="uk" title="uk" border="0" /></a>
          
        

    </td>
  </tr>
</table>


    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="Index général"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="openlayers.html" title="Visualisateur OpenLayers de MapServer"
             accesskey="N">suivant</a> |</li>
        <li class="right" >
          <a href="runsub.html" title="Substitution à la volée"
             accesskey="P">précédent</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">Home</a> &raquo;</li>
          <li class="nav-item nav-item-1"><a href="../documentation.html" >Documentation de MapServer 7.0.0</a> &raquo;</li>
          <li class="nav-item nav-item-2"><a href="index.html" accesskey="U">CGI</a> &raquo;</li> 
      </ul>
    </div>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="a-simple-cgi-wrapper-script">
<span id="wrapper"></span><h1><a class="toc-backref" href="#table-of-contents">Un simple script de wrapper CGI</a><a class="headerlink" href="#a-simple-cgi-wrapper-script" title="Lien permanent vers ce titre">¶</a></h1>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Author:</th><td class="field-body">Steven Monai</td>
</tr>
<tr class="field-even field"><th class="field-name">Revision:</th><td class="field-body">$Revision$</td>
</tr>
<tr class="field-odd field"><th class="field-name">Date:</th><td class="field-body">$Date$</td>
</tr>
<tr class="field-even field"><th class="field-name">Last Updated:</th><td class="field-body"><p class="first last">26/01/2006</p>
</td>
</tr>
</tbody>
</table>
<div class="contents topic" id="table-of-contents">
<p class="topic-title first">Table des matières</p>
<ul class="simple">
<li><a class="reference internal" href="#a-simple-cgi-wrapper-script" id="id1">Un simple script de wrapper CGI</a><ul>
<li><a class="reference internal" href="#introduction" id="id2">Introduction</a></li>
<li><a class="reference internal" href="#script-information" id="id3">Information sur le script</a></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="introduction">
<h2><a class="toc-backref" href="#table-of-contents">Introduction</a><a class="headerlink" href="#introduction" title="Lien permanent vers ce titre">¶</a></h2>
<p>Ce document présente un script shell simple qui peut être utilisé pour &#8220;wrapper&#8221; le CGI de MapServer dans le but d&#8217;éviter d&#8217;avoir à spécifier le paramètre &#8220;map&#8221; (ou n&#8217;importe quels autres paramètres) dans l&#8217;URL de votre MapServer.</p>
<div class="admonition warning">
<p class="first admonition-title">Avertissement</p>
<p class="last">Using a wrapper script is inefficient as it implies spawning two processes
(shell+mapserv) instead of only one (mapserv), and should not be used on
production installations. Refer to <a class="reference internal" href="../ogc/wms_server.html#online-resource-wms"><span>Changer l&#8217;URL &#8220;Online Resource&#8221;</span></a> for examples
of how to setup similar functionality directly by using webserver
configuration options.</p>
</div>
</div>
<div class="section" id="script-information">
<h2><a class="toc-backref" href="#table-of-contents">Information sur le script</a><a class="headerlink" href="#script-information" title="Lien permanent vers ce titre">¶</a></h2>
<p>Si vous désirez éviter à avoir à spécifier le paramètre &#8216;map&#8217; dans vos URL de MapServer, une solution est d&#8217;utiliser un &#8220;wrapper&#8221;.  Typiquement un wrapper est un programme CGI qui reçoit une requête CGI en entrée, modifie les paramètres de la requête puis renvoie le processus vers un autre programme CGI (par exemple MapServer).</p>
<p>Le script suivant est un wrapper pour les requêtes GET CGI qui doit être assez générique pour être lancé à partir de n&#8217;importe quel Système d&#8217;Exploitation avec /bin/sh:</p>
<div class="section" id="alternative-1">
<h3>Alternative 1<a class="headerlink" href="#alternative-1" title="Lien permanent vers ce titre">¶</a></h3>
<div class="highlight-python"><div class="highlight"><pre><span></span>#!/bin/sh
MAPSERV=&quot;/path/to/my/mapserv&quot;
MS_MAPFILE=&quot;/path/to/my/mapfile.map&quot; exec ${MAPSERV}
</pre></div>
</div>
<p>Vous devez définir les variables MAPSERV et MS_MAPFILE comme appropriées pour votre configuration. MAPSERV pointe vers votre éxécutable MapServer, et MS_MAPFILE pointe vers le mapfile que vous voulez que MapServer utilise. Les deux variables doivent être des chemins de fichiers absolus dans lesquels votre serveur web a un accès en lecture, bien qu&#8217;ils ne nécessitent pas (et probablement ne devrait pas) être des endroits accessibles par le web. Puis placez le script dans votre répertoire cgi-bin du serveur, et rendez-le exécutable.</p>
<p>Cette solution devrait fonctionner à la fois pour les requêtes GET et POST</p>
</div>
<div class="section" id="alternative-2">
<h3>Alternative 2<a class="headerlink" href="#alternative-2" title="Lien permanent vers ce titre">¶</a></h3>
<div class="highlight-python"><div class="highlight"><pre><span></span>#!/bin/sh
MAPSERV=&quot;/path/to/my/mapserv&quot;
MAPFILE=&quot;/path/to/my/mapfile.map&quot;
if [ &quot;${REQUEST_METHOD}&quot; = &quot;GET&quot; ]; then
  if [ -z &quot;${QUERY_STRING}&quot; ]; then
    QUERY_STRING=&quot;map=${MAPFILE}&quot;
  else
    QUERY_STRING=&quot;map=${MAPFILE}&amp;${QUERY_STRING}&quot;
  fi
  exec ${MAPSERV}
else
  echo &quot;Sorry, I only understand GET requests.&quot;
fi
exit 1
# End of Script
</pre></div>
</div>
<p>Vous devez définir les variables MAPSERV et MAPFILE comme appropriés pour votre configuration. MAPSERV pointe vers votre éxécutable MapServer, et MAPFILE pointe vers le mapfile que vous voulez que MapServer utilise. Les deux variables doivent être des chemins de fichiers absolue dans lesquels votre serveur web a un accès en lecture, bien que ils ne nécessitent pas (et probablement ne devrait pas) être des endroits accessibles par le web. Puis placez le script dans votre répertoire cgi-bin du serveur, et rendez le exécutable.</p>
<p>Bien que ce script définisse le paramètre &#8216;map&#8217;, il est facile de le modifier pour définir n&#8217;importe quels autres paramètres MapServer. Par exemple, si vous voulez forcer le mode de votre MapServer à &#8216;map&#8217; vous pouvez simplement ajouter &#8216;mode=map&#8217; au début de la variable QUERY_STRING. Souvenez-vous de séparer vos paramètres avec une esperluette(&#8216;&amp;&#8217;).</p>
<p>Enfin, remarquez que ce script ne fonctionne qu&#8217;avec les requêtes GET.</p>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper"><h3>Navigation</h3>
<p>
<a href="../about.html" title="About">About</a><br>
<a href="../products.html" title="Products">Products</a><br>
<a href="../community/index.html" title="Community">Community</a><br>
<a href="../development/index.html" title="Development">Development</a><br>
<a href="../download.html" title="Downloads">Downloads</a><br>
<a href="../documentation.html" title="Documentation">Documentation</a><br>
<a href="../faq.html" title="FAQ">FAQ</a>
</p>
  <h3>Current Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Un simple script de wrapper CGI</a><ul>
<li><a class="reference internal" href="#introduction">Introduction</a></li>
<li><a class="reference internal" href="#script-information">Information sur le script</a><ul>
<li><a class="reference internal" href="#alternative-1">Alternative 1</a></li>
<li><a class="reference internal" href="#alternative-2">Alternative 2</a></li>
</ul>
</li>
</ul>
</li>
</ul>

<div id="searchbox" style="display: none" role="search">
  <h3>Recherche rapide</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Saisissez un mot clef ou un nom de module, classe ou fonction.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2016, Open Source Geospatial Foundation.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.3.5</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.4</a>
      
    </div>

    

    
  </body>
</html>